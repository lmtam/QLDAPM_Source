fourSq.views.MenuView=function(a){};
fourSq.views.MenuView=fourSq.ui.View.extend({initialize:function(a){fourSq.views.MenuView.__super__.initialize.call(this,a);this.venue_=a.venue},setupMenuFlag:function(){if(fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser())){var a=this.$el.find(".flagLink"),b=$(templates.fourSq.newdrag.page.venuemenu.web.flag());this.comment_=b.find(".comment");$(a).click(fourSq.bind(function(){b.addClass("unknown");b.removeClass("success failure noProblem");var a=(new fourSq.ui.dialog.Dialog({className:"flagMenuDialog",
contentElement:b,isModal:!0,hasCloseButton:!0})).show();$(b).find(".submitFlag").click(fourSq.bind(function(){var d=$(b).find("input[name\x3dreason]:checked"),e=d.val();fourSq.isDefinedAndNotNull(e)?(b.removeClass("noReason"),fourSq.api.services.Venue.flag(this.venue_.id,{problem:e,creatingView:"web-menu-page",comment:this.comment_.val()},fourSq.bind(function(){d.removeAttr("checked");b.toggleClass("success unknown");window.setTimeout(function(){a.close()},1E3)},this))):b.addClass("noReason")},this))},
this))}else this.$el.find(".flagMenu").hide()}});"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.page&&(templates.fourSq.newdrag.page={});"undefined"==typeof templates.fourSq.newdrag.page.venuemenu&&(templates.fourSq.newdrag.page.venuemenu={});"undefined"==typeof templates.fourSq.newdrag.page.venuemenu.web&&(templates.fourSq.newdrag.page.venuemenu.web={});
templates.fourSq.newdrag.page.venuemenu.web.flag=function(a,b){return'\x3cdiv class\x3d"menuflagFrame unknown"\x3e\x3ch3\x3eFlag this Menu\x3c/h3\x3e\x3cdiv class\x3d"flagForm"\x3e\x3cul\x3e\x3cli\x3e\x3clabel\x3e\x3cinput name\x3d"reason" type\x3d"radio" value\x3d"wrong_menu"/\x3eWrong menu\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3clabel\x3e\x3cinput name\x3d"reason" type\x3d"radio" value\x3d"incorrect_items"/\x3eIncorrect items\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3clabel\x3e\x3cinput name\x3d"reason" type\x3d"radio" value\x3d"other"/\x3eOther\x3c/label\x3e\x3c/li\x3e\x3c/ul\x3e\x3ctextarea class\x3d"comment" placeholder\x3d"Comments ..."\x3e\x3c/textarea\x3e\x3cp class\x3d"noReasonMessage"\x3ePlease select a reason.\x3c/p\x3e\x3cp\x3e\x3cinput name\x3d"reason" type\x3d"button" name\x3d"submitFlag" value\x3d"Submit Flag" class\x3d"submitFlag greenButton"/\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"flagStatus"\x3e\x3cdiv class\x3d"status success"\x3e\x3cp\x3eYour flag was submitted successfully.\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"status failure"\x3e\x3cp\x3eYour flag did not submit. Please try again later.\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};fourSq.venue.views.MenuPageView=function(a){};
fourSq.venue.views.MenuPageView=fourSq.views.MenuView.extend({initialize:function(a){fourSq.venue.views.MenuPageView.__super__.initialize.call(this,a);window.console.log("fourSq.venue.views.MenuPage initialize");this.venue_=a.venue},decorate:function(){var a=this.$el.find(".tableOfContents .section");_.each(a,function(a){a=$(a);fourSq.isDefinedAndNotNull(a.data("section-id"))&&a.click(fourSq.curry(this.scrollToSection,this,a.data("section-id")))},this);a=this.$el.find(".tableOfContents .menuTitle");
_.each(a,function(a){a=$(a);fourSq.isDefinedAndNotNull(a.data("menu-id"))&&a.click(fourSq.curry(this.scrollToSection,this,a.data("menu-id")))},this);this.setupMenuFlag();return this},scrollToSection:function(a){a=this.$el.find("#"+a);1===a.length&&fourSq.ui.util.scrollTo(a,{animate:!0,buffer:0})}});fourSq.venue.pages.MenuPage=function(a){};fourSq.venue.pages.MenuPage=fourSq.views.Page.extend({initialize:function(a){fourSq.venue.pages.MenuPage.__super__.initialize.call(this,_.extend(a,{idsForLogging:fourSq.api.models.companion.log.Oids.build({venueId:a.venue.id})}));this.menu_=(new fourSq.venue.views.MenuPageView({el:this.$el.find("#menuPage"),venue:a.venue})).decorate()},pageViewName:function(){return fourSq.stats.action.View.VENUE_MENU}});