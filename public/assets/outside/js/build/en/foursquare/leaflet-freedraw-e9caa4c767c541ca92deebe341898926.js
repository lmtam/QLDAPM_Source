(function(){function a(a){for(var b=-1,c=a.length,d=[];++b<c;)d.push(a[b]);return d}function b(){}function c(a){return a}function d(){return this}function e(){return!0}function f(a){return"function"==typeof a?a:function(){return a}}function g(a,b,c){return function(){var d=c.apply(b,arguments);return arguments.length?a:d}}function h(a){return null!=a&&!isNaN(a)}function l(a){return a.length}function n(a){return null==a}function q(a){return a.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function t(){}
function u(a){function c(){for(var b=d,e=-1,f=b.length,g;++e<f;)(g=b[e].on)&&g.apply(this,arguments);return a}var d=[],e=new b;return c.on=function(b,c){var f=e.get(b),g;return 2>arguments.length?f&&f.on:(f&&(f.on=null,d=d.slice(0,g=d.indexOf(f)).concat(d.slice(g+1)),e.remove(b)),c&&d.push(e.set(b,{on:c})),a)},c}function w(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function y(a){return a+""}function z(a){for(var b=a.lastIndexOf("."),
c=0<=b?a.substring(b):(b=a.length,""),d=[];0<b;)d.push(a.substring(b-=3,b+3));return d.reverse().join(",")+c}function E(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function k(a){return function(b){return 1-a(1-b)}}function N(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function F(a){return a}function H(a){return function(b){return Math.pow(b,a)}}function s(a){return 1-Math.cos(a*Math.PI/2)}function G(a){return Math.pow(2,10*(a-1))}function Q(a){return 1-Math.sqrt(1-a*a)}function J(a){return a<
1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function B(){d3.event.stopPropagation();d3.event.preventDefault()}function C(){for(var a=d3.event,b;b=a.sourceEvent;)a=b;return a}function T(a){for(var b=new t,c=0,d=arguments.length;++c<d;)b[arguments[c]]=u(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=d3.event;e.target=a;d3.event=e;b[e.type].apply(c,d)}finally{d3.event=f}}},b}function S(a,b){return b=
b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function R(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function X(a,b,c){return new U(a,b,c)}function U(a,b,c){this.r=a;this.g=b;this.b=c}function m(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function p(a,b,c){var d=0,e=0,f=0,g,m,p;if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(m=g[2].split(","),g[1]){case "hsl":return c(parseFloat(m[0]),parseFloat(m[1])/100,parseFloat(m[2])/100);case "rgb":return b(v(m[0]),
v(m[1]),v(m[2]))}return(p=Ca.get(a))?b(p.r,p.g,p.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):7===a.length&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),f=parseInt(f,16)),b(d,e,f))}function r(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,g,m,p=(e+d)/2;return f?(m=.5>p?f/(e+d):f/(2-e-d),a==e?g=(b-c)/f+(b<c?6:0):b==e?g=(c-a)/f+2:g=(a-b)/f+4,g*=60):m=g=0,x(g,m,p)}function v(a){var b=
parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function x(a,b,c){return new A(a,b,c)}function A(a,b,c){this.h=a;this.s=b;this.l=c}function D(a,b,c){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;return a%=360,0>a&&(a+=360),b=0>b?0:1<b?1:b,c=0>c?0:1<c?1:c,f=.5>=c?c*(1+b):c+b-c*b,e=2*c-f,X(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function P(a){return $a(a,M),a}function Ba(a){return function(){return Da(a,
this)}}function qa(a){return function(){return Hb(a,this)}}function Fb(a,b){function c(){if(b=this.classList)return b.add(a);var b=this.className,d=null!=b.baseVal,e=d?b.baseVal:b;f.lastIndex=0;f.test(e)||(e=q(e+" "+a),d?b.baseVal=e:this.className=e)}function d(){if(b=this.classList)return b.remove(a);var b=this.className,c=null!=b.baseVal,e=c?b.baseVal:b,e=q(e.replace(f," "));c?b.baseVal=e:this.className=e}function e(){(b.apply(this,arguments)?c:d).call(this)}var f=new RegExp("(^|\\s+)"+d3.requote(a)+
"(\\s+|$)","g");if(2>arguments.length){var g=this.node();if(m=g.classList)return m.contains(a);var m=g.className;return f.lastIndex=0,f.test(null!=m.baseVal?m.baseVal:m)}return this.each("function"==typeof b?e:b?c:d)}function Zc(a){return function(){return Ib(this,a)}}function $c(a){return arguments.length||(a=d3.ascending),function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function ra(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.length,m;f<g;f++)(m=e[f])&&b(m,f,c);return a}function Gb(a){return $a(a,
ha),a}function Za(a,c,d){$a(a,Y);var e=new b,f=d3.dispatch("start","end"),g=Ea;return a.id=c,a.time=d,a.tween=function(b,c){return 2>arguments.length?e.get(b):(null==c?e.remove(b):e.set(b,c),a)},a.ease=function(b){return arguments.length?(g="function"==typeof b?b:d3.ease.apply(d3,arguments),a):g},a.each=function(b,c){return 2>arguments.length?cd.call(a,b):(f.on(b,c),a)},d3.timer(function(b){return ra(a,function(a,m,K){function p(b){return x.active>c?h():(x.active=c,e.forEach(function(b,c){(c=c.call(a,
n,m))&&l.push(c)}),f.start.call(a,n,m),r(b)||d3.timer(r,0,d),1)}function r(b){if(x.active!==c)return h();b=(b-v)/k;for(var d=g(b),e=l.length;0<e;)l[--e].call(a,d);if(1<=b)return h(),ia=c,f.end.call(a,n,m),ia=0,1}function h(){return--x.count||delete a.__transition__,1}var l=[],v=a.delay,k=a.duration,x=(a=a.node).__transition__||(a.__transition__={active:0,count:0}),n=a.__data__;++x.count;v<=b?p(b):d3.timer(p,v,d)})},0,d),a}function dd(a,b,c){return""!=c&&sa}function Jb(a,b){function c(a,d,f){a=b.call(this,
a,d);return null==a?""!=f&&sa:f!=a&&e(f,a)}function d(a,c,f){return f!=b&&e(f,b)}var e="transform"==a?d3.interpolateTransform:d3.interpolate;return"function"==typeof b?c:null==b?dd:(b+="",d)}function cd(a){var b=ia,c=Ea,d=Fa,e=Ga;return ia=this.id,Ea=this.ease(),ra(this,function(b,c,d){Fa=b.delay;Ga=b.duration;a.call(b=b.node,b.__data__,c,d)}),ia=b,Ea=c,Fa=d,Ga=e,this}function ab(){for(var a,b=Date.now(),c=ja;c;)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),c=c.next;a=Kb()-b;24<a?(isFinite(a)&&(clearTimeout(Ha),
Ha=setTimeout(ab,a)),Ia=0):(Ia=1,Lb(ab))}function Kb(){for(var a=null,b=ja,c=Infinity;b;)b.flush?b=a?a.next=b.next:ja=b.next:(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function Mb(a){var b=[a.a,a.b],c=[a.c,a.d],d=Nb(b),e=b[0]*c[0]+b[1]*c[1],f;f=-e;f=(c[0]+=f*b[0],c[1]+=f*b[1],c);f=Nb(f)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Ob;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*Ob:0}function Nb(a){var b=
Math.sqrt(a[0]*a[0]+a[1]*a[1]);return b&&(a[0]/=b,a[1]/=b),b}function Pb(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>bb&&(window.scrollX||window.scrollY)){var c=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0),e=c[0][0].getScreenCTM();bb=!e.f&&!e.e;c.remove()}return bb?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}c=a.getBoundingClientRect();
return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function ta(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function Ja(a){return a.rangeExtent?a.rangeExtent():ta(a.range())}function cb(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],g;f<e&&(g=c,c=d,d=g,g=e,e=f,f=g);if(g=f-e)b=b(g),a[c]=b.floor(e),a[d]=b.ceil(f);return a}function ed(){return Math}function Qb(a,b,c,d){function e(){var p=2<Math.min(a.length,b.length)?fd:gd,r=d?R:S;return g=p(a,b,r,c),m=p(b,a,r,d3.interpolate),f}function f(a){return g(a)}
var g,m;return f.invert=function(a){return m(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(d3.interpolateRound)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return db(a,b)},f.tickFormat=function(b){return eb(a,b)},f.nice=function(){return cb(a,Rb),e()},f.copy=function(){return Qb(a,
b,c,d)},e()}function Sb(a,b){return d3.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Rb(a){return a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1),{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function Tb(a,b){var c=ta(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;return.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function db(a,b){return d3.range.apply(d3,
Tb(a,b))}function eb(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Tb(a,b)[2])/Math.LN10+.01))+"f")}function gd(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function fd(a,b,c,d){var e=[],f=[],g=0,m=Math.min(a.length,b.length)-1;for(a[m]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=m;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=d3.bisect(a,b,1,m)-1;return f[c](e[c](b))}}function Ub(a,b){function c(d){return a(b(d))}
var d=b.pow;return c.invert=function(b){return d(a.invert(b))},c.domain=function(e){return arguments.length?(b=0>e[0]?Ka:fb,d=b.pow,a.domain(e.map(b)),c):a.domain().map(d)},c.nice=function(){return a.domain(cb(a.domain(),ed)),c},c.ticks=function(){var c=ta(a.domain()),e=[];if(c.every(isFinite)){var f=Math.floor(c[0]),g=Math.ceil(c[1]),m=d(c[0]),c=d(c[1]);if(b===Ka)for(e.push(d(f));f++<g;)for(var p=9;0<p;p--)e.push(d(f)*p);else{for(;f<g;f++)for(p=1;10>p;p++)e.push(d(f)*p);e.push(d(f))}for(f=0;e[f]<
m;f++);for(g=e.length;e[g-1]>c;g--);e=e.slice(f,g)}return e},c.tickFormat=function(a,e){2>arguments.length&&(e=hd);if(1>arguments.length)return e;var f=Math.max(.1,a/c.ticks().length),g=b===Ka?(m=-1E-12,Math.floor):(m=1E-12,Math.ceil),m;return function(a){return a/d(g(b(a)+m))<=f?e(a):""}},c.copy=function(){return Ub(a.copy(),b)},Sb(c,a)}function fb(a){return Math.log(0>a?0:a)/Math.LN10}function Ka(a){return-Math.log(0<a?0:-a)/Math.LN10}function Vb(a,b){function c(b){return a(d(b))}var d=La(b),e=
La(1/b);return c.invert=function(b){return e(a.invert(b))},c.domain=function(b){return arguments.length?(a.domain(b.map(d)),c):a.domain().map(e)},c.ticks=function(a){return db(c.domain(),a)},c.tickFormat=function(a){return eb(c.domain(),a)},c.nice=function(){return c.domain(cb(c.domain(),Rb))},c.exponent=function(a){if(!arguments.length)return b;var f=c.domain();return d=La(b=a),e=La(1/b),c.domain(f)},c.copy=function(){return Vb(a.copy(),b)},Sb(c,a)}function La(a){return function(b){return 0>b?-Math.pow(-b,
a):Math.pow(b,a)}}function Wb(a,c){function d(b){return g[((f.get(b)||f.set(b,a.push(b)))-1)%g.length]}function e(b,c){return d3.range(a.length).map(function(a){return b+c*a})}var f,g,m;return d.domain=function(e){if(!arguments.length)return a;a=[];f=new b;for(var g=-1,m=e.length,p;++g<m;)f.has(p=e[g])||f.set(p,a.push(p));return d[c.t](c.x,c.p)},d.range=function(a){return arguments.length?(g=a,m=0,c={t:"range",x:a},d):g},d.rangePoints=function(b,f){2>arguments.length&&(f=0);var p=b[0],r=b[1],h=(r-
p)/(a.length-1+f);return g=e(2>a.length?(p+r)/2:p+h*f/2,h),m=0,c={t:"rangePoints",x:b,p:f},d},d.rangeBands=function(b,f){2>arguments.length&&(f=0);var p=b[1]<b[0],r=b[p-0],h=(b[1-p]-r)/(a.length+f);return g=e(r+h*f,h),p&&g.reverse(),m=h*(1-f),c={t:"rangeBands",x:b,p:f},d},d.rangeRoundBands=function(b,f){2>arguments.length&&(f=0);var p=b[1]<b[0],r=b[p-0],h=b[1-p],l=Math.floor((h-r)/(a.length+f));return g=e(r+Math.round((h-r-(a.length-f)*l)/2),l),p&&g.reverse(),m=Math.round(l*(1-f)),c={t:"rangeRoundBands",
x:b,p:f},d},d.rangeBand=function(){return m},d.rangeExtent=function(){return ta(c.x)},d.copy=function(){return Wb(a,c)},d.domain(a)}function Xb(a,b){function c(){var f=0,g=b.length;for(e=[];++f<g;)e[f-1]=d3.quantile(a,f/g);return d}function d(a){return isNaN(a=+a)?NaN:b[d3.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},
d.copy=function(){return Xb(a,b)},c()}function Yb(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.copy=function(){return Yb(a,b,c)},e()}function Zb(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=
function(b){return db(a,b)},b.tickFormat=function(b){return eb(a,b)},b.copy=function(){return Zb(a)},b}function id(a){return a.innerRadius}function jd(a){return a.outerRadius}function $b(a){return a.startAngle}function ac(a){return a.endAngle}function bc(a){function b(e){function m(){h.push("M",p(a(O),r))}for(var h=[],O=[],l=-1,v=e.length,k,x=f(c),bd=f(d);++l<v;)g.call(this,k=e[l],l)?O.push([+x.call(this,k,l),+bd.call(this,k,l)]):O.length&&(m(),O=[]);return O.length&&m(),h.length?h.join(""):null}
var c=gb,d=cc,g=e,m=Ma,p=aa,r=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(Na.has(a+="")||(a=Ma),p=Na.get(m=a),b):m},b.tension=function(a){return arguments.length?(r=a,b):r},b}function gb(a){return a[0]}function cc(a){return a[1]}function aa(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("L",(d=a[b])[0],",",
d[1]);return e.join("")}function hb(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function ib(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Oa(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return aa(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],m=g,p=1;c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],p=2);if(1<b.length)for(m=
b[1],f=a[p],p++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-m[0])+","+(f[1]-m[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,p++)f=a[p],m=b[e],d+="S"+(f[0]-m[0])+","+(f[1]-m[1])+","+f[0]+","+f[1];c&&(c=a[p],d+="Q"+(f[0]+2*m[0]/3)+","+(f[1]+2*m[1]/3)+","+c[0]+","+c[1]);return d}function jb(a,b){for(var c=[],d=(1-b)/2,e,f=a[0],g=a[1],m=1,p=a.length;++m<p;)e=f,f=g,g=a[m],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function dc(a){if(3>a.length)return aa(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,
e,(d=a[1])[0]],m=[f,f,f,d[1]],e=[e,",",f];for(ua(e,g,m);++b<c;)d=a[b],g.shift(),g.push(d[0]),m.shift(),m.push(d[1]),ua(e,g,m);for(b=-1;2>++b;)g.shift(),g.push(d[0]),m.shift(),m.push(d[1]),ua(e,g,m);return e.join("")}function ca(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function ua(a,b,c){a.push("C",ca(ec,b),",",ca(ec,c),",",ca(fc,b),",",ca(fc,c),",",ca(oa,b),",",ca(oa,c))}function kb(a,b){return(b[1]-a[1])/(b[0]-a[0])}function gc(a){for(var b,c=-1,d=a.length,e,f;++c<d;)b=a[c],e=b[0],f=b[1]+
ka,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function hc(a){function b(e){function r(){O.push("M",h(a(n),k),v,l(a(x.reverse()),k),"Z")}for(var O=[],x=[],n=[],ga=-1,A=e.length,q,D=f(c),t=f(g),s=c===d?function(){return P}:f(d),u=g===m?function(){return w}:f(m),P,w;++ga<A;)p.call(this,q=e[ga],ga)?(x.push([P=+D.call(this,q,ga),w=+t.call(this,q,ga)]),n.push([+s.call(this,q,ga),+u.call(this,q,ga)])):x.length&&(r(),x=[],n=[]);return x.length&&r(),O.length?O.join(""):null}var c=gb,d=gb,g=0,m=cc,p=e,
r=Ma,h=aa,l=aa,v="L",k=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(g=m=a,b):m},b.y0=function(a){return arguments.length?(g=a,b):g},b.y1=function(a){return arguments.length?(m=a,b):m},b.defined=function(a){return arguments.length?(p=a,b):p},b.interpolate=function(a){return arguments.length?(Na.has(a+="")||(a=Ma),h=Na.get(r=a),l=h.reverse||
h,v=/-closed$/.test(a)?"M":"L",b):r},b.tension=function(a){return arguments.length?(k=a,b):k},b}function ic(a){return a.source}function jc(a){return a.target}function kd(a){return a.radius}function kc(a){return[a.x,a.y]}function ld(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+ka;return[c*Math.cos(b),c*Math.sin(b)]}}function md(){return 64}function nd(){return"circle"}function lc(a){a=Math.sqrt(a/Math.PI);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function mc(a,
b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function nc(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function od(a,b,c){d=[];if(c&&1<b.length){a=ta(a.domain());for(var d,e=-1,f=b.length,g=(b[1]-b[0])/++c,m,p;++e<f;)for(m=c;0<--m;)(p=+b[e]-m*g)>=a[0]&&d.push(p);--e;for(m=0;++m<c&&(p=+b[e]+m*g)<a[1];)d.push(p)}return d}function pd(){va||(va=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y",
"scroll").append("div").style("height","2000px").node().parentNode);var a=d3.event,b;try{va.scrollTop=1E3,va.dispatchEvent(a),b=1E3-va.scrollTop}catch(c){b=a.wheelDelta||5*-a.detail}return b}function qd(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=oc(b);for(var d=oc(d),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function oc(a){for(var b=[],c=a.parent;null!=c;)b.push(a),
a=c,c=c.parent;return b.push(a),b}function pc(a){a.fixed|=2}function rd(a){a!==la&&(a.fixed&=1)}function sd(){la.fixed&=1;lb=la=null}function td(){la.px=d3.event.x;la.py=d3.event.y;lb.resume()}function qc(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,g=f.length,m=-1,p;++m<g;)p=f[m],null!=p&&(qc(p,b,c),a.charge+=p.charge,d+=p.charge*p.cx,e+=p.charge*p.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,
e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function ud(a){return 20}function vd(a){return 1}function wd(a){return a.x}function xd(a){return a.y}function yd(a,b,c){a.y0=b;a.y=c}function mb(a){return d3.range(a.length)}function nb(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function zd(a){for(var b=1,c=0,d=a[0][1],e,f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function Ad(a){return a.reduce(Bd,0)}function Bd(a,b){return a+b[1]}function Cd(a,b){return rc(a,Math.ceil(Math.log(b.length)/
Math.LN2+1))}function rc(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Dd(a){return[d3.min(a),d3.max(a)]}function wa(a,b){return d3.rebind(a,b,"sort","children","value"),a.links=Ed,a.nodes=function(b){return ob=!0,(a.nodes=a)(b)},a}function Fd(a){return a.children}function Gd(a){return a.value}function Hd(a,b){return b.value-a.value}function Ed(a){return d3.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Id(a,
b){return a.value-b.value}function pb(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function sc(a,b){a._pack_next=b;b._pack_prev=a}function tc(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.001<e*e-c*c-d*d}function Jd(a){function b(a){c=Math.min(a.x-a.r,c);d=Math.max(a.x+a.r,d);e=Math.min(a.y-a.r,e);f=Math.max(a.y+a.r,f)}var c=Infinity,d=-Infinity,e=Infinity,f=-Infinity,g=a.length,m,p,r,h,l;a.forEach(Kd);m=a[0];m.x=-m.r;m.y=0;b(m);if(1<g&&(p=a[1],p.x=p.r,p.y=0,
b(p),2<g)){r=a[2];uc(m,p,r);b(r);pb(m,r);m._pack_prev=r;pb(r,p);p=m._pack_next;for(var v=3;v<g;v++){uc(m,p,r=a[v]);var k=0,x=1,n=1;for(h=p._pack_next;h!==p;h=h._pack_next,x++)if(tc(h,r)){k=1;break}if(1==k)for(l=m._pack_prev;l!==h._pack_prev&&!tc(l,r);l=l._pack_prev,n++);k?(x<n||x==n&&p.r<m.r?sc(m,p=h):sc(m=l,p),v--):(pb(m,r),p=r,b(r))}}m=(c+d)/2;p=(e+f)/2;for(v=r=0;v<g;v++)h=a[v],h.x-=m,h.y-=p,r=Math.max(r,h.r+Math.sqrt(h.x*h.x+h.y*h.y));return a.forEach(Ld),r}function Kd(a){a._pack_next=a._pack_prev=
a}function Ld(a){delete a._pack_next;delete a._pack_prev}function vc(a){var b=a.children;b&&b.length?(b.forEach(vc),a.r=Jd(b)):a.r=Math.sqrt(a.value)}function wc(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=-1;for(var f=e.length;++a<f;)wc(e[a],b,c,d)}}function uc(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r;b=Math.sqrt(e*e+f*f);var m=Math.max(-1,Math.min(1,(d*d+b*b-g*g)/(2*d*b))),g=Math.acos(m);b=m*(d/=b);d*=Math.sin(g);c.x=a.x+b*e+d*f;c.y=a.y+b*f-d*e}else c.x=
a.x+d,c.y=a.y}function Md(a){return 1+d3.max(a,function(a){return a.y})}function Nd(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function xc(a){var b=a.children;return b&&b.length?xc(b[0]):a}function yc(a){var b=a.children,c;return b&&(c=b.length)?yc(b[c-1]):a}function zc(a,b){return a.parent==b.parent?1:2}function qb(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function rb(a){var b=a.children,c;return b&&(c=b.length)?b[c-1]:a._tree.thread}function Pa(a,b){var c=a.children;
if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Pa(c[f],b),a)&&(a=d);return a}function Od(a,b){return a.x-b.x}function Pd(a,b){return b.x-a.x}function Qd(a,b){return a.depth-b.depth}function Qa(a,b){function c(a,d){var e=a.children;if(e&&(p=e.length))for(var f,g=null,m=-1,p;++m<p;)f=e[m],c(f,g),g=f;b(a,d)}c(a,null)}function sb(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ac(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,
dy:f}}function Rd(a){return a.map(Sd).join(",")}function Sd(a){return/[",\n]/.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}function Ra(a,b){return function(c){return c&&a.hasOwnProperty(c.type)?a[c.type](c):b}}function tb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Sa(a,b){Bc.hasOwnProperty(a.type)&&Bc[a.type](a,b)}function Cc(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)b.apply(null,c[d])}function Td(a){return a.source}function Ud(a){return a.target}function Dc(){function a(b){var c=
Math.sin(b*=k)*x,d=Math.sin(k-b)*x;b=d*f+c*l;var m=d*g+c*v,c=d*e+c*h;return[Math.atan2(m,b)/I,Math.atan2(c,Math.sqrt(b*b+m*m))/I]}var b,c,d,e,f,g,m,p,r,h,l,v,k,x;return a.distance=function(){return null==k&&(x=1/Math.sin(k=Math.acos(Math.max(-1,Math.min(1,e*h+d*r*Math.cos(m-b)))))),k},a.source=function(m){var p=Math.cos(b=m[0]*I),r=Math.sin(b);return d=Math.cos(c=m[1]*I),e=Math.sin(c),f=d*p,g=d*r,k=null,a},a.target=function(b){var c=Math.cos(m=b[0]*I),d=Math.sin(m);return r=Math.cos(p=b[1]*I),h=Math.sin(p),
l=r*c,v=r*d,k=null,a},a}function Ec(a,b){var c=Dc().source(a).target(b);return c.distance(),c}function Vd(a,b,c,d){var e,f,g,m,p,r,h;return e=d[a],f=e[0],g=e[1],e=d[b],m=e[0],p=e[1],e=d[c],r=e[0],h=e[1],0<(h-g)*(m-f)-(p-g)*(r-f)}function ub(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Fc(a,b,c,d){var e=a[0],f=c[0];a=a[1];var g=c[1];c=b[0]-e;var m=d[0]-f;b=b[1]-a;d=d[1]-g;f=(m*(a-g)-d*(e-f))/(d*c-m*b);return[e+f*c,a+f*b]}function Gc(a,b){var c=a.map(function(a,b){return{index:b,
x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),d=null,e={list:[],leftEnd:null,rightEnd:null,init:function(){e.leftEnd=e.createHalfEdge(null,"l");e.rightEnd=e.createHalfEdge(null,"l");e.leftEnd.r=e.rightEnd;e.rightEnd.l=e.leftEnd;e.list.unshift(e.leftEnd,e.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a;b.r=a.r;a.r.l=b;a.r=b},leftBound:function(a){var b=e.leftEnd;do b=b.r;while(b!=e.rightEnd&&
f.rightOf(b,a));return b=b.l,b},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?d:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?d:a.edge.region[vb[a.side]]}},f={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y;return c.c=a.x*d+a.y*e+.5*(d*d+e*e),(0<d?d:-d)>(0<e?e:-e)?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=
a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(1E-10>Math.abs(e))return null;var f=(c.c*d.b-d.c*c.b)/e,e=(d.c*c.a-c.c*d.a)/e,g=c.region.r,m=d.region.r,p,r;g.y<m.y||g.y==m.y&&g.x<m.x?(p=a,r=c):(p=b,r=d);return(c=f>=r.region.r.x)&&"l"===p.side||!c&&"r"===p.side?null:{x:f,y:e}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,m=0,p=0;!e&&0>c.b||e&&0<=c.b?p=m=f>=
c.b*g:(p=b.x+b.y*c.b>c.c,0>c.b&&(p=!p),p||(m=1));m||(d=d.x-c.region.l.x,p=c.b*(g*g-f*f)<d*f*(1+2*g/d+c.b*c.b),0>c.b&&(p=!p))}else g=c.c-c.a*b.x,c=b.y-g,f=b.x-d.x,d=g-d.y,p=c*c>f*f+d*d;return"l"===a.side?p:!p},endPoint:function(a,c,d){a.ep[c]=d;a.ep[vb[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},g={list:[],insert:function(a,b,c){a.vertex=b;a.ystar=b.y+c;c=0;for(var d=g.list,e=d.length;c<e;c++){var f=d[c];if(!(a.ystar>f.ystar||a.ystar==f.ystar&&b.x>f.vertex.x))break}d.splice(c,
0,a)},del:function(a){for(var b=0,c=g.list,d=c.length;b<d&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===g.list.length},nextEvent:function(a){for(var b=0,c=g.list,d=c.length;b<d;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=g.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return g.list.shift()}};e.init();for(var d=c.shift(),m=c.shift(),p,r,h,l,v,k,x,n,A,q;;)if(g.empty()||(p=g.min()),m&&(g.empty()||m.y<p.y||m.y==p.y&&m.x<p.x))r=e.leftBound(m),h=e.right(r),
x=e.rightRegion(r),q=f.bisect(x,m),k=e.createHalfEdge(q,"l"),e.insert(r,k),(A=f.intersect(r,k))&&(g.del(r),g.insert(r,A,f.distance(A,m))),r=k,k=e.createHalfEdge(q,"r"),e.insert(r,k),(A=f.intersect(k,h))&&g.insert(k,A,f.distance(A,m)),m=c.shift();else if(g.empty())break;else r=g.extractMin(),l=e.left(r),h=e.right(r),v=e.right(h),x=e.leftRegion(r),k=e.rightRegion(h),A=r.vertex,f.endPoint(r.edge,r.side,A),f.endPoint(h.edge,h.side,A),e.del(r),g.del(h),e.del(h),r="l",x.y>k.y&&(n=x,x=k,k=n,r="r"),q=f.bisect(x,
k),k=e.createHalfEdge(q,r),e.insert(l,k),f.endPoint(q,vb[r],A),(A=f.intersect(l,k))&&(g.del(l),g.insert(l,A,f.distance(A,x))),(A=f.intersect(k,v))&&g.insert(k,A,f.distance(A,x));for(r=e.right(e.leftEnd);r!=e.rightEnd;r=e.right(r))b(r.edge)}function xa(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),m=.5*(d+f);b=b.nodes;b[0]&&xa(a,b[0],c,d,g,m);b[1]&&xa(a,b[1],g,d,e,m);b[2]&&xa(a,b[2],c,m,g,f);b[3]&&xa(a,b[3],g,m,e,f)}}function Wd(a){return{x:a[0],y:a[1]}}function ma(){this._=new Date(1<arguments.length?
Date.UTC.apply(this,arguments):arguments[0])}function Ta(a,b,c,d){for(var e,f=0,g=b.length,m=c.length;f<g;){if(d>=m)return-1;e=b.charCodeAt(f++);if(37==e){if(e=Xd[b.charAt(f++)],!e||0>(d=e(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function Hc(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Ic(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function wb(a){return a.toISOString()}function na(a,
b,c){function d(b){var c=a(b),e=f(c,1);return b-c<e-b?c:e}function e(c){return b(c=a(new V(c-1)),1),c}function f(a,c){return b(a=new V(+a),c),a}function g(a,d,f){a=e(a);var m=[];if(1<f)for(;a<d;)c(a)%f||m.push(new Date(+a)),b(a,1);else for(;a<d;)m.push(new Date(+a)),b(a,1);return m}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var m=a.utc=Ua(a);return m.floor=m,m.round=Ua(d),m.ceil=Ua(e),m.offset=Ua(f),m.range=function(a,b,c){try{V=ma;var d=new ma;return d._=a,g(d,b,c)}finally{V=Date}},a}function Ua(a){return function(b,
c){try{V=ma;var d=new ma;return d._=b,a(d,c)._}finally{V=Date}}}function xb(a,b,c){function d(b){return a(b)}return d.invert=function(b){return yb(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(yb)},d.nice=function(a){var b=Jc(d.domain());return d.domain([a.floor(b[0]),a.ceil(b[1])])},d.ticks=function(c,e){var f=Jc(d.domain());if("function"!=typeof c){var g=(f[1]-f[0])/c,m=d3.bisect(Va,g);if(m==Va.length)return b.year(f,c);if(!m)return a.ticks(c).map(yb);
Math.log(g/Va[m-1])<Math.log(Va[m]/g)&&--m;c=b[m];e=c[1];c=c[0].range}return c(f[0],new Date(+f[1]+1),e)},d.tickFormat=function(){return c},d.copy=function(){return xb(a.copy(),b,c)},d3.rebind(d,a,"range","rangeRound","interpolate","clamp")}function Jc(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function yb(a){return new Date(a)}function Kc(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function zb(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function Yd(a){var b=
a.getFullYear(),c=zb(b),d=zb(b+1);return b+(a-c)/(d-c)}function Ab(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function Zd(a){var b=a.getUTCFullYear(),c=Ab(b),d=Ab(b+1);return b+(a-c)/(d-c)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(Fe){var Lc=CSSStyleDeclaration.prototype,$d=Lc.setProperty;Lc.setProperty=function(a,b,c){$d.call(this,a,b+"",c)}}d3={version:"2.9.6"};var ya=function(a){return Array.prototype.slice.call(a)};
try{ya(document.documentElement.childNodes)[0].nodeType}catch(Ge){ya=a}var $a=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};d3.map=function(a){var c=new b,d;for(d in a)c.set(d,a[d]);return c};(function(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}})(b,{has:function(a){return za+a in this},get:function(a){return this[za+a]},set:function(a,b){return this[za+a]=b},remove:function(a){return a=za+a,a in
this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===ae&&a.call(this,b.substring(1),this[b])}});var za="\x00",ae=za.charCodeAt(0);d3.functor=f;d3.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=g(a,b,b[e]);
return a};d3.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};d3.mean=function(a,b){var c=a.length,d,e=0,f=-1,g=0;if(1===arguments.length)for(;++f<c;)h(d=a[f])&&(e+=(d-e)/++g);else for(;++f<c;)h(d=b.call(a,a[f],f))&&(e+=(d-e)/++g);return g?e:void 0};d3.median=function(a,b){return 1<arguments.length&&(a=a.map(b)),a=a.filter(h),a.length?d3.quantile(a.sort(d3.ascending),.5):void 0};d3.min=function(a,b){var c=-1,d=a.length,e,f;if(1===
arguments.length){for(;++c<d&&(null==(e=a[c])||e!=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<d&&(null==(e=b.call(a,a[c],c))||e!=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e};d3.max=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d&&(null==(e=a[c])||e!=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d&&(null==(e=b.call(a,a[c],c))||e!=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e};
d3.extent=function(a,b){var c=-1,d=a.length,e,f,g;if(1===arguments.length){for(;++c<d&&(null==(e=g=a[c])||e!=e);)e=g=void 0;for(;++c<d;)null!=(f=a[c])&&(e>f&&(e=f),g<f&&(g=f))}else{for(;++c<d&&(null==(e=g=b.call(a,a[c],c))||e!=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),g<f&&(g=f))}return[e,g]};d3.random={normal:function(a,b){return 2>arguments.length&&(b=1),1>arguments.length&&(a=0),function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+
b*c*Math.sqrt(-2*Math.log(d)/d)}}};d3.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=+a[f])||(c+=e);else for(;++f<d;)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c};d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=a[d-1];return(c-=d)?e+c*(a[d]-e):e};d3.transpose=function(a){return d3.zip.apply(d3,a)};d3.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=d3.min(arguments,l),c=Array(b);++a<b;)for(var d=-1,e,f=c[a]=Array(e);++d<e;)f[d]=
arguments[d][a];return c};d3.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);d<e;){var f=d+e>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);d<e;){var f=d+e>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var Mc=d3.bisector(function(a){return a});d3.bisectLeft=Mc.left;d3.bisect=d3.bisectRight=Mc.right;d3.first=function(a,b){var c=0,d=a.length,e=a[0],f;for(1===
arguments.length&&(b=d3.ascending);++c<d;)0<b.call(a,e,f=a[c])&&(e=f);return e};d3.last=function(a,b){var c=0,d=a.length,e=a[0],f;for(1===arguments.length&&(b=d3.ascending);++c<d;)0>=b.call(a,e,f=a[c])&&(e=f);return e};d3.nest=function(){function a(c,f){if(f>=e.length)return m?m.call(d,c):g?c.sort(g):c;for(var p=-1,r=c.length,h=e[f++],l,v,k=new b,x,O={};++p<r;)(x=k.get(l=h(v=c[p])))?x.push(v):k.set(l,[v]);return k.forEach(function(b){O[b]=a(k.get(b),f)}),O}function c(a,b){if(b>=e.length)return a;
var d=[],g=f[b++],m;for(m in a)d.push({key:m,values:c(a[m],b)});return g&&d.sort(function(a,b){return g(a.key,b.key)}),d}var d={},e=[],f=[],g,m;return d.map=function(b){return a(b,0)},d.entries=function(b){return c(a(b,0),0)},d.key=function(a){return e.push(a),d},d.sortKeys=function(a){return f[e.length-1]=a,d},d.sortValues=function(a){return g=a,d},d.rollup=function(a){return m=a,d},d};d3.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};d3.values=function(a){var b=[],c;for(c in a)b.push(a[c]);
return b};d3.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};d3.permute=function(a,b){for(var c=[],d=-1,e=b.length;++d<e;)c[d]=a[b[d]];return c};d3.merge=function(a){return Array.prototype.concat.apply([],a)};d3.split=function(a,b){var c=[],d=[],e,f=-1,g=a.length;for(2>arguments.length&&(b=n);++f<g;)b.call(d,e=a[f],f)?d=[]:(d.length||c.push(d),d.push(e));return c};d3.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");
var d=[],e;e=Math.abs(c);for(var f=1;e*f%1;)f*=10;e=f;var f=-1,g;a*=e;b*=e;c*=e;if(0>c)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d};d3.requote=function(a){return a.replace(be,"\\$\x26")};var be=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};d3.xhr=function(a,b,c){var d=new XMLHttpRequest;3>arguments.length?(c=b,b=null):b&&d.overrideMimeType&&d.overrideMimeType(b);d.open("GET",a,!0);b&&d.setRequestHeader("Accept",
b);d.onreadystatechange=function(){if(4===d.readyState){var a=d.status;c(!a&&d.response||200<=a&&300>a||304===a?d:null)}};d.send(null)};d3.text=function(a,b,c){3>arguments.length&&(c=b,b=null);d3.xhr(a,b,function(a){c(a&&a.responseText)})};d3.json=function(a,b){d3.text(a,"application/json",function(a){b(a?JSON.parse(a):null)})};d3.html=function(a,b){d3.text(a,"text/html",function(a){if(null!=a){var c=document.createRange();c.selectNode(document.body);a=c.createContextualFragment(a)}b(a)})};d3.xml=
function(a,b,c){3>arguments.length&&(c=b,b=null);d3.xhr(a,b,function(a){c(a&&a.responseXML)})};var Bb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Bb,qualify:function(a){var b=a.indexOf(":"),c=a;return 0<=b&&(c=a.substring(0,b),a=a.substring(b+1)),Bb.hasOwnProperty(c)?{space:Bb[c],local:a}:a}};d3.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;++b<
c;)a[arguments[b]]=u(a);return a};t.prototype.on=function(a,b){var c=a.indexOf("."),d="";return 0<c&&(d=a.substring(c+1),a=a.substring(0,c)),2>arguments.length?this[a].on(d):this[a].on(d,b)};d3.format=function(a){a=ce.exec(a);var b=a[1]||" ",c=a[3]||"",d=a[5],e=+a[6],f=a[7],g=a[8],m=a[9],p=1,r="",h=!1;g&&(g=+g.substring(1));d&&(b="0",f&&(e-=Math.floor((e-1)/4)));switch(m){case "n":f=!0;m="g";break;case "%":p=100;r="%";m="f";break;case "p":p=100;r="%";m="r";break;case "d":h=!0;g=0;break;case "s":p=
-1,m="r"}return"r"==m&&!g&&(m="g"),m=de.get(m)||y,function(a){if(h&&a%1)return"";var K=0>a&&(a=-a)?"\u00e2\u02c6\u2019":c;if(0>p){var l=d3.formatPrefix(a,g);a=l.scale(a);r=l.symbol}else a*=p;a=m(a,g);d?(l=a.length+K.length,l<e&&(a=Array(e-l+1).join(b)+a),f&&(a=z(a)),a=K+a):(f&&(a=z(a)),a=K+a,l=a.length,l<e&&(a=Array(e-l+1).join(b)+a));return a+r}};var ce=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,de=d3.map({g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},
f:function(a,b){return a.toFixed(b)},r:function(a,b){return d3.round(a,b=w(a,b)).toFixed(Math.max(0,Math.min(20,b)))}}),ee="y z a f p n \u00ce\u00bc m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});d3.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=d3.round(a,w(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),
ee[8+c/3]};var fe=H(2),ge=H(3),Nc=function(){return F},he=d3.map({linear:Nc,poly:H,quad:function(){return fe},cubic:function(){return ge},sin:function(){return s},exp:function(){return G},circle:function(){return Q},elastic:function(a,b){var c;return 2>arguments.length&&(b=.45),1>arguments.length?(a=1,c=b/4):c=b/(2*Math.PI)*Math.asin(1/a),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Math.PI/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return J}}),
ie=d3.map({"in":F,out:k,"in-out":N,"out-in":function(a){return N(k(a))}});d3.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in";return c=he.get(c)||Nc,b=ie.get(b)||F,E(b(c.apply(null,Array.prototype.slice.call(arguments,1))))};d3.event=null;d3.interpolate=function(a,b){for(var c=d3.interpolators.length,d;0<=--c&&!(d=d3.interpolators[c](a,b)););return d};d3.interpolateNumber=function(a,b){return b-=a,function(c){return a+b*c}};d3.interpolateRound=function(a,
b){return b-=a,function(c){return Math.round(a+b*c)}};d3.interpolateString=function(a,b){var c,d,e=0,f=[],g=[],m,p;for(d=Wa.lastIndex=0;c=Wa.exec(b);++d)c.index&&f.push(b.substring(e,c.index)),g.push({i:f.length,x:c[0]}),f.push(null),e=Wa.lastIndex;e<b.length&&f.push(b.substring(e));d=0;for(m=g.length;(c=Wa.exec(a))&&d<m;++d)if(p=g[d],p.x==c[0]){if(p.i)if(null==f[p.i+1])for(f[p.i-1]+=p.x,f.splice(p.i,1),c=d+1;c<m;++c)g[c].i--;else for(f[p.i-1]+=p.x+f[p.i+1],f.splice(p.i,2),c=d+1;c<m;++c)g[c].i-=2;
else if(null==f[p.i+1])f[p.i]=p.x;else for(f[p.i]=p.x+f[p.i+1],f.splice(p.i+1,1),c=d+1;c<m;++c)g[c].i--;g.splice(d,1);m--;d--}else p.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(p.x));for(;d<m;)p=g.pop(),null==f[p.i+1]?f[p.i]=p.x:(f[p.i]=p.x+f[p.i+1],f.splice(p.i+1,1)),m--;return 1===f.length?null==f[0]?g[0].x:function(){return b}:function(a){for(d=0;d<m;++d)f[(p=g[d]).i]=p.x(a);return f.join("")}};d3.interpolateTransform=function(a,b){var c=[],d=[],e,f=d3.transform(a),g=d3.transform(b),m=f.translate,
p=g.translate,r=f.rotate,h=g.rotate,l=f.skew,v=g.skew,f=f.scale,g=g.scale;return m[0]!=p[0]||m[1]!=p[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:d3.interpolateNumber(m[0],p[0])},{i:3,x:d3.interpolateNumber(m[1],p[1])})):p[0]||p[1]?c.push("translate("+p+")"):c.push(""),r!=h?(180<r-h?h+=360:180<h-r&&(r+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(r,h)})):h&&c.push(c.pop()+"rotate("+h+")"),l!=v?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(l,
v)}):v&&c.push(c.pop()+"skewX("+v+")"),f[0]!=g[0]||f[1]!=g[1]?(e=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:e-4,x:d3.interpolateNumber(f[0],g[0])},{i:e-2,x:d3.interpolateNumber(f[1],g[1])})):(1!=g[0]||1!=g[1])&&c.push(c.pop()+"scale("+g+")"),e=d.length,function(a){for(var b=-1,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}};d3.interpolateRgb=function(a,b){a=d3.rgb(a);b=d3.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,p=b.b-e;return function(a){return"#"+m(Math.round(c+f*a))+m(Math.round(d+
g*a))+m(Math.round(e+p*a))}};d3.interpolateHsl=function(a,b){a=d3.hsl(a);b=d3.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,m=b.l-e;return 180<f?f-=360:-180>f&&(f+=360),function(a){return D(c+f*a,d+g*a,e+m*a).toString()}};d3.interpolateArray=function(a,b){var c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length),m;for(m=0;m<g;++m)c.push(d3.interpolate(a[m],b[m]));for(;m<e;++m)d[m]=a[m];for(;m<f;++m)d[m]=b[m];return function(a){for(m=0;m<g;++m)d[m]=c[m](a);return d}};d3.interpolateObject=function(a,
b){var c={},d={},e;for(e in a)e in b?c[e]=("transform"==e?d3.interpolateTransform:d3.interpolate)(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}};var Wa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return("string"==typeof a||"string"==typeof b)&&d3.interpolateString(a+"",b+"")},function(a,b){return("string"==typeof b?Ca.has(b)||
/^(#|rgb\(|hsl\()/.test(b):b instanceof U||b instanceof A)&&d3.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&d3.interpolateNumber(a,b)}];d3.rgb=function(a,b,c){return 1===arguments.length?a instanceof U?X(a.r,a.g,a.b):p(""+a,X,D):X(~~a,~~b,~~c)};U.prototype.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;return b||c||d?(b&&30>b&&(b=30),c&&30>c&&(c=30),d&&30>d&&(d=30),X(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,
Math.floor(d/a)))):X(30,30,30)};U.prototype.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),X(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};U.prototype.hsl=function(){return r(this.r,this.g,this.b)};U.prototype.toString=function(){return"#"+m(this.r)+m(this.g)+m(this.b)};var Ca=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",
blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",
darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",
ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",
magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",
palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",
tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Ca.forEach(function(a,b){Ca.set(a,p(b,X,D))});d3.hsl=function(a,b,c){return 1===arguments.length?a instanceof A?x(a.h,a.s,a.l):p(""+a,r,x):x(+a,+b,+c)};A.prototype.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),x(this.h,this.s,this.l/a)};A.prototype.darker=function(a){return a=Math.pow(.7,
arguments.length?a:1),x(this.h,this.s,a*this.l)};A.prototype.rgb=function(){return D(this.h,this.s,this.l)};A.prototype.toString=function(){return this.rgb().toString()};var Da=function(a,b){return b.querySelector(a)},Hb=function(a,b){return b.querySelectorAll(a)},pa=document.documentElement,je=pa.matchesSelector||pa.webkitMatchesSelector||pa.mozMatchesSelector||pa.msMatchesSelector||pa.oMatchesSelector,Ib=function(a,b){return je.call(a,b)};"function"==typeof Sizzle&&(Da=function(a,b){return Sizzle(a,
b)[0]||null},Hb=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},Ib=Sizzle.matchesSelector);var M=[];d3.selection=function(){return Aa};d3.selection.prototype=M;M.select=function(a){var b=[],c,d,e,f;"function"!=typeof a&&(a=Ba(a));for(var g=-1,m=this.length;++g<m;){b.push(c=[]);c.parentNode=(e=this[g]).parentNode;for(var p=-1,r=e.length;++p<r;)(f=e[p])?(c.push(d=a.call(f,f.__data__,p)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return P(b)};M.selectAll=function(a){var b=[],c,d;"function"!=
typeof a&&(a=qa(a));for(var e=-1,f=this.length;++e<f;)for(var g=this[e],m=-1,p=g.length;++m<p;)if(d=g[m])b.push(c=ya(a.call(d,d.__data__,m))),c.parentNode=d;return P(b)};M.attr=function(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function m(){var c=b.apply(this,arguments);
null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=d3.ns.qualify(a);if(2>arguments.length){var p=this.node();return a.local?p.getAttributeNS(a.space,a.local):p.getAttribute(a)}return this.each(null==b?a.local?d:c:"function"==typeof b?a.local?m:g:a.local?f:e)};M.classed=function(a,b){var c=q(a).split(" "),d=c.length,e=-1;if(1<arguments.length){for(;++e<d;)Fb.call(this,c[e],b);return this}for(;++e<d;)if(!Fb.call(this,c[e]))return!1;return!0};M.style=function(a,
b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return 3>arguments.length&&(c=""),2>arguments.length?window.getComputedStyle(this.node(),null).getPropertyValue(a):this.each(null==b?d:"function"==typeof b?f:e)};M.property=function(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:
this[a]=c}return 2>arguments.length?this.node()[a]:this.each(null==b?c:"function"==typeof b?e:d)};M.text=function(a){return 1>arguments.length?this.node().textContent:this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a})};M.html=function(a){return 1>arguments.length?this.node().innerHTML:this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==
b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a})};M.append=function(a){function b(){return this.appendChild(document.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}return a=d3.ns.qualify(a),this.select(a.local?c:b)};M.insert=function(a,b){function c(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),Da(b,this))}function d(){return this.insertBefore(document.createElementNS(a.space,
a.local),Da(b,this))}return a=d3.ns.qualify(a),this.select(a.local?d:c)};M.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};M.data=function(a,c){function d(a,e){var f,g=a.length,m=e.length,l=Math.min(g,m),v=Math.max(g,m),k=[],K=[],x=[],n,Z;if(c){var l=new b,v=[],A;Z=e.length;for(f=-1;++f<g;)A=c.call(n=a[f],n.__data__,f),l.has(A)?x[Z++]=n:l.set(A,n),v.push(A);for(f=-1;++f<m;)A=c.call(e,Z=e[f],f),l.has(A)?(k[f]=n=l.get(A),n.__data__=Z,K[f]=x[f]=null):(K[f]=
{__data__:Z},k[f]=x[f]=null),l.remove(A);for(f=-1;++f<g;)l.has(v[f])&&(x[f]=a[f])}else{for(f=-1;++f<l;)n=a[f],Z=e[f],n?(n.__data__=Z,k[f]=n,K[f]=x[f]=null):(K[f]={__data__:Z},k[f]=x[f]=null);for(;f<m;++f)K[f]={__data__:e[f]},k[f]=x[f]=null;for(;f<v;++f)x[f]=a[f],K[f]=k[f]=null}K.update=k;K.parentNode=k.parentNode=x.parentNode=a.parentNode;p.push(K);r.push(k);h.push(x)}var e=-1,f=this.length,g,m;if(!arguments.length){for(a=Array(f=(g=this[0]).length);++e<f;)if(m=g[e])a[e]=m.__data__;return a}var p=
Gb([]),r=P([]),h=P([]);if("function"==typeof a)for(;++e<f;)d(g=this[e],a.call(g,g.parentNode.__data__,e));else for(;++e<f;)d(g=this[e],a);return r.enter=function(){return p},r.exit=function(){return h},r};M.datum=M.map=function(a){return 1>arguments.length?this.property("__data__"):this.property("__data__",a)};M.filter=function(a){var b=[],c,d,e;"function"!=typeof a&&(a=Zc(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var m=0,p=d.length;m<p;m++)(e=d[m])&&
a.call(e,e.__data__,m)&&c.push(e)}return P(b)};M.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],f;0<=--d;)if(f=c[d])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};M.sort=function(a){a=$c.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};M.on=function(a,b,c){3>arguments.length&&(c=!1);var d="__on"+a,e=a.indexOf(".");return 0<e&&(a=a.substring(0,e)),2>arguments.length?(e=this.node()[d])&&e._:
this.each(function(e,f){function g(a){var c=d3.event;d3.event=a;try{b.call(m,m.__data__,f)}finally{d3.event=c}}var m=this,p=m[d];p&&(m.removeEventListener(a,p,p.$),delete m[d]);b&&(m.addEventListener(a,m[d]=g,g.$=c),g._=b)})};M.each=function(a){return ra(this,function(b,c,d){a.call(b,b.__data__,c,d)})};M.call=function(a){return a.apply(this,(arguments[0]=this,arguments)),this};M.empty=function(){return!this.node()};M.node=function(a){a=0;for(var b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<
e;d++){var f=c[d];if(f)return f}return null};M.transition=function(){for(var a=[],b,c,d=-1,e=this.length;++d<e;){a.push(b=[]);for(var f=this[d],g=-1,m=f.length;++g<m;)b.push((c=f[g])?{node:c,delay:Fa,duration:Ga}:null)}return Za(a,ia||++ke,Date.now())};var Aa=P([[document]]);Aa[0].parentNode=pa;d3.select=function(a){return"string"==typeof a?Aa.select(a):P([[a]])};d3.selectAll=function(a){return"string"==typeof a?Aa.selectAll(a):P([ya(a)])};var ha=[];d3.selection.enter=Gb;d3.selection.enter.prototype=
ha;ha.append=M.append;ha.insert=M.insert;ha.empty=M.empty;ha.node=M.node;ha.select=function(a){for(var b=[],c,d,e,f,g,m=-1,p=this.length;++m<p;){e=(f=this[m]).update;b.push(c=[]);c.parentNode=f.parentNode;for(var r=-1,h=f.length;++r<h;)(g=f[r])?(c.push(e[r]=d=a.call(f.parentNode,g.__data__,r)),d.__data__=g.__data__):c.push(null)}return P(b)};var sa={},Y=[],ke=0,ia=0,Fa=0,Ga=250,Ea=d3.ease("cubic-in-out");Y.call=M.call;d3.transition=function(a){return arguments.length?ia?a.transition():a:Aa.transition()};
d3.transition.prototype=Y;Y.select=function(a){var b=[],c,d,e;"function"!=typeof a&&(a=Ba(a));for(var f=-1,g=this.length;++f<g;){b.push(c=[]);for(var m=this[f],p=-1,r=m.length;++p<r;)(e=m[p])&&(d=a.call(e.node,e.node.__data__,p))?("__data__"in e.node&&(d.__data__=e.node.__data__),c.push({node:d,delay:e.delay,duration:e.duration})):c.push(null)}return Za(b,this.id,this.time).ease(this.ease())};Y.selectAll=function(a){var b=[],c,d,e;"function"!=typeof a&&(a=qa(a));for(var f=-1,g=this.length;++f<g;)for(var m=
this[f],p=-1,r=m.length;++p<r;)if(e=m[p]){d=a.call(e.node,e.node.__data__,p);b.push(c=[]);for(var h=-1,l=d.length;++h<l;)c.push({node:d[h],delay:e.delay,duration:e.duration})}return Za(b,this.id,this.time).ease(this.ease())};Y.attr=function(a,b){return this.attrTween(a,Jb(a,b))};Y.attrTween=function(a,b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f===sa?(this.removeAttribute(e),null):f&&function(a){this.setAttribute(e,f(a))}}function d(a,c){var f=b.call(this,a,c,this.getAttributeNS(e.space,
e.local));return f===sa?(this.removeAttributeNS(e.space,e.local),null):f&&function(a){this.setAttributeNS(e.space,e.local,f(a))}}var e=d3.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};Y.style=function(a,b,c){return 3>arguments.length&&(c=""),this.styleTween(a,Jb(a,b),c)};Y.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,window.getComputedStyle(this,null).getPropertyValue(a));return f===sa?(this.style.removeProperty(a),
null):f&&function(b){this.style.setProperty(a,f(b),c)}})};Y.text=function(a){return this.tween("text",function(b,c){this.textContent="function"==typeof a?a.call(this,b,c):a})};Y.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};Y.delay=function(a){return ra(this,"function"==typeof a?function(b,c,d){b.delay=a.call(b=b.node,b.__data__,c,d)|0}:(a|=0,function(b){b.delay=a}))};Y.duration=function(a){return ra(this,"function"==
typeof a?function(b,c,d){b.duration=Math.max(1,a.call(b=b.node,b.__data__,c,d)|0)}:(a=Math.max(1,a|0),function(b){b.duration=a}))};Y.transition=function(){return this.select(d)};var ja=null,Ia,Ha;d3.timer=function(a,b,c){var d=!1,e=ja;if(3>arguments.length){if(2>arguments.length)b=0;else if(!isFinite(b))return;c=Date.now()}for(;e;){if(e.callback===a){e.then=c;e.delay=b;d=!0;break}e=e.next}d||(ja={callback:a,then:c,delay:b,next:ja});Ia||(Ha=clearTimeout(Ha),Ia=1,Lb(ab))};d3.timer.flush=function(){for(var a,
b=Date.now(),c=ja;c;)a=b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;Kb()};var Lb=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.transform=function(a){var b=document.createElementNS(d3.ns.prefix.svg,"g"),c={a:1,b:0,c:0,d:1,e:0,f:0};return(d3.transform=function(a){b.setAttribute("transform",a);a=b.transform.baseVal.consolidate();return new Mb(a?a.matrix:
c)})(a)};Mb.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ob=180/Math.PI;d3.mouse=function(a){return Pb(a,C())};var bb=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,b){return 2>arguments.length&&(b=C().touches),b?ya(b).map(function(b){var c=Pb(a,b);return c.identifier=b.identifier,c}):[]};d3.scale={};d3.scale.linear=function(){return Qb([0,1],[0,1],d3.interpolate,!1)};d3.scale.log=function(){return Ub(d3.scale.linear(),
fb)};var hd=d3.format(".0e");fb.pow=function(a){return Math.pow(10,a)};Ka.pow=function(a){return-Math.pow(10,-a)};d3.scale.pow=function(){return Vb(d3.scale.linear(),1)};d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)};d3.scale.ordinal=function(){return Wb([],{t:"range",x:[]})};d3.scale.category10=function(){return d3.scale.ordinal().range(le)};d3.scale.category20=function(){return d3.scale.ordinal().range(me)};d3.scale.category20b=function(){return d3.scale.ordinal().range(ne)};d3.scale.category20c=
function(){return d3.scale.ordinal().range(oe)};var le="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),me="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),ne="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),oe=
"#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");d3.scale.quantile=function(){return Xb([],[])};d3.scale.quantize=function(){return Yb(0,1,[0,1])};d3.scale.identity=function(){return Zb([0,1])};d3.svg={};d3.svg.arc=function(){function a(){var f=b.apply(this,arguments),g=c.apply(this,arguments),m=d.apply(this,arguments)+ka,p=e.apply(this,arguments)+ka,r=(p<m&&(r=m,m=p,p=r),p-
m),h=r<Math.PI?"0":"1",l=Math.cos(m),m=Math.sin(m),v=Math.cos(p),p=Math.sin(p);return r>=pe?f?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":f?"M"+g*l+","+g*m+"A"+g+","+g+" 0 "+h+",1 "+g*v+","+g*p+"L"+f*v+","+f*p+"A"+f+","+f+" 0 "+h+",0 "+f*l+","+f*m+"Z":"M"+g*l+","+g*m+"A"+g+","+g+" 0 "+h+",1 "+g*v+","+g*p+"L0,0Z"}var b=id,c=jd,d=$b,e=ac;return a.innerRadius=
function(c){return arguments.length?(b=f(c),a):b},a.outerRadius=function(b){return arguments.length?(c=f(b),a):c},a.startAngle=function(b){return arguments.length?(d=f(b),a):d},a.endAngle=function(b){return arguments.length?(e=f(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+ka;return[Math.cos(f)*a,Math.sin(f)*a]},a};var ka=-Math.PI/2,pe=2*Math.PI-1E-6;d3.svg.line=function(){return bc(c)};var Ma="linear",
Na=d3.map({linear:aa,"step-before":hb,"step-after":ib,basis:dc,"basis-open":function(a){if(4>a.length)return aa(a);for(var b=[],c=-1,d=a.length,e,f=[0],g=[0];3>++c;)e=a[c],f.push(e[0]),g.push(e[1]);b.push(ca(oa,f)+","+ca(oa,g));for(--c;++c<d;)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),ua(b,f,g);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,f,g=[],m=[];4>++c;)f=a[c%d],g.push(f[0]),m.push(f[1]);b=[ca(oa,g),",",ca(oa,m)];for(--c;++c<e;)f=a[c%d],g.shift(),g.push(f[0]),
m.shift(),m.push(f[1]),ua(b,g,m);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,m=-1,p,r;++m<=c;)p=a[m],r=m/c,p[0]=b*p[0]+(1-b)*(d+r*f),p[1]=b*p[1]+(1-b)*(e+r*g);return dc(a)},cardinal:function(a,b,c){return 3>a.length?aa(a):a[0]+Oa(a,jb(a,b))},"cardinal-open":function(a,b){return 4>a.length?aa(a):a[1]+Oa(a.slice(1,a.length-1),jb(a,b))},"cardinal-closed":function(a,b){return 3>a.length?aa(a):a[0]+Oa((a.push(a[0]),a),jb([a[a.length-
2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=aa(a);else{var b=a[0],c=[],d,e,f,g,m;d=0;m=a.length-1;for(var p=[],r=a[1],h=p[0]=kb(a[0],r);++d<m;)p[d]=h+(h=kb(r,r=a[d+1]));m=(p[d]=h,p);p=-1;for(r=a.length-1;++p<r;)d=kb(a[p],a[p+1]),1E-6>Math.abs(d)?m[p]=m[p+1]=0:(e=m[p]/d,f=m[p+1]/d,g=e*e+f*f,9<g&&(g=3*d/Math.sqrt(g),m[p]=g*e,m[p+1]=g*f));for(p=-1;++p<=r;)g=(a[Math.min(r,p+1)][0]-a[Math.max(0,p-1)][0])/(6*(1+m[p]*m[p])),c.push([g||0,m[p]*g||0]);a=b+Oa(a,c)}return a}}),ec=[0,2/3,1/
3,0],fc=[0,1/3,2/3,0],oa=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=bc(gc);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};hb.reverse=ib;ib.reverse=hb;d3.svg.area=function(){return hc(Object)};d3.svg.area.radial=function(){var a=hc(gc);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};d3.svg.chord=function(){function a(f,g){var m=b(this,d,f,g),p=b(this,e,
f,g);return"M"+m.p0+c(m.r,m.p1,m.a1-m.a0)+(m.a0==p.a0&&m.a1==p.a1?"Q 0,0 "+m.p0:"Q 0,0 "+p.p0+c(p.r,p.p1,p.a1-p.a0)+("Q 0,0 "+m.p0))+"Z"}function b(a,c,d,e){var f=c.call(a,d,e);c=g.call(a,f,e);d=m.call(a,f,e)+ka;a=p.call(a,f,e)+ka;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>Math.PI)+",1 "+b}var d=ic,e=jc,g=kd,m=$b,p=ac;return a.radius=function(b){return arguments.length?(g=f(b),a):g},a.source=function(b){return arguments.length?
(d=f(b),a):d},a.target=function(b){return arguments.length?(e=f(b),a):e},a.startAngle=function(b){return arguments.length?(m=f(b),a):m},a.endAngle=function(b){return arguments.length?(p=f(b),a):p},a};d3.svg.diagonal=function(){function a(e,f){var g=b.call(this,e,f),m=c.call(this,e,f),p=(g.y+m.y)/2,g=[g,{x:g.x,y:p},{x:m.x,y:p},m];return g=g.map(d),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=ic,c=jc,d=kc;return a.source=function(c){return arguments.length?(b=f(c),a):b},a.target=function(b){return arguments.length?
(c=f(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a};d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=kc,c=a.projection;return a.projection=function(a){return arguments.length?c(ld(b=a)):b},a};d3.svg.mouse=d3.mouse;d3.svg.touches=d3.touches;d3.svg.symbol=function(){function a(d,e){return(Oc.get(b.call(this,d,e))||lc)(c.call(this,d,e))}var b=nd,c=md;return a.type=function(c){return arguments.length?(b=f(c),a):b},a.size=function(b){return arguments.length?(c=f(b),
a):c},a};var Oc=d3.map({circle:lc,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Pc));var b=a*Pc;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Xa);var b=a*Xa/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=
Math.sqrt(a/Xa);var b=a*Xa/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});d3.svg.symbolTypes=Oc.keys();var Xa=Math.sqrt(3),Pc=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function a(l){l.each(function(){var a=d3.select(this),l=null==p?b.ticks?b.ticks.apply(b,m):b.domain():p,v=null==r?b.tickFormat?b.tickFormat.apply(b,m):String:r,k=od(b,l,h),x=a.selectAll(".minor").data(k,String),k=x.enter().insert("line","g").attr("class","tick minor").style("opacity",1E-6),n=d3.transition(x.exit()).style("opacity",
1E-6).remove(),x=d3.transition(x).style("opacity",1),K=a.selectAll("g").data(l,String),l=K.enter().insert("g","path").style("opacity",1E-6),A=d3.transition(K.exit()).style("opacity",1E-6).remove(),q=d3.transition(K).style("opacity",1),D,t=Ja(b),a=a.selectAll(".domain").data([0]);a.enter().append("path").attr("class","domain");var a=d3.transition(a),fa=b.copy(),s=this.__chart__||fa;this.__chart__=fa;l.append("line").attr("class","tick");l.append("text");var u=l.select("line"),P=q.select("line"),v=
K.select("text").text(v),K=l.select("text"),w=q.select("text");switch(c){case "bottom":D=mc;k.attr("y2",e);x.attr("x2",0).attr("y2",e);u.attr("y2",d);K.attr("y",Math.max(d,0)+g);P.attr("x2",0).attr("y2",d);w.attr("x",0).attr("y",Math.max(d,0)+g);v.attr("dy",".71em").attr("text-anchor","middle");a.attr("d","M"+t[0]+","+f+"V0H"+t[1]+"V"+f);break;case "top":D=mc;k.attr("y2",-e);x.attr("x2",0).attr("y2",-e);u.attr("y2",-d);K.attr("y",-(Math.max(d,0)+g));P.attr("x2",0).attr("y2",-d);w.attr("x",0).attr("y",
-(Math.max(d,0)+g));v.attr("dy","0em").attr("text-anchor","middle");a.attr("d","M"+t[0]+","+-f+"V0H"+t[1]+"V"+-f);break;case "left":D=nc;k.attr("x2",-e);x.attr("x2",-e).attr("y2",0);u.attr("x2",-d);K.attr("x",-(Math.max(d,0)+g));P.attr("x2",-d).attr("y2",0);w.attr("x",-(Math.max(d,0)+g)).attr("y",0);v.attr("dy",".32em").attr("text-anchor","end");a.attr("d","M"+-f+","+t[0]+"H0V"+t[1]+"H"+-f);break;case "right":D=nc,k.attr("x2",e),x.attr("x2",e).attr("y2",0),u.attr("x2",d),K.attr("x",Math.max(d,0)+
g),P.attr("x2",d).attr("y2",0),w.attr("x",Math.max(d,0)+g).attr("y",0),v.attr("dy",".32em").attr("text-anchor","start"),a.attr("d","M"+f+","+t[0]+"H0V"+t[1]+"H"+f)}if(b.ticks)l.call(D,s),q.call(D,fa),A.call(D,fa),k.call(D,s),x.call(D,fa),n.call(D,fa);else{var y=fa.rangeBand()/2,k=function(a){return fa(a)+y};l.call(D,k);q.call(D,k)}})}var b=d3.scale.linear(),c="bottom",d=6,e=6,f=6,g=3,m=[10],p=null,r,h=0;return a.scale=function(c){return arguments.length?(b=c,a):b},a.orient=function(b){return arguments.length?
(c=b,a):c},a.ticks=function(){return arguments.length?(m=arguments,a):m},a.tickValues=function(b){return arguments.length?(p=b,a):p},a.tickFormat=function(b){return arguments.length?(r=b,a):r},a.tickSize=function(b,c,g){if(!arguments.length)return d;var m=arguments.length-1;return d=+b,e=1<m?+c:d,f=0<m?+arguments[m]:d,a},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(b){return arguments.length?(h=+b,a):h},a};d3.svg.brush=function(){function a(f){f.each(function(){var f=
d3.select(this),r=f.selectAll(".background").data([0]),h=f.selectAll(".extent").data([0]),l=f.selectAll(".resize").data(p,String),v;f.style("pointer-events","all").on("mousedown.brush",e).on("touchstart.brush",e);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");h.enter().append("rect").attr("class","extent").style("cursor","move");l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return qe[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",a.empty()?"none":null);l.exit().remove();g&&(v=Ja(g),r.attr("x",v[0]).attr("width",v[1]-v[0]),c(f));m&&(v=Ja(m),r.attr("y",v[0]).attr("height",v[1]-v[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+r[+/e$/.test(a)][0]+","+r[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",
r[0][0]);a.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",r[1][0]-r[0][0])}function d(a){a.select(".extent").attr("y",r[0][1]);a.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",r[1][1]-r[0][1])}function e(){function p(){var a=d3.event.changedTouches;return a?d3.touches(x,a)[0]:d3.mouse(x)}function l(){var a=p(),e=!1;P&&(a[0]+=P[0],a[1]+=P[1]);s||(d3.event.altKey?(da||(da=[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]),u[0]=r[+(a[0]<da[0])][0],u[1]=r[+(a[1]<da[1])][1]):da=null);t&&v(a,
g,0)&&(c(q),e=!0);ad&&v(a,m,1)&&(d(q),e=!0);e&&(b(q),A({type:"brush",mode:s?"move":"resize"}))}function v(a,b,c){var d=Ja(b);b=d[0];var d=d[1],e=u[c],f=r[1][c]-r[0][c],g;s&&(b-=e,d-=f+e);a=Math.max(b,Math.min(d,a[c]));s?g=(a+=e)+f:(da&&(e=Math.max(b,Math.min(d,2*da[c]-a))),e<a?(g=a,a=e):g=e);if(r[0][c]!==a||r[1][c]!==g)return h=null,r[0][c]=a,r[1][c]=g,!0}function k(){l();q.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);d3.select("body").style("cursor",null);
w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);A({type:"brushend"});B()}var x=this,n=d3.select(d3.event.target),A=f.of(x,arguments),q=d3.select(x),D=n.datum(),t=!/^(n|s)$/.test(D)&&g,ad=!/^(e|w)$/.test(D)&&m,s=n.classed("extent"),da,u=p(),P,w=d3.select(window).on("mousemove.brush",l).on("mouseup.brush",k).on("touchmove.brush",l).on("touchend.brush",k).on("keydown.brush",function(){32==d3.event.keyCode&&
(s||(da=null,u[0]-=r[1][0],u[1]-=r[1][1],s=2),B())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==s&&(u[0]+=r[1][0],u[1]+=r[1][1],s=0,B())});if(s)u[0]=r[0][0]-u[0],u[1]=r[0][1]-u[1];else if(D){var y=+/w$/.test(D),D=+/^n/.test(D);P=[r[1-y][0]-u[0],r[1-D][1]-u[1]];u[0]=r[y][0];u[1]=r[D][1]}else d3.event.altKey&&(da=u.slice());q.style("pointer-events","none").selectAll(".resize").style("display",null);d3.select("body").style("cursor",n.style("cursor"));A({type:"brushstart"});l();B()}var f=T(a,
"brushstart","brush","brushend"),g=null,m=null,p=Cb[0],r=[[0,0],[0,0]],h;return a.x=function(b){return arguments.length?(g=b,p=Cb[!g<<1|!m],a):g},a.y=function(b){return arguments.length?(m=b,p=Cb[!g<<1|!m],a):m},a.extent=function(b){var c,d,e,f,p;return arguments.length?(h=[[0,0],[0,0]],g&&(c=b[0],d=b[1],m&&(c=c[0],d=d[0]),h[0][0]=c,h[1][0]=d,g.invert&&(c=g(c),d=g(d)),d<c&&(p=c,c=d,d=p),r[0][0]=c|0,r[1][0]=d|0),m&&(e=b[0],f=b[1],g&&(e=e[1],f=f[1]),h[0][1]=e,h[1][1]=f,m.invert&&(e=m(e),f=m(f)),f<e&&
(p=e,e=f,f=p),r[0][1]=e|0,r[1][1]=f|0),a):(b=h||r,g&&(c=b[0][0],d=b[1][0],h||(c=r[0][0],d=r[1][0],g.invert&&(c=g.invert(c),d=g.invert(d)),d<c&&(p=c,c=d,d=p))),m&&(e=b[0][1],f=b[1][1],h||(e=r[0][1],f=r[1][1],m.invert&&(e=m.invert(e),f=m.invert(f)),f<e&&(p=e,e=f,f=p))),g&&m?[[c,e],[d,f]]:g?[c,d]:m&&[e,f])},a.clear=function(){return h=null,r[0][0]=r[0][1]=r[1][0]=r[1][1]=0,a},a.empty=function(){return g&&r[0][0]===r[1][0]||m&&r[0][1]===r[1][1]},d3.rebind(a,f,"on")};var qe={n:"ns-resize",e:"ew-resize",
s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Cb=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]];d3.behavior={};d3.behavior.drag=function(){function a(){this.on("mousedown.drag",b).on("touchstart.drag",b)}function b(){function a(){var b=m.parentNode,c=d3.event.changedTouches;return c?d3.touches(b,c)[0]:d3.mouse(b)}function e(){if(!m.parentNode)return f();var b=a(),c=b[0]-l[0],d=b[1]-l[1];v=v|c|d;l=b;B();p({type:"drag",x:b[0]+h[0],y:b[1]+
h[1],dx:c,dy:d})}function f(){p({type:"dragend"});v&&(B(),d3.event.target===r&&k.on("click.drag",g,!0));k.on("mousemove.drag",null).on("touchmove.drag",null).on("mouseup.drag",null).on("touchend.drag",null)}function g(){B();k.on("click.drag",null)}var m=this,p=c.of(m,arguments),r=d3.event.target,h,l=a(),v=0,k=d3.select(window).on("mousemove.drag",e).on("touchmove.drag",e).on("mouseup.drag",f,!0).on("touchend.drag",f,!0);d?(h=d.apply(m,arguments),h=[h.x-l[0],h.y-l[1]]):h=[0,0];B();p({type:"dragstart"})}
var c=T(a,"drag","dragstart","dragend"),d=null;return a.origin=function(b){return arguments.length?(d=b,a):d},d3.rebind(a,c,"on")};d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",f).on("mousewheel.zoom",g).on("mousemove.zoom",m).on("DOMMouseScroll.zoom",g).on("dblclick.zoom",p).on("touchstart.zoom",r).on("touchmove.zoom",h).on("touchend.zoom",r)}function b(a){return[(a[0]-l[0])/k,(a[1]-l[1])/k]}function c(a){k=Math.max(n[0],Math.min(n[1],a))}function d(a,b){b=[b[0]*k+l[0],b[1]*k+
l[1]];l[0]+=a[0]-b[0];l[1]+=a[1]-b[1]}function e(a){D&&D.domain(q.range().map(function(a){return(a-l[0])/k}).map(q.invert));s&&s.domain(t.range().map(function(a){return(a-l[1])/k}).map(t.invert));d3.event.preventDefault();a({type:"zoom",scale:k,translate:l})}function f(){function a(){B();r.on("click.zoom",null)}var c=this,g=A.of(c,arguments),m=d3.event.target,p=0,r=d3.select(window).on("mousemove.zoom",function(){p=1;d(d3.mouse(c),h);e(g)}).on("mouseup.zoom",function(){p&&B();r.on("mousemove.zoom",
null).on("mouseup.zoom",null);p&&d3.event.target===m&&r.on("click.zoom",a,!0)}),h=b(d3.mouse(c));window.focus();B()}function g(){v||(v=b(d3.mouse(this)));c(Math.pow(2,.002*pd())*k);d(d3.mouse(this),v);e(A.of(this,arguments))}function m(){v=null}function p(){var a=d3.mouse(this),f=b(a);c(d3.event.shiftKey?k/2:2*k);d(a,f);e(A.of(this,arguments))}function r(){var a=d3.touches(this),f=Date.now();x=k;v={};a.forEach(function(a){v[a.identifier]=b(a)});B();if(1===a.length&&500>f-u){var g=a[0],a=b(a[0]);c(2*
k);d(g,a);e(A.of(this,arguments))}u=f}function h(){var a=d3.touches(this),b=a[0],f=v[b.identifier];if(a=a[1]){var g=v[a.identifier],b=[(b[0]+a[0])/2,(b[1]+a[1])/2],f=[(f[0]+g[0])/2,(f[1]+g[1])/2];c(d3.event.scale*x)}d(b,f);e(A.of(this,arguments))}var l=[0,0],v,k=1,x,n=Qc,A=T(a,"zoom"),q,D,t,s,u;return a.translate=function(b){return arguments.length?(l=b.map(Number),a):l},a.scale=function(b){return arguments.length?(k=+b,a):k},a.scaleExtent=function(b){return arguments.length?(n=null==b?Qc:b.map(Number),
a):n},a.x=function(b){return arguments.length?(D=b,q=b.copy(),a):D},a.y=function(b){return arguments.length?(s=b,t=b.copy(),a):s},d3.rebind(a,A,"on")};var va,Qc=[0,Infinity];d3.layout={};d3.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(qd(a[c]));return b}};d3.layout.chord=function(){function a(){var c={},l=[],v=d3.range(g),k=[],x,n,K,A,q;d=[];e=[];x=0;for(A=-1;++A<g;){n=0;for(q=-1;++q<g;)n+=f[A][q];l.push(n);k.push(d3.range(g));x+=n}p&&v.sort(function(a,b){return p(l[a],
l[b])});r&&k.forEach(function(a,b){a.sort(function(a,c){return r(f[b][a],f[b][c])})});x=(2*Math.PI-m*g)/x;n=0;for(A=-1;++A<g;){K=n;for(q=-1;++q<g;){var D=v[A],Z=k[D][q],t=f[D][Z],s=n,u=n+=t*x;c[D+"-"+Z]={index:D,subindex:Z,startAngle:s,endAngle:u,value:t}}e[D]={index:D,startAngle:K,endAngle:n,value:(n-K)/x};n+=m}for(A=-1;++A<g;)for(q=A-1;++q<g;)v=c[A+"-"+q],k=c[q+"-"+A],(v.value||k.value)&&d.push(v.value<k.value?{source:k,target:v}:{source:v,target:k});h&&b()}function b(){d.sort(function(a,b){return h((a.source.value+
a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,f,g,m=0,p,r,h;return c.matrix=function(a){return arguments.length?(g=(f=a)&&f.length,d=e=null,c):f},c.padding=function(a){return arguments.length?(m=a,d=e=null,c):m},c.sortGroups=function(a){return arguments.length?(p=a,d=e=null,c):p},c.sortSubgroups=function(a){return arguments.length?(r=a,d=null,c):r},c.sortChords=function(a){return arguments.length?(h=a,d&&b(),c):h},c.chords=function(){return d||a(),d},c.groups=function(){return e||
a(),e},c};d3.layout.force=function(){function a(b){return function(a,c,d,e,f){if(a.point!==b){d=a.cx-b.x;f=a.cy-b.y;var g=1/Math.sqrt(d*d+f*f);if((e-c)*g<x)return c=a.charge*g*g,b.px-=d*c,b.py-=f*c,!0;a.point&&isFinite(g)&&(c=a.pointCharge*g*g,b.px-=d*c,b.py-=f*c)}return!a.charge}}function b(a){pc(la=a);lb=d}var d={},e=d3.dispatch("start","tick","end"),g=[1,1],m,p,r=.9,h=ud,l=vd,v=-30,k=.1,x=.8,n=[],A=[],q,D,t;return d.tick=function(){if(.005>(p*=.99))return e.end({type:"end",alpha:p=0}),!0;var b=
n.length,c=A.length,d,f,m,h,l,x,O;for(d=0;d<c;++d)if(f=A[d],m=f.source,h=f.target,x=h.x-m.x,O=h.y-m.y,l=x*x+O*O)l=p*D[d]*((l=Math.sqrt(l))-q[d])/l,x*=l,O*=l,h.x-=x*(l=m.weight/(h.weight+m.weight)),h.y-=O*l,m.x+=x*(l=1-l),m.y+=O*l;if(l=p*k)if(x=g[0]/2,O=g[1]/2,d=-1,l)for(;++d<b;)f=n[d],f.x+=(x-f.x)*l,f.y+=(O-f.y)*l;if(v)for(qc(c=d3.geom.quadtree(n),p,t),d=-1;++d<b;)(f=n[d]).fixed||c.visit(a(f));for(d=-1;++d<b;)f=n[d],f.fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*r,f.y-=(f.py-(f.py=f.y))*r);e.tick({type:"tick",
alpha:p})},d.nodes=function(a){return arguments.length?(n=a,d):n},d.links=function(a){return arguments.length?(A=a,d):A},d.size=function(a){return arguments.length?(g=a,d):g},d.linkDistance=function(a){return arguments.length?(h=f(a),d):h},d.distance=d.linkDistance,d.linkStrength=function(a){return arguments.length?(l=f(a),d):l},d.friction=function(a){return arguments.length?(r=a,d):r},d.charge=function(a){return arguments.length?(v="function"==typeof a?a:+a,d):v},d.gravity=function(a){return arguments.length?
(k=a,d):k},d.theta=function(a){return arguments.length?(x=a,d):x},d.alpha=function(a){return arguments.length?(p?0<a?p=a:p=0:0<a&&(e.start({type:"start",alpha:p=a}),d3.timer(d.tick)),d):p},d.start=function(){function a(d,g){var m;if(!r){r=[];for(c=0;c<e;++c)r[c]=[];for(c=0;c<f;++c)m=A[c],r[m.source.index].push(m.target),r[m.target.index].push(m.source)}m=r[b];for(var p=-1,h=m.length,l;++p<h;)if(!isNaN(l=m[p][d]))return l;return Math.random()*g}var b,c,e=n.length,f=A.length,m=g[0],p=g[1],r,k;for(b=
0;b<e;++b)(k=n[b]).index=b,k.weight=0;q=[];D=[];for(b=0;b<f;++b)k=A[b],"number"==typeof k.source&&(k.source=n[k.source]),"number"==typeof k.target&&(k.target=n[k.target]),q[b]=h.call(this,k,b),D[b]=l.call(this,k,b),++k.source.weight,++k.target.weight;for(b=0;b<e;++b)k=n[b],isNaN(k.x)&&(k.x=a("x",m)),isNaN(k.y)&&(k.y=a("y",p)),isNaN(k.px)&&(k.px=k.x),isNaN(k.py)&&(k.py=k.y);t=[];if("function"==typeof v)for(b=0;b<e;++b)t[b]=+v.call(this,n[b],b);else for(b=0;b<e;++b)t[b]=v;return d.resume()},d.resume=
function(){return d.alpha(.1)},d.stop=function(){return d.alpha(0)},d.drag=function(){m||(m=d3.behavior.drag().origin(c).on("dragstart",b).on("drag",td).on("dragend",sd));this.on("mouseover.force",pc).on("mouseout.force",rd).call(m)},d3.rebind(d,e,"on")};var lb,la;d3.layout.partition=function(){function a(b,c,d,e){var f=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(f&&(m=f.length)){var g=-1,m,p;for(d=b.value?d/b.value:0;++g<m;)a(p=f[g],c,b=p.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&
(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(f,g){var m=d.call(this,f,g);return a(m[0],0,e[0],e[1]/b(m[0])),m}var d=d3.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},wa(c,d)};d3.layout.pie=function(){function a(f,g){var m=f.map(function(c,d){return+b.call(a,c,d)}),p=+("function"==typeof d?d.apply(this,arguments):d),r=(("function"==typeof e?e.apply(this,arguments):e)-d)/d3.sum(m),h=d3.range(f.length);null!=c&&h.sort(c===Rc?
function(a,b){return m[b]-m[a]}:function(a,b){return c(f[a],f[b])});var l=[];return h.forEach(function(a){var b;l[a]={data:f[a],value:b=m[a],startAngle:p,endAngle:p+=b*r}}),l}var b=Number,c=Rc,d=0,e=2*Math.PI;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Rc={};d3.layout.stack=function(){function a(c,p){var r=
c.map(function(c,d){return b.call(a,c,d)}),h=r.map(function(b,c){return b.map(function(b,c){return[g.call(a,b,c),m.call(a,b,c)]})}),l=d.call(a,h,p),r=d3.permute(r,l),h=d3.permute(h,l),l=e.call(a,h,p),v=r.length,k=r[0].length,x,n,A;for(n=0;n<k;++n)for(f.call(a,r[0][n],A=l[n],h[0][n][1]),x=1;x<v;++x)f.call(a,r[x][n],A+=h[x-1][n][1],h[x][n][1]);return c}var b=c,d=mb,e=nb,f=yd,g=wd,m=xd;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(d="function"==
typeof b?b:re.get(b)||mb,a):d},a.offset=function(b){return arguments.length?(e="function"==typeof b?b:se.get(b)||nb,a):e},a.x=function(b){return arguments.length?(g=b,a):g},a.y=function(b){return arguments.length?(m=b,a):m},a.out=function(b){return arguments.length?(f=b,a):f},a};var re=d3.map({"inside-out":function(a){var b=a.length,c,d=a.map(zd),e=a.map(Ad),f=d3.range(b).sort(function(a,b){return d[a]-d[b]}),g=0,m=0,p=[],r=[];for(a=0;a<b;++a)c=f[a],g<m?(g+=e[c],p.push(c)):(m+=e[c],r.push(c));return r.reverse().concat(p)},
reverse:function(a){return d3.range(a.length).reverse()},"default":mb}),se=d3.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,f,g,m,p=[];for(g=0;g<c;++g){for(m=f=0;f<b;f++)m+=a[f][g][1];m>e&&(e=m);d.push(m)}for(g=0;g<c;++g)p[g]=(e-d[g])/2;return p},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,f,g,m,p,r,h,l,v,k=[];k[0]=l=v=0;for(f=1;f<d;++f){for(m=e=0;e<b;++e)m+=a[e][f][1];p=e=0;for(h=c[f][0]-c[f-1][0];e<b;++e){g=0;for(r=(a[e][f][1]-a[e][f-1][1])/(2*h);g<e;++g)r+=(a[g][f][1]-
a[g][f-1][1])/h;p+=r*a[e][f][1]}k[f]=l-=m?p/m*h:0;l<v&&(v=l)}for(f=0;f<d;++f)k[f]-=v;return k},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,f,g,m=[];for(f=0;f<c;++f){for(g=e=0;e<b;e++)g+=a[e][f][1];if(g)for(e=0;e<b;e++)a[e][f][1]/=g;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)m[f]=0;return m},zero:nb});d3.layout.histogram=function(){function a(f,g){var m=[],p=f.map(c,this),r=d.call(this,p,g),h=e.call(this,r,p,g),l;g=-1;for(var v=p.length,k=h.length-1,x=b?1:1/v,n;++g<k;)l=m[g]=[],
l.dx=h[g+1]-(l.x=h[g]),l.y=0;if(0<k)for(g=-1;++g<v;)n=p[g],n>=r[0]&&n<=r[1]&&(l=m[d3.bisect(h,n,1,k)-1],l.y+=x,l.push(f[g]));return m}var b=!0,c=Number,d=Dd,e=Cd;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=f(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return rc(a,b)}:f(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a};d3.layout.hierarchy=function(){function a(b,g,m){var p=
e.call(c,b,g),r=ob?b:{data:b};r.depth=g;m.push(r);if(p&&(h=p.length)){b=-1;var h,l=r.children=[],v=0;g+=1;for(var k;++b<h;)k=a(p[b],g,m),k.parent=r,l.push(k),v+=k.value;d&&l.sort(d);f&&(r.value=v)}else f&&(r.value=+f.call(c,b,g)||0);return r}function b(a,d){var e=a.children,g=0;if(e&&(p=e.length))for(var m=-1,p,r=d+1;++m<p;)g+=b(e[m],r);else f&&(g=+f.call(c,ob?a:a.data,d)||0);return f&&(a.value=g),g}function c(b){var d=[];return a(b,0,d),d}var d=Hd,e=Fd,f=Gd;return c.sort=function(a){return arguments.length?
(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c};var ob=!1;d3.layout.pack=function(){function a(d,e){var f=b.call(this,d,e),g=f[0];g.x=0;g.y=0;vc(g);var m=c[0],p=c[1],r=1/Math.max(2*g.r/m,2*g.r/p);return wc(g,m/2,p/2,r),f}var b=d3.layout.hierarchy().sort(Id),c=[1,1];return a.size=function(b){return arguments.length?(c=b,a):c},wa(a,b)};d3.layout.cluster=function(){function a(e,f){var g=
b.call(this,e,f),m=g[0],p,r=0;Qa(m,function(a){var b=a.children;b&&b.length?(a.x=Nd(b),a.y=Md(b)):(a.x=p?r+=c(a,p):0,a.y=0,p=a)});var h=xc(m),l=yc(m),v=h.x-c(h,l)/2,k=l.x+c(l,h)/2;return Qa(m,function(a){a.x=(a.x-v)/(k-v)*d[0];a.y=(1-(m.y?a.y/m.y:1))*d[1]}),g}var b=d3.layout.hierarchy().sort(null).value(null),c=zc,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},wa(a,b)};d3.layout.tree=function(){function a(e,f){function g(a,
b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,m=d[0],p,r=m,h,l=-1;++l<f;){h=d[l];g(h,p);var v=h;if(p){for(var k=v,x=v,n=v.parent.children[0],A=k._tree.mod,q=x._tree.mod,K=p._tree.mod,D=n._tree.mod,t=void 0;p=rb(p),k=qb(k),p&&k;){n=qb(n);x=rb(x);x._tree.ancestor=v;t=p._tree.prelim+K-k._tree.prelim-A+c(p,k);if(0<t){var O=p._tree.ancestor.parent==v.parent?p._tree.ancestor:r,s=v,u=t,O=O._tree,s=s._tree,P=u/(s.number-O.number);O.change+=P;s.change-=P;s.shift+=u;s.prelim+=u;s.mod+=u;A+=t;
q+=t}K+=p._tree.mod;A+=k._tree.mod;D+=n._tree.mod;q+=x._tree.mod}p&&!rb(x)&&(x._tree.thread=p,x._tree.mod+=K-q);k&&!qb(n)&&(n._tree.thread=k,n._tree.mod+=A-D,r=v)}p=h}f=d=0;l=a.children;for(v=l.length;0<=--v;)r=l[v]._tree,r.prelim+=d,r.mod+=d,d+=r.shift+(f+=r.change);m=.5*(m._tree.prelim+h._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-m):e.prelim=m}else b&&(e.prelim=b._tree.prelim+c(a,b))}function m(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(e=c.length)){var d=-1,e;for(b+=
a._tree.mod;++d<e;)m(c[d],b)}}var p=b.call(this,e,f),r=p[0];Qa(r,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});g(r);m(r,-r._tree.prelim);var h=Pa(r,Pd),l=Pa(r,Od),v=Pa(r,Qd),k=h.x-c(h,l)/2,x=l.x+c(l,h)/2,n=v.depth||1;return Qa(r,function(a){a.x=(a.x-k)/(x-k)*d[0];a.y=a.depth/n*d[1];delete a._tree}),p}var b=d3.layout.hierarchy().sort(null).value(null),c=zc,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?
(d=b,a):d},wa(a,b)};d3.layout.treemap=function(){function a(b,c){for(var d=-1,e=b.length,f,g;++d<e;)g=(f=b[d]).value*(0>c?0:c),f.area=isNaN(g)||0>=g?0:g}function b(c){var e=c.children;if(e&&e.length){var f=r(c),g=[],m=e.slice(),p=Infinity,h,l=Math.min(f.dx,f.dy);a(m,f.dx*f.dy/c.value);for(g.area=0;0<(c=m.length);){g.push(c=m[c-1]);g.area+=c.area;c=l;for(var k=g.area,x=void 0,n=0,A=Infinity,q=-1,D=g.length;++q<D;)if(x=g[q].area)x<A&&(A=x),x>n&&(n=x);(h=(k*=k,c*=c,k?Math.max(c*n*v/k,k/(c*A*v)):Infinity))<=
p?(m.pop(),p=h):(g.area-=g.pop().area,d(g,l,f,!1),l=Math.min(f.dx,f.dy),g.length=g.area=0,p=Infinity)}g.length&&(d(g,l,f,!0),g.length=g.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=r(b),g=e.slice(),m=[];a(g,f.dx*f.dy/b.value);for(m.area=0;b=g.pop();)m.push(b),m.area+=b.area,null!=b.z&&(d(m,b.z?f.dx:f.dy,f,!g.length),m.length=m.area=0);e.forEach(c)}}function d(a,b,c,e){var f=-1,m=a.length,p=c.x,r=c.y,h=b?g(a.area/b):0,l;if(b==c.dx){if(e||h>c.dy)h=c.dy;for(;++f<m;)l=a[f],
l.x=p,l.y=r,l.dy=h,p+=l.dx=Math.min(c.x+c.dx-p,h?g(l.area/h):0);l.z=!0;l.dx+=c.x+c.dx-p;c.y+=h;c.dy-=h}else{if(e||h>c.dx)h=c.dx;for(;++f<m;)l=a[f],l.x=p,l.y=r,l.dx=h,r+=l.dy=Math.min(c.y+c.dy-r,h?g(l.area/h):0);l.z=!1;l.dy+=c.y+c.dy-r;c.x+=h;c.dx-=h}}function e(d){d=l||f(d);var g=d[0];return g.x=0,g.y=0,g.dx=m[0],g.dy=m[1],l&&f.revalue(g),a([g],g.dx*g.dy/g.value),(l?c:b)(g),h&&(l=d),d}var f=d3.layout.hierarchy(),g=Math.round,m=[1,1],p=null,r=sb,h=!1,l,v=.5*(1+Math.sqrt(5));return e.size=function(a){return arguments.length?
(m=a,e):m},e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?sb(c):Ac(c,"number"==typeof d?[d,d,d,d]:d)}function c(b){return Ac(b,a)}if(!arguments.length)return p;var d;return r=null==(p=a)?sb:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,e},e.round=function(a){return arguments.length?(g=a?Math.round:Number,e):g!=Number},e.sticky=function(a){return arguments.length?(h=a,l=null,e):h},e.ratio=function(a){return arguments.length?(v=a,e):v},wa(e,f)};d3.csv=function(a,
b){d3.text(a,"text/csv",function(a){b(a&&d3.csv.parse(a))})};d3.csv.parse=function(a){var b;return d3.csv.parseRows(a,function(a,c){if(c){for(var d={},e=-1,f=b.length;++e<f;)d[b[e]]=a[e];return d}return b=a,null})};d3.csv.parseRows=function(a,b){function c(){if(g.lastIndex>=a.length)return e;if(r)return r=!1,d;var b=g.lastIndex;if(34===a.charCodeAt(b)){for(var f=b;f++<a.length;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;f++}g.lastIndex=f+2;var m=a.charCodeAt(f+1);return 13===m?(r=!0,
10===a.charCodeAt(f+2)&&g.lastIndex++):10===m&&(r=!0),a.substring(b+1,f).replace(/""/g,'"')}return(f=g.exec(a))?(r=44!==f[0].charCodeAt(0),a.substring(b,f.index)):(g.lastIndex=a.length,a.substring(b))}var d={},e={},f=[],g=/\r\n|[,\r\n]/g,m=0,p,r;for(g.lastIndex=0;(p=c())!==e;){for(var h=[];p!==d&&p!==e;)h.push(p),p=c();b&&!(h=b(h,m++))||f.push(h)}return f};d3.csv.format=function(a){return a.map(Rd).join("\n")};d3.geo={};var I=Math.PI/180;d3.geo.azimuthal=function(){function a(c){var g=c[0]*I-f,r=
c[1]*I;c=Math.cos(g);var g=Math.sin(g),h=Math.cos(r),r=Math.sin(r),l="orthographic"!==b?p*r+m*h*c:null,v,l="stereographic"===b?1/(1+l):"gnomonic"===b?1/l:"equidistant"===b?(v=Math.acos(l),v?v/Math.sin(v):0):"equalarea"===b?Math.sqrt(2/(1+l)):1;return[d*l*h*g+e[0],d*l*(p*h*c-m*r)+e[1]]}var b="orthographic",c,d=200,e=[480,250],f,g,m,p;return a.invert=function(a){var c=(a[0]-e[0])/d;a=(a[1]-e[1])/d;var g=Math.sqrt(c*c+a*a),r="stereographic"===b?2*Math.atan(g):"gnomonic"===b?Math.atan(g):"equidistant"===
b?g:"equalarea"===b?2*Math.asin(.5*g):Math.asin(g),h=Math.sin(r),r=Math.cos(r);return[(f+Math.atan2(c*h,g*m*r+a*p*h))/I,Math.asin(r*p-(g?a*h*m/g:0))/I]},a.mode=function(c){return arguments.length?(b=c+"",a):b},a.origin=function(b){return arguments.length?(c=b,f=c[0]*I,g=c[1]*I,m=Math.cos(g),p=Math.sin(g),a):c},a.scale=function(b){return arguments.length?(d=+b,a):d},a.translate=function(b){return arguments.length?(e=[+b[0],+b[1]],a):e},a.origin([0,0])};d3.geo.albers=function(){function a(b){var c=
m*(I*b[0]-g);b=Math.sqrt(p-2*m*Math.sin(I*b[1]))/m;return[e*b*Math.sin(c)+f[0],e*(b*Math.cos(c)-r)+f[1]]}function b(){var e=I*d[0],f=I*d[1],h=I*c[1],l=Math.sin(e),e=Math.cos(e);return g=I*c[0],m=.5*(l+Math.sin(f)),p=e*e+2*m*l,r=Math.sqrt(p-2*m*Math.sin(h))/m,a}var c=[-98,38],d=[29.5,45.5],e=1E3,f=[480,250],g,m,p,r;return a.invert=function(a){var b=(a[0]-f[0])/e,c=r+(a[1]-f[1])/e;a=Math.atan2(b,c);b=Math.sqrt(b*b+c*c);return[(g+a/m)/I,Math.asin((p-b*b*m*m)/(2*m))/I]},a.origin=function(a){return arguments.length?
(c=[+a[0],+a[1]],b()):c},a.parallels=function(a){return arguments.length?(d=[+a[0],+a[1]],b()):d},a.scale=function(b){return arguments.length?(e=+b,a):e},a.translate=function(b){return arguments.length?(f=[+b[0],+b[1]],a):f},b()};d3.geo.albersUsa=function(){function a(f){var g=f[0],m=f[1];return(50<m?c:-140>g?d:21>m?e:b)(f)}var b=d3.geo.albers(),c=d3.geo.albers().origin([-160,60]).parallels([55,65]),d=d3.geo.albers().origin([-160,20]).parallels([8,18]),e=d3.geo.albers().origin([-60,10]).parallels([8,
18]);return a.scale=function(f){return arguments.length?(b.scale(f),c.scale(.6*f),d.scale(f),e.scale(1.5*f),a.translate(b.translate())):b.scale()},a.translate=function(f){if(!arguments.length)return b.translate();var g=b.scale()/1E3,m=f[0],p=f[1];return b.translate(f),c.translate([m-400*g,p+170*g]),d.translate([m-190*g,p+200*g]),e.translate([m+580*g,p+430*g]),a},a.scale(b.scale())};d3.geo.bonne=function(){function a(m){var p=m[0]*I-d,r=m[1]*I-e;f?(m=g+f-r,r=p*Math.cos(r)/m,p=m*Math.sin(r),r=m*Math.cos(r)-
g):(p*=Math.cos(r),r*=-1);return[b*p+c[0],b*r+c[1]]}var b=200,c=[480,250],d,e,f,g;return a.invert=function(a){var e=(a[0]-c[0])/b;a=(a[1]-c[1])/b;if(f){var m=g+a,p=Math.sqrt(e*e+m*m);a=g+f-p;e=d+p*Math.atan2(e,m)/Math.cos(a)}else a*=-1,e/=Math.cos(a);return[e/I,a/I]},a.parallel=function(b){return arguments.length?(g=1/Math.tan(f=b*I),a):f/I},a.origin=function(b){return arguments.length?(d=b[0]*I,e=b[1]*I,a):[d/I,e/I]},a.scale=function(c){return arguments.length?(b=+c,a):b},a.translate=function(b){return arguments.length?
(c=[+b[0],+b[1]],a):c},a.origin([0,0]).parallel(45)};d3.geo.equirectangular=function(){function a(d){return[d[0]/360*b+c[0],-d[1]/360*b+c[1]]}var b=500,c=[480,250];return a.invert=function(a){return[(a[0]-c[0])/b*360,(a[1]-c[1])/b*-360]},a.scale=function(c){return arguments.length?(b=+c,a):b},a.translate=function(b){return arguments.length?(c=[+b[0],+b[1]],a):c},a};d3.geo.mercator=function(){function a(d){var e=d[0]/360;d=-(Math.log(Math.tan(Math.PI/4+d[1]*I/2))/I)/360;return[b*e+c[0],b*Math.max(-.5,
Math.min(.5,d))+c[1]]}var b=500,c=[480,250];return a.invert=function(a){return[(a[0]-c[0])/b*360,2*Math.atan(Math.exp((a[1]-c[1])/b*-360*I))/I-90]},a.scale=function(c){return arguments.length?(b=+c,a):b},a.translate=function(b){return arguments.length?(c=[+b[0],+b[1]],a):c},a};d3.geo.path=function(){function a(b,c){"function"==typeof e&&(f=tb(e.apply(this,arguments)));p(b);var d=m.length?m.join(""):null;return m=[],d}function b(a){return g(a).join(",")}function c(a){for(var b=Math.abs(d3.geom.polygon(a[0].map(g)).area()),
d=0,e=a.length;++d<e;)b-=Math.abs(d3.geom.polygon(a[d].map(g)).area());return b}function d(a){for(var b=d3.geom.polygon(a[0].map(g)),c=b.area(),b=b.centroid(0>c?(c*=-1,1):-1),e=b[0],f=b[1],m=c,p=0,r=a.length;++p<r;)b=d3.geom.polygon(a[p].map(g)),c=b.area(),b=b.centroid(0>c?(c*=-1,1):-1),e-=b[0],f-=b[1],m-=c;return[e,f,6*m]}var e=4.5,f=tb(e),g=d3.geo.albersUsa(),m=[],p=Ra({FeatureCollection:function(a){a=a.features;for(var b=-1,c=a.length;++b<c;)m.push(p(a[b].geometry))},Feature:function(a){p(a.geometry)},
Point:function(a){m.push("M",b(a.coordinates),f)},MultiPoint:function(a){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)m.push("M",b(a[c]),f)},LineString:function(a){a=a.coordinates;var c=-1,d=a.length;for(m.push("M");++c<d;)m.push(b(a[c]),"L");m.pop()},MultiLineString:function(a){a=a.coordinates;for(var c=-1,d=a.length,e,f,g;++c<d;){e=a[c];f=-1;g=e.length;for(m.push("M");++f<g;)m.push(b(e[f]),"L");m.pop()}},Polygon:function(a){a=a.coordinates;for(var c=-1,d=a.length,e,f,g;++c<d;)if(e=a[c],f=-1,0<
(g=e.length-1)){for(m.push("M");++f<g;)m.push(b(e[f]),"L");m[m.length-1]="Z"}},MultiPolygon:function(a){a=a.coordinates;for(var c=-1,d=a.length,e,f,g,p,r,h;++c<d;)for(e=a[c],f=-1,g=e.length;++f<g;)if(p=e[f],r=-1,0<(h=p.length-1)){for(m.push("M");++r<h;)m.push(b(p[r]),"L");m[m.length-1]="Z"}},GeometryCollection:function(a){a=a.geometries;for(var b=-1,c=a.length;++b<c;)m.push(p(a[b]))}}),r=a.area=Ra({FeatureCollection:function(a){var b=0;a=a.features;for(var c=-1,d=a.length;++c<d;)b+=r(a[c]);return b},
Feature:function(a){return r(a.geometry)},Polygon:function(a){return c(a.coordinates)},MultiPolygon:function(a){var b=0;a=a.coordinates;for(var d=-1,e=a.length;++d<e;)b+=c(a[d]);return b},GeometryCollection:function(a){var b=0;a=a.geometries;for(var c=-1,d=a.length;++c<d;)b+=r(a[c]);return b}},0),h=a.centroid=Ra({Feature:function(a){return h(a.geometry)},Polygon:function(a){a=d(a.coordinates);return[a[0]/a[2],a[1]/a[2]]},MultiPolygon:function(a){a=a.coordinates;for(var b,c=0,e=0,f=0,g=-1,m=a.length;++g<
m;)b=d(a[g]),c+=b[0],e+=b[1],f+=b[2];return[c/f,e/f]}});return a.projection=function(b){return g=b,a},a.pointRadius=function(b){return"function"==typeof b?e=b:(e=+b,f=tb(e)),a},a};d3.geo.bounds=function(a){var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity;return Sa(a,function(a,f){a<b&&(b=a);a>d&&(d=a);f<c&&(c=f);f>e&&(e=f)}),[[b,c],[d,e]]};var Bc={Feature:function(a,b){Sa(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=0,e=c.length;d<e;d++)Sa(c[d].geometry,b)},GeometryCollection:function(a,
b){for(var c=a.geometries,d=0,e=c.length;d<e;d++)Sa(c[d],b)},LineString:Cc,MultiLineString:function(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)for(var f=c[d],g=0,m=f.length;g<m;g++)b.apply(null,f[g])},MultiPoint:Cc,MultiPolygon:function(a,b){for(var c=a.coordinates,d=0,e=c.length;d<e;d++)for(var f=c[d][0],g=0,m=f.length;g<m;g++)b.apply(null,f[g])},Point:function(a,b){b.apply(null,a.coordinates)},Polygon:function(a,b){for(var c=a.coordinates[0],d=0,e=c.length;d<e;d++)b.apply(null,c[d])}};
d3.geo.circle=function(){function a(){}function b(a){return m.distance(a)<g}function d(a){for(var b=-1,c=a.length,e=[],f,p,r,h,l;++b<c;)l=m.distance(r=a[b]),l<g?(p&&e.push(Ec(p,r)((h-g)/(h-l))),e.push(r),f=p=null):(p=r,!f&&e.length&&(e.push(Ec(e[e.length-1],p)((g-h)/(l-h))),f=p)),h=l;f=a[0];(p=e[0])&&r[0]===f[0]&&r[1]===f[1]&&(r[0]!==p[0]||r[1]!==p[1])&&e.push(p);a=0;p=(b=e.length)?[e[0]]:e;for(h=m.source();++a<b;)for(r=m.source(e[a-1])(e[a]).coordinates,c=0,f=r.length;++c<f;)p.push(r[c]);return m.source(h),
p}var e=[0,0],f=89.99,g=f*I,m=d3.geo.greatArc().source(e).target(c);a.clip=function(a){return"function"==typeof e&&m.source(e.apply(this,arguments)),p(a)||null};var p=Ra({FeatureCollection:function(a){var b=a.features.map(p).filter(c);return b&&(a=Object.create(a),a.features=b,a)},Feature:function(a){var b=p(a.geometry);return b&&(a=Object.create(a),a.geometry=b,a)},Point:function(a){return b(a.coordinates)&&a},MultiPoint:function(a){var c=a.coordinates.filter(b);return c.length&&{type:a.type,coordinates:c}},
LineString:function(a){var b=d(a.coordinates);return b.length&&(a=Object.create(a),a.coordinates=b,a)},MultiLineString:function(a){var b=a.coordinates.map(d).filter(function(a){return a.length});return b.length&&(a=Object.create(a),a.coordinates=b,a)},Polygon:function(a){var b=a.coordinates.map(d);return b[0].length&&(a=Object.create(a),a.coordinates=b,a)},MultiPolygon:function(a){var b=a.coordinates.map(function(a){return a.map(d)}).filter(function(a){return a[0].length});return b.length&&(a=Object.create(a),
a.coordinates=b,a)},GeometryCollection:function(a){var b=a.geometries.map(p).filter(c);return b.length&&(a=Object.create(a),a.geometries=b,a)}});return a.origin=function(b){return arguments.length?(e=b,"function"!=typeof e&&m.source(e),a):e},a.angle=function(b){return arguments.length?(g=(f=+b)*I,a):f},d3.rebind(a,m,"precision")};d3.geo.greatArc=function(){function a(){for(var b=a.distance.apply(this,arguments),d=0,b=f/b,m=[c];1>(d+=b);)m.push(g(d));return m.push(e),{type:"LineString",coordinates:m}}
var b=Td,c,d=Ud,e,f=6*I,g=Dc();return a.distance=function(){return"function"==typeof b&&g.source(c=b.apply(this,arguments)),"function"==typeof d&&g.target(e=d.apply(this,arguments)),g.distance()},a.source=function(d){return arguments.length?(b=d,"function"!=typeof b&&g.source(c=b),a):b},a.target=function(b){return arguments.length?(d=b,"function"!=typeof d&&g.target(e=d),a):d},a.precision=function(b){return arguments.length?(f=b*I,a):f/I},a};d3.geo.greatCircle=d3.geo.circle;d3.geom={};d3.geom.contour=
function(a,b){var c;if(!(c=b))a:for(var d=c=0;;){if(a(c,d)){c=[c,d];break a}0===c?(c=d+1,d=0):(c-=1,d+=1)}var d=[],e=c[0],f=c[1],g=0,m=0,p=NaN,r=NaN,h=0;do h=0,a(e-1,f-1)&&(h+=1),a(e,f-1)&&(h+=2),a(e-1,f)&&(h+=4),a(e,f)&&(h+=8),6===h?(g=-1===r?-1:1,m=0):9===h?(g=0,m=1===p?-1:1):(g=te[h],m=ue[h]),g!=p&&m!=r&&(d.push([e,f]),p=g,r=m),e+=g,f+=m;while(c[0]!=e||c[1]!=f);return d};var te=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],ue=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];d3.geom.hull=function(a){if(3>a.length)return[];
var b=a.length,c=b-1,d=[],e=[],f,g=0,m,p,r,h,l,v,k;for(f=1;f<b;++f)a[f][1]<a[g][1]?g=f:a[f][1]==a[g][1]&&(g=a[f][0]<a[g][0]?f:g);for(f=0;f<b;++f)f!==g&&(p=a[f][1]-a[g][1],m=a[f][0]-a[g][0],d.push({angle:Math.atan2(p,m),index:f}));d.sort(function(a,b){return a.angle-b.angle});k=d[0].angle;v=d[0].index;l=0;for(f=1;f<c;++f)b=d[f].index,k==d[f].angle?(m=a[v][0]-a[g][0],p=a[v][1]-a[g][1],r=a[b][0]-a[g][0],h=a[b][1]-a[g][1],m*m+p*p>=r*r+h*h?d[f].index=-1:(d[l].index=-1,k=d[f].angle,l=f,v=b)):(k=d[f].angle,
l=f,v=b);e.push(g);for(b=f=0;2>f;++b)-1!==d[b].index&&(e.push(d[b].index),f++);for(g=e.length;b<c;++b)if(-1!==d[b].index){for(;!Vd(e[g-2],e[g-1],d[b].index,a);)--g;e[g++]=d[b].index}c=[];for(f=0;f<g;++f)c.push(a[e[f]]);return c};d3.geom.polygon=function(a){return a.area=function(){for(var b=0,c=a.length,d=a[c-1][0]*a[0][1],e=a[c-1][1]*a[0][0];++b<c;)d+=a[b-1][0]*a[b][1],e+=a[b-1][1]*a[b][0];return.5*(e-d)},a.centroid=function(b){var c=-1,d=a.length,e=0,f=0,g,m=a[d-1],p;for(arguments.length||(b=-1/
(6*a.area()));++c<d;)g=m,m=a[c],p=g[0]*m[1]-m[0]*g[1],e+=(g[0]+m[0])*p,f+=(g[1]+m[1])*p;return[e*b,f*b]},a.clip=function(b){for(var c,d=-1,e=a.length,f,g,m=a[e-1],p,r,h;++d<e;){c=b.slice();b.length=0;p=a[d];r=c[(g=c.length)-1];for(f=-1;++f<g;)h=c[f],ub(h,m,p)?(ub(r,m,p)||b.push(Fc(r,h,m,p)),b.push(h)):ub(r,m,p)&&b.push(Fc(r,h,m,p)),r=h;m=p}return b},a};d3.geom.voronoi=function(a){var b=a.map(function(){return[]});return Gc(a,function(a){var c,d,e,f,g,m;1===a.a&&0<=a.b?(c=a.ep.r,d=a.ep.l):(c=a.ep.l,
d=a.ep.r);1===a.a?(g=c?c.y:-1E6,e=a.c-a.b*g,m=d?d.y:1E6,f=a.c-a.b*m):(e=c?c.x:-1E6,g=a.c-a.a*e,f=d?d.x:1E6,m=a.c-a.a*f);c=[e,g];f=[f,m];b[a.region.l.index].push(c,f);b[a.region.r.index].push(c,f)}),b.map(function(b,c){var d=a[c][0],e=a[c][1];return b.forEach(function(a){a.angle=Math.atan2(a[0]-d,a[1]-e)}),b.sort(function(a,b){return a.angle-b.angle}).filter(function(a,c){return!c||1E-10<a.angle-b[c-1].angle})})};var vb={l:"r",r:"l"};d3.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=
[];return Gc(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)});b.sort(function(a,b){return a.angle-b.angle});for(var m=0,p=b.length-1;m<p;m++)c.push([e,b[m],b[m+1]])}),c};d3.geom.quadtree=function(a,b,c,d,e){function f(a,b,c,d,e,m){if(!isNaN(b.x)&&!isNaN(b.y))if(a.leaf){var p=a.point;p?.01>Math.abs(p.x-b.x)+Math.abs(p.y-b.y)?g(a,b,c,d,e,m):(a.point=null,g(a,p,c,d,e,m),g(a,b,c,d,e,
m)):a.point=b}else g(a,b,c,d,e,m)}function g(a,b,c,d,e,m){var p=.5*(c+e),r=.5*(d+m),h=b.x>=p,l=b.y>=r,v=(l<<1)+h;a.leaf=!1;a=a.nodes[v]||(a.nodes[v]={leaf:!0,nodes:[],point:null});h?c=p:e=p;l?d=r:m=r;f(a,b,c,d,e,m)}var m,p=-1,r=a.length;r&&isNaN(a[0].x)&&(a=a.map(Wd));if(5>arguments.length)if(3===arguments.length)e=d=c,c=b;else{b=c=Infinity;for(d=e=-Infinity;++p<r;)m=a[p],m.x<b&&(b=m.x),m.y<c&&(c=m.y),m.x>d&&(d=m.x),m.y>e&&(e=m.y);m=d-b;p=e-c;m>p?e=c+m:d=b+p}var h={leaf:!0,nodes:[],point:null};return h.add=
function(a){f(h,a,b,c,d,e)},h.visit=function(a){xa(a,h,b,c,d,e)},a.forEach(h.add),h};d3.time={};var V=Date;ma.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},
getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ea.setUTCDate.apply(this._,arguments)},setDay:function(){ea.setUTCDay.apply(this._,arguments)},setFullYear:function(){ea.setUTCFullYear.apply(this._,arguments)},setHours:function(){ea.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ea.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ea.setUTCMinutes.apply(this._,arguments)},
setMonth:function(){ea.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ea.setUTCSeconds.apply(this._,arguments)},setTime:function(){ea.setTime.apply(this._,arguments)}};var ea=Date.prototype;d3.time.format=function(a){function b(d){for(var e=[],f=-1,g=0,m,p;++f<c;)37==a.charCodeAt(f)&&(e.push(a.substring(g,f),(p=Ya[m=a.charAt(++f)])?p(d):m),g=f+1);return e.push(a.substring(g,f)),e.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Ta(c,a,b,0)!=
b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);b=new V;return b.setFullYear(c.y,c.m,c.d),b.setHours(c.H,c.M,c.S,c.L),b},b.toString=function(){return a},b};var ba=d3.format("02d"),Sc=d3.format("03d"),ve=d3.format("04d"),we=d3.format("2d"),Ya={a:function(a){return Db[a.getDay()].substring(0,3)},A:function(a){return Db[a.getDay()]},b:function(a){return Tc[a.getMonth()].substring(0,3)},B:function(a){return Tc[a.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(a){return ba(a.getDate())},
e:function(a){return we(a.getDate())},H:function(a){return ba(a.getHours())},I:function(a){return ba(a.getHours()%12||12)},j:function(a){return Sc(1+d3.time.dayOfYear(a))},L:function(a){return Sc(a.getMilliseconds())},m:function(a){return ba(a.getMonth()+1)},M:function(a){return ba(a.getMinutes())},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a){return ba(a.getSeconds())},U:function(a){return ba(d3.time.sundayOfYear(a))},w:function(a){return a.getDay()},W:function(a){return ba(d3.time.mondayOfYear(a))},
x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(a){return ba(a.getFullYear()%100)},Y:function(a){return ve(a.getFullYear()%1E4)},Z:function(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(Math.abs(b)/60),b=Math.abs(b)%60;return a+ba(c)+ba(b)},"%":function(a){return"%"}},Xd={a:function(a,b,c){return xe.test(b.substring(c,c+=3))?c:-1},A:function(a,b,c){Uc.lastIndex=0;return(a=Uc.exec(b.substring(c,c+10)))?c+a[0].length:-1},b:function(a,b,c){b=ye.get(b.substring(c,c+=3).toLowerCase());
return null==b?-1:(a.m=b,c)},B:function(a,b,c){Vc.lastIndex=0;return(b=Vc.exec(b.substring(c,c+12)))?(a.m=ze.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return Ta(a,Ya.c.toString(),b,c)},d:Hc,e:Hc,H:Ic,I:Ic,L:function(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,c+2)))?(a.M=+b[0],
c+b[0].length):-1},p:function(a,b,c){b=Ae.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:function(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},x:function(a,b,c){return Ta(a,Ya.x.toString(),b,c)},X:function(a,b,c){return Ta(a,Ya.X.toString(),b,c)},y:function(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,c+2)))?(a.y=1E3*~~((new Date).getFullYear()/1E3)+ +b[0],c+b[0].length):-1},Y:function(a,b,c){W.lastIndex=0;return(b=W.exec(b.substring(c,
c+4)))?(a.y=+b[0],c+b[0].length):-1}},xe=/^(?:sun|mon|tue|wed|thu|fri|sat)/i,Uc=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/i,Db="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ye=d3.map({jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}),Vc=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/ig,ze=d3.map({january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,
november:10,december:11}),Tc="January February March April May June July August September October November December".split(" "),W=/\s*\d+/,Ae=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function b(a){try{V=ma;var d=new V;return d._=a,c(d)}finally{V=Date}}var c=d3.time.format(a);return b.parse=function(a){try{V=ma;var b=c.parse(a);return b&&b._}finally{V=Date}},b.toString=c.toString,b};var Wc=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?wb:Wc;wb.parse=
function(a){a=new Date(a);return isNaN(a)?null:a};wb.toString=Wc.toString;d3.time.second=na(function(a){return new V(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});d3.time.seconds=d3.time.second.range;d3.time.seconds.utc=d3.time.second.utc.range;d3.time.minute=na(function(a){return new V(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});d3.time.minutes=d3.time.minute.range;
d3.time.minutes.utc=d3.time.minute.utc.range;d3.time.hour=na(function(a){var b=a.getTimezoneOffset()/60;return new V(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});d3.time.hours=d3.time.hour.range;d3.time.hours.utc=d3.time.hour.utc.range;d3.time.day=na(function(a){return new V(a.getFullYear(),a.getMonth(),a.getDate())},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});d3.time.days=d3.time.day.range;
d3.time.days.utc=d3.time.day.utc.range;d3.time.dayOfYear=function(a){var b=d3.time.year(a);return Math.floor((a-b)/864E5-(a.getTimezoneOffset()-b.getTimezoneOffset())/1440)};Db.forEach(function(a,b){a=a.toLowerCase();b=7-b;var c=d3.time[a]=na(function(a){return(a=d3.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});d3.time[a+"s"]=c.range;
d3.time[a+"s"].utc=c.utc.range;d3.time[a+"OfYear"]=function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)}});d3.time.week=d3.time.sunday;d3.time.weeks=d3.time.sunday.range;d3.time.weeks.utc=d3.time.sunday.utc.range;d3.time.weekOfYear=d3.time.sundayOfYear;d3.time.month=na(function(a){return new V(a.getFullYear(),a.getMonth(),1)},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});d3.time.months=d3.time.month.range;d3.time.months.utc=d3.time.month.utc.range;
d3.time.year=na(function(a){return new V(a.getFullYear(),0,1)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});d3.time.years=d3.time.year.range;d3.time.years.utc=d3.time.year.utc.range;var Va=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Eb=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,
1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Be=[[d3.time.format("%Y"),function(a){return!0}],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return 1!=a.getDate()}],[d3.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],
[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],Xc=d3.scale.linear(),Ce=Kc(Be);Eb.year=function(a,b){return Xc.domain(a.map(Yd)).ticks(b).map(zb)};d3.time.scale=function(){return xb(d3.scale.linear(),Eb,Ce)};var Yc=Eb.map(function(a){return[a[0].utc,a[1]]}),De=[[d3.time.format.utc("%Y"),function(a){return!0}],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(a){return 1!=
a.getUTCDate()}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Ee=Kc(De);Yc.year=function(a,b){return Xc.domain(a.map(Zd)).ticks(b).map(Ab)};d3.time.scale.utc=function(){return xb(d3.scale.linear(),
Yc,Ee)}})();(function(a){var b=function(a,b){var e=this.convertLatLngs(a);this.points=e.points;this.maxDistance=isFinite(b)?b:e.maxDistance+1};b.prototype={points:[],maxDistance:0,convertLatLngs:function(a){var b=0;return{points:a.map(function(e,f){e.x=e.lng;e.y=this.lat2y(e);if(a[f-1]){var g=this.distanceTo(e,a[f-1]);g>b&&(b=g)}return e}.bind(this)),maxDistance:b}},distanceTo:function(b,d){var e=a.PI/180,f=(d.lng-b.lng)*e,g=b.lat*e,h=d.lat*e,e=a.sin((d.lat-b.lat)*e/2),f=a.sin(f/2),g=e*e+f*f*a.cos(g)*a.cos(h);
return 12756274*a.atan2(a.sqrt(g),a.sqrt(1-g))},getLatLngs:function(){if(3>=this.length)return this.points;var a=[],b=this.points.slice().sort(function(a,b){return a.y-b.y})[0],e=b,f={x:e.x,y:e.y-1};a.push(b);for(var g,h=0,l=function(a,b){return this.getAngle(e,f,b)-this.getAngle(e,f,a)}.bind(this);;){h++;for(var n=this.points.slice().sort(l),q=0,t=n.length;q<t;q++)if(this.distanceTo(e,n[q])<this.maxDistance&&!this.isIntersecting(a,n[q])){g=n[q];break}if(!g||g===e)return this.points;a.push(g);if(g===
b)return a;f=e;e=g;g=void 0;if(1E3<h)return this.points}},isIntersecting:function(a,b){for(var e=1,f=a.length-1;e<f;e++)if(this.intersect(a[e-1],a[e],a[f],b))return!0;return!1},intersect:function(a,b,e,f){return a.x===e.x&&a.y===e.y||b.x===f.x&&b.y===f.y||a.x===f.x&&a.y===f.y||b.x===e.x&&b.y===e.y?!1:0>=this.ccw(a,b,e)*this.ccw(a,b,f)&&0>=this.ccw(e,f,a)*this.ccw(e,f,b)},lat2y:function(b){return 180/a.PI*a.log(a.tan(a.PI/4+a.PI/180*b.lat/2))},ccw:function(a,b,e){var f=b.x-a.x;b=b.y-a.y;var g=e.x-
a.x;a=e.y-a.y;e=f*a-b*g;return 1E-13<e?1:-1E-13>e||-1E-13>f*g||-1E-13>b*a?-1:f*f+b*b<g*g+a*a+1E-13?1:0},getAngle:function(b,d,e){if(e.x===b.x&&e.y===b.y)return-9E3;if(e.x===d.x&&e.y===d.y)return-360;var f=b.x-d.x;d=b.y-d.y;var g=e.x-b.x;e=e.y-b.y;b=f*e-g*d;var f=f*g+d*e,h;0===f?(0<b&&(h=90),0>b&&(h=-90)):(h=180*a.atan(b/f)/a.PI,0>f&&(0<=b&&(h+=180),0>b&&(h-=180)));360===h&&(h=0);return 180-h}};(function(){"undefined"!==typeof module&&module.exports?module.exports=b:"function"===typeof define&&define.amd?
define(function(){return b}):window.ConcaveHull=b})()})(Math);function ConvexHullGrahamScan(){this.anchorPoint=void 0;this.reverse=!1;this.points=[]}
ConvexHullGrahamScan.prototype={constructor:ConvexHullGrahamScan,Point:function(a,b){this.x=a;this.y=b},_findPolarAngle:function(a,b){var c,d;if(!a||!b)return 0;c=b.x-a.x;d=b.y-a.y;if(0==c&&0==d)return 0;c=57.295779513082*Math.atan2(d,c);this.reverse?0>=c&&(c+=360):0<=c&&(c+=360);return c},addPoint:function(a,b){void 0===this.anchorPoint?this.anchorPoint=new this.Point(a,b):this.anchorPoint.y>b&&this.anchorPoint.x>a||this.anchorPoint.y===b&&this.anchorPoint.x>a||this.anchorPoint.y>b&&this.anchorPoint.x===
a?(this.points.push(new this.Point(this.anchorPoint.x,this.anchorPoint.y)),this.anchorPoint=new this.Point(a,b)):this.points.push(new this.Point(a,b))},_sortPoints:function(){var a=this;return this.points.sort(function(b,c){var d=a._findPolarAngle(a.anchorPoint,b),e=a._findPolarAngle(a.anchorPoint,c);return d<e?-1:d>e?1:0})},_checkPoints:function(a,b,c){b=this._findPolarAngle(a,b);a=this._findPolarAngle(a,c);return b>a?!(180<b-a):b<a?180<a-b:!0},getHull:function(){var a=[],b,c;this.reverse=this.points.every(function(a){return 0>
a.x&&0>a.y});b=this._sortPoints();c=b.length;if(3>c)return b.unshift(this.anchorPoint),b;for(a.push(b.shift(),b.shift());;)if(a.push(b.shift()),this._checkPoints(a[a.length-3],a[a.length-2],a[a.length-1])&&a.splice(a.length-2,1),0==b.length){if(c==a.length){var d=this.anchorPoint,a=a.filter(function(a){return!!a});a.some(function(a){return a.x==d.x&&a.y==d.y})||a.unshift(this.anchorPoint);return a}b=a;c=b.length;a=[];a.push(b.shift(),b.shift())}}};"function"===typeof define&&define.amd&&define(function(){return ConvexHullGrahamScan});
"undefined"!==typeof module&&(module.exports=ConvexHullGrahamScan);(function(){function a(a,b,c){k.biginteger_used=1;null!=a&&("number"==typeof a&&"undefined"==typeof b?this.fromInt(a):"number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function b(){return new a(null)}function c(a,b,c,d,e,f){for(;0<=--f;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864);c[d++]=g&67108863}return e}function d(a,b,c,d,e,f){var g=b&32767;for(b>>=15;0<=--f;){var h=this[a]&32767,l=this[a++]>>15,k=b*h+l*g,h=g*h+((k&32767)<<
15)+c[d]+(e&1073741823);e=(h>>>30)+(k>>>15)+b*l+(e>>>30);c[d++]=h&1073741823}return e}function e(a,b,c,d,e,f){var g=b&16383;for(b>>=14;0<=--f;){var h=this[a]&16383,l=this[a++]>>14,k=b*h+l*g,h=g*h+((k&16383)<<14)+c[d]+e;e=(h>>28)+(k>>14)+b*l;c[d++]=h&268435455}return e}function f(a,b){var c=T[a.charCodeAt(b)];return null==c?-1:c}function g(a){var c=b();c.fromInt(a);return c}function h(a){var b=1,c;0!=(c=a>>>16)&&(a=c,b+=16);0!=(c=a>>8)&&(a=c,b+=8);0!=(c=a>>4)&&(a=c,b+=4);0!=(c=a>>2)&&(a=c,b+=2);0!=
a>>1&&(b+=1);return b}function l(a){this.m=a}function n(a){this.m=a;this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function q(a,b){return a&b}function t(a,b){return a|b}function u(a,b){return a^b}function w(a,b){return a&~b}function y(){}function z(a){return a}function E(c){this.r2=b();this.q3=b();a.ONE.dlShiftTo(2*c.t,this.r2);this.mu=this.r2.divide(c);this.m=c}var k={},N=!1;"undefined"!==typeof module&&module.exports?(module.exports=k,N=!0):
"undefined"!==typeof document?window.ClipperLib=k:self.ClipperLib=k;var F;if(N)H="chrome",F="Netscape";else{var H=navigator.userAgent.toString().toLowerCase();F=navigator.appName}var s,G,Q,J,B,C;s=-1!=H.indexOf("chrome")&&-1==H.indexOf("chromium")?1:0;N=-1!=H.indexOf("chromium")?1:0;G=-1!=H.indexOf("safari")&&-1==H.indexOf("chrome")&&-1==H.indexOf("chromium")?1:0;Q=-1!=H.indexOf("firefox")?1:0;H.indexOf("firefox/17");H.indexOf("firefox/15");H.indexOf("firefox/3");J=-1!=H.indexOf("opera")?1:0;H.indexOf("msie 10");
H.indexOf("msie 9");B=-1!=H.indexOf("msie 8")?1:0;C=-1!=H.indexOf("msie 7")?1:0;H=-1!=H.indexOf("msie ")?1:0;k.biginteger_used=null;"Microsoft Internet Explorer"==F?(a.prototype.am=d,F=30):"Netscape"!=F?(a.prototype.am=c,F=26):(a.prototype.am=e,F=28);a.prototype.DB=F;a.prototype.DM=(1<<F)-1;a.prototype.DV=1<<F;a.prototype.FV=Math.pow(2,52);a.prototype.F1=52-F;a.prototype.F2=2*F-52;var T=[],S;F=48;for(S=0;9>=S;++S)T[F++]=S;F=97;for(S=10;36>S;++S)T[F++]=S;F=65;for(S=10;36>S;++S)T[F++]=S;l.prototype.convert=
function(a){return 0>a.s||0<=a.compareTo(this.m)?a.mod(this.m):a};l.prototype.revert=function(a){return a};l.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};l.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};l.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};n.prototype.convert=function(c){var d=b();c.abs().dlShiftTo(this.m.t,d);d.divRemTo(this.m,null,d);0>c.s&&0<d.compareTo(a.ZERO)&&this.m.subTo(d,d);return d};n.prototype.revert=function(a){var c=b();a.copyTo(c);
this.reduce(c);return c};n.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a[b]&32767,d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM,c=b+this.m.t;for(a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};n.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};n.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};a.prototype.copyTo=
function(a){for(var b=this.t-1;0<=b;--b)a[b]=this[b];a.t=this.t;a.s=this.s};a.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+this.DV:this.t=0};a.prototype.fromString=function(b,c){var d;if(16==c)d=4;else if(8==c)d=3;else if(256==c)d=8;else if(2==c)d=1;else if(32==c)d=5;else if(4==c)d=2;else{this.fromRadix(b,c);return}this.s=this.t=0;for(var e=b.length,g=!1,h=0;0<=--e;){var l=8==d?b[e]&255:f(b,e);0>l?"-"==b.charAt(e)&&(g=!0):(g=!1,0==h?this[this.t++]=l:h+d>this.DB?
(this[this.t-1]|=(l&(1<<this.DB-h)-1)<<h,this[this.t++]=l>>this.DB-h):this[this.t-1]|=l<<h,h+=d,h>=this.DB&&(h-=this.DB))}8==d&&0!=(b[0]&128)&&(this.s=-1,0<h&&(this[this.t-1]|=(1<<this.DB-h)-1<<h));this.clamp();g&&a.ZERO.subTo(this,this)};a.prototype.clamp=function(){for(var a=this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};a.prototype.dlShiftTo=function(a,b){var c;for(c=this.t-1;0<=c;--c)b[c+a]=this[c];for(c=a-1;0<=c;--c)b[c]=0;b.t=this.t+a;b.s=this.s};a.prototype.drShiftTo=function(a,b){for(var c=
a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0);b.s=this.s};a.prototype.lShiftTo=function(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,f=Math.floor(a/this.DB),g=this.s<<c&this.DM,h;for(h=this.t-1;0<=h;--h)b[h+f+1]=this[h]>>d|g,g=(this[h]&e)<<c;for(h=f-1;0<=h;--h)b[h]=0;b[f]=g;b.t=this.t+f+1;b.s=this.s;b.clamp()};a.prototype.rShiftTo=function(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)b.t=0;else{var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-
c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;0<d&&(b[this.t-c-1]|=(this.s&f)<<e);b.t=this.t-c;b.clamp()}};a.prototype.subTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0;-1>d?b[c++]=this.DV+d:0<d&&(b[c++]=d);b.t=c;b.clamp()};a.prototype.multiplyTo=function(b,c){var d=this.abs(),e=
b.abs(),f=d.t;for(c.t=f+e.t;0<=--f;)c[f]=0;for(f=0;f<e.t;++f)c[f+d.t]=d.am(0,e[f],c,f,0,d.t);c.s=0;c.clamp();this.s!=b.s&&a.ZERO.subTo(c,c)};a.prototype.squareTo=function(a){for(var b=this.abs(),c=a.t=2*b.t;0<=--c;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}0<a.t&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1));a.s=0;a.clamp()};a.prototype.divRemTo=function(c,d,e){var f=c.abs();if(!(0>=f.t)){var g=this.abs();if(g.t<
f.t)null!=d&&d.fromInt(0),null!=e&&this.copyTo(e);else{null==e&&(e=b());var l=b(),k=this.s;c=c.s;var n=this.DB-h(f[f.t-1]);0<n?(f.lShiftTo(n,l),g.lShiftTo(n,e)):(f.copyTo(l),g.copyTo(e));f=l.t;g=l[f-1];if(0!=g){var q=g*(1<<this.F1)+(1<f?l[f-2]>>this.F2:0),t=this.FV/q,q=(1<<this.F1)/q,s=1<<this.F2,u=e.t,w=u-f,y=null==d?b():d;l.dlShiftTo(w,y);0<=e.compareTo(y)&&(e[e.t++]=1,e.subTo(y,e));a.ONE.dlShiftTo(f,y);for(y.subTo(l,l);l.t<f;)l[l.t++]=0;for(;0<=--w;){var z=e[--u]==g?this.DM:Math.floor(e[u]*t+(e[u-
1]+s)*q);if((e[u]+=l.am(0,z,e,w,0,f))<z)for(l.dlShiftTo(w,y),e.subTo(y,e);e[u]<--z;)e.subTo(y,e)}null!=d&&(e.drShiftTo(f,d),k!=c&&a.ZERO.subTo(d,d));e.t=f;e.clamp();0<n&&e.rShiftTo(n,e);0>k&&a.ZERO.subTo(e,e)}}}};a.prototype.invDigit=function(){if(1>this.t)return 0;var a=this[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return 0<b?this.DV-b:-b};a.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};
a.prototype.exp=function(c,d){if(4294967295<c||1>c)return a.ONE;var e=b(),f=b(),g=d.convert(this),l=h(c)-1;for(g.copyTo(e);0<=--l;)if(d.sqrTo(e,f),0<(c&1<<l))d.mulTo(f,g,e);else var k=e,e=f,f=k;return d.revert(e)};a.prototype.toString=function(a){if(0>this.s)return"-"+this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var b=(1<<a)-1,c,d=!1,e="",f=this.t,g=this.DB-f*this.DB%a;if(0<f--)for(g<this.DB&&0<(c=this[f]>>
g)&&(d=!0,e="0123456789abcdefghijklmnopqrstuvwxyz".charAt(c));0<=f;)g<a?(c=(this[f]&(1<<g)-1)<<a-g,c|=this[--f]>>(g+=this.DB-a)):(c=this[f]>>(g-=a)&b,0>=g&&(g+=this.DB,--f)),0<c&&(d=!0),d&&(e+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(c));return d?e:"0"};a.prototype.negate=function(){var c=b();a.ZERO.subTo(this,c);return c};a.prototype.abs=function(){return 0>this.s?this.negate():this};a.prototype.compareTo=function(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t,b=c-a.t;if(0!=b)return 0>this.s?
-b:b;for(;0<=--c;)if(0!=(b=this[c]-a[c]))return b;return 0};a.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+h(this[this.t-1]^this.s&this.DM)};a.prototype.mod=function(c){var d=b();this.abs().divRemTo(c,null,d);0>this.s&&0<d.compareTo(a.ZERO)&&c.subTo(d,d);return d};a.prototype.modPowInt=function(a,b){var c;c=256>a||b.isEven()?new l(b):new n(b);return this.exp(a,c)};a.ZERO=g(0);a.ONE=g(1);y.prototype.convert=z;y.prototype.revert=z;y.prototype.mulTo=function(a,b,c){a.multiplyTo(b,
c)};y.prototype.sqrTo=function(a,b){a.squareTo(b)};E.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var c=b();a.copyTo(c);this.reduce(c);return c};E.prototype.revert=function(a){return a};E.prototype.reduce=function(a){a.drShiftTo(this.m.t-1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,
this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};E.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};E.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};var R=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,
409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],X=67108864/R[R.length-1];a.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};a.prototype.toRadix=function(a){null==
a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";var c=this.chunkSize(a),c=Math.pow(a,c),d=g(c),e=b(),f=b(),h="";for(this.divRemTo(d,e,f);0<e.signum();)h=(c+f.intValue()).toString(a).substr(1)+h,e.divRemTo(d,e,f);return f.intValue().toString(a)+h};a.prototype.fromRadix=function(b,c){this.fromInt(0);null==c&&(c=10);for(var d=this.chunkSize(c),e=Math.pow(c,d),g=!1,h=0,l=0,k=0;k<b.length;++k){var n=f(b,k);0>n?"-"==b.charAt(k)&&0==this.signum()&&(g=!0):(l=c*l+n,++h>=d&&(this.dMultiply(e),this.dAddOffset(l,
0),l=h=0))}0<h&&(this.dMultiply(Math.pow(c,h)),this.dAddOffset(l,0));g&&a.ZERO.subTo(this,this)};a.prototype.fromNumber=function(b,c,d){if("number"==typeof c)if(2>b)this.fromInt(1);else for(this.fromNumber(b,d),this.testBit(b-1)||this.bitwiseTo(a.ONE.shiftLeft(b-1),t,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(c);)this.dAddOffset(2,0),this.bitLength()>b&&this.subTo(a.ONE.shiftLeft(b-1),this);else{d=[];var e=b&7;d.length=(b>>3)+1;c.nextBytes(d);d[0]=0<e?d[0]&(1<<e)-1:0;this.fromString(d,
256)}};a.prototype.bitwiseTo=function(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){e=a.s&this.DM;for(d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{e=this.s&this.DM;for(d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s);c.clamp()};a.prototype.changeBit=function(b,c){var d=a.ONE.shiftLeft(b);this.bitwiseTo(d,c,d);return d};a.prototype.addTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<
this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0;0<d?b[c++]=d:-1>d&&(b[c++]=this.DV+d);b.t=c;b.clamp()};a.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};a.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}};a.prototype.multiplyLowerTo=
function(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0;for(c.t=d;0<d;)c[--d]=0;var e;for(e=c.t-this.t;d<e;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);d<e;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()};a.prototype.multiplyUpperTo=function(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;0<=--d;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp();c.drShiftTo(1,c)};a.prototype.modInt=function(a){if(0>=a)return 0;var b=this.DV%a,c=0>this.s?a-
1:0;if(0<this.t)if(0==b)c=this[0]%a;else for(var d=this.t-1;0<=d;--d)c=(b*c+this[d])%a;return c};a.prototype.millerRabin=function(c){var d=this.subtract(a.ONE),e=d.getLowestSetBit();if(0>=e)return!1;var f=d.shiftRight(e);c=c+1>>1;c>R.length&&(c=R.length);for(var g=b(),h=0;h<c;++h){g.fromInt(R[Math.floor(Math.random()*R.length)]);var l=g.modPow(f,this);if(0!=l.compareTo(a.ONE)&&0!=l.compareTo(d)){for(var k=1;k++<e&&0!=l.compareTo(d);)if(l=l.modPowInt(2,this),0==l.compareTo(a.ONE))return!1;if(0!=l.compareTo(d))return!1}}return!0};
a.prototype.clone=function(){var a=b();this.copyTo(a);return a};a.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};a.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};a.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};a.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?
0:1};a.prototype.toByteArray=function(){var a=this.t,b=[];b[0]=this.s;var c=this.DB-a*this.DB%8,d,e=0;if(0<a--)for(c<this.DB&&(d=this[a]>>c)!=(this.s&this.DM)>>c&&(b[e++]=d|this.s<<this.DB-c);0<=a;)if(8>c?(d=(this[a]&(1<<c)-1)<<8-c,d|=this[--a]>>(c+=this.DB-8)):(d=this[a]>>(c-=8)&255,0>=c&&(c+=this.DB,--a)),0!=(d&128)&&(d|=-256),0==e&&(this.s&128)!=(d&128)&&++e,0<e||d!=this.s)b[e++]=d;return b};a.prototype.equals=function(a){return 0==this.compareTo(a)};a.prototype.min=function(a){return 0>this.compareTo(a)?
this:a};a.prototype.max=function(a){return 0<this.compareTo(a)?this:a};a.prototype.and=function(a){var c=b();this.bitwiseTo(a,q,c);return c};a.prototype.or=function(a){var c=b();this.bitwiseTo(a,t,c);return c};a.prototype.xor=function(a){var c=b();this.bitwiseTo(a,u,c);return c};a.prototype.andNot=function(a){var c=b();this.bitwiseTo(a,w,c);return c};a.prototype.not=function(){for(var a=b(),c=0;c<this.t;++c)a[c]=this.DM&~this[c];a.t=this.t;a.s=~this.s;return a};a.prototype.shiftLeft=function(a){var c=
b();0>a?this.rShiftTo(-a,c):this.lShiftTo(a,c);return c};a.prototype.shiftRight=function(a){var c=b();0>a?this.lShiftTo(-a,c):this.rShiftTo(a,c);return c};a.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var b=a*this.DB;a=this[a];if(0==a)a=-1;else{var c=0;0==(a&65535)&&(a>>=16,c+=16);0==(a&255)&&(a>>=8,c+=8);0==(a&15)&&(a>>=4,c+=4);0==(a&3)&&(a>>=2,c+=2);0==(a&1)&&++c;a=c}return b+a}return 0>this.s?this.t*this.DB:-1};a.prototype.bitCount=function(){for(var a=0,b=this.s&
this.DM,c=0;c<this.t;++c){for(var d=this[c]^b,e=0;0!=d;)d&=d-1,++e;a+=e}return a};a.prototype.testBit=function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)};a.prototype.setBit=function(a){return this.changeBit(a,t)};a.prototype.clearBit=function(a){return this.changeBit(a,w)};a.prototype.flipBit=function(a){return this.changeBit(a,u)};a.prototype.add=function(a){var c=b();this.addTo(a,c);return c};a.prototype.subtract=function(a){var c=b();this.subTo(a,c);return c};
a.prototype.multiply=function(a){var c=b();this.multiplyTo(a,c);return c};a.prototype.divide=function(a){var c=b();this.divRemTo(a,c,null);return c};a.prototype.remainder=function(a){var c=b();this.divRemTo(a,null,c);return c};a.prototype.divideAndRemainder=function(a){var c=b(),d=b();this.divRemTo(a,c,d);return[c,d]};a.prototype.modPow=function(a,c){var d=a.bitLength(),e,f=g(1),k;if(0>=d)return f;e=18>d?1:48>d?3:144>d?4:768>d?5:6;k=8>d?new l(c):c.isEven()?new E(c):new n(c);var q=[],t=3,s=e-1,u=(1<<
e)-1;q[1]=k.convert(this);if(1<e)for(d=b(),k.sqrTo(q[1],d);t<=u;)q[t]=b(),k.mulTo(d,q[t-2],q[t]),t+=2;for(var w=a.t-1,y,z=!0,F=b(),d=h(a[w])-1;0<=w;){d>=s?y=a[w]>>d-s&u:(y=(a[w]&(1<<d+1)-1)<<s-d,0<w&&(y|=a[w-1]>>this.DB+d-s));for(t=e;0==(y&1);)y>>=1,--t;0>(d-=t)&&(d+=this.DB,--w);if(z)q[y].copyTo(f),z=!1;else{for(;1<t;)k.sqrTo(f,F),k.sqrTo(F,f),t-=2;0<t?k.sqrTo(f,F):(t=f,f=F,F=t);k.mulTo(F,q[y],f)}for(;0<=w&&0==(a[w]&1<<d);)k.sqrTo(f,F),t=f,f=F,F=t,0>--d&&(d=this.DB-1,--w)}return k.revert(f)};a.prototype.modInverse=
function(b){var c=b.isEven();if(this.isEven()&&c||0==b.signum())return a.ZERO;for(var d=b.clone(),e=this.clone(),f=g(1),h=g(0),l=g(0),k=g(1);0!=d.signum();){for(;d.isEven();)d.rShiftTo(1,d),c?(f.isEven()&&h.isEven()||(f.addTo(this,f),h.subTo(b,h)),f.rShiftTo(1,f)):h.isEven()||h.subTo(b,h),h.rShiftTo(1,h);for(;e.isEven();)e.rShiftTo(1,e),c?(l.isEven()&&k.isEven()||(l.addTo(this,l),k.subTo(b,k)),l.rShiftTo(1,l)):k.isEven()||k.subTo(b,k),k.rShiftTo(1,k);0<=d.compareTo(e)?(d.subTo(e,d),c&&f.subTo(l,f),
h.subTo(k,h)):(e.subTo(d,e),c&&l.subTo(f,l),k.subTo(h,k))}if(0!=e.compareTo(a.ONE))return a.ZERO;if(0<=k.compareTo(b))return k.subtract(b);if(0>k.signum())k.addTo(b,k);else return k;return 0>k.signum()?k.add(b):k};a.prototype.pow=function(a){return this.exp(a,new y)};a.prototype.gcd=function(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>b.compareTo(a)){var c=b,b=a;a=c}var c=b.getLowestSetBit(),d=a.getLowestSetBit();if(0>d)return b;c<d&&(d=c);0<d&&(b.rShiftTo(d,b),
a.rShiftTo(d,a));for(;0<b.signum();)0<(c=b.getLowestSetBit())&&b.rShiftTo(c,b),0<(c=a.getLowestSetBit())&&a.rShiftTo(c,a),0<=b.compareTo(a)?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));0<d&&a.lShiftTo(d,a);return a};a.prototype.isProbablePrime=function(a){var b,c=this.abs();if(1==c.t&&c[0]<=R[R.length-1]){for(b=0;b<R.length;++b)if(c[0]==R[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<R.length;){for(var d=R[b],e=b+1;e<R.length&&d<X;)d*=R[e++];for(d=c.modInt(d);b<e;)if(0==d%
R[b++])return!1}return c.millerRabin(a)};a.prototype.square=function(){var a=b();this.squareTo(a);return a};a.prototype.IsNegative=function(){return-1==this.compareTo(a.ZERO)?!0:!1};a.op_Equality=function(a,b){return 0==a.compareTo(b)?!0:!1};a.op_Inequality=function(a,b){return 0!=a.compareTo(b)?!0:!1};a.op_GreaterThan=function(a,b){return 0<a.compareTo(b)?!0:!1};a.op_LessThan=function(a,b){return 0>a.compareTo(b)?!0:!1};a.op_Addition=function(b,c){return(new a(b)).add(new a(c))};a.op_Subtraction=
function(b,c){return(new a(b)).subtract(new a(c))};a.Int128Mul=function(b,c){return(new a(b)).multiply(new a(c))};a.op_Division=function(a,b){return a.divide(b)};a.prototype.ToDouble=function(){return parseFloat(this.toString())};if("undefined"==typeof U)var U=function(a,b){var c;if("undefined"==typeof Object.getOwnPropertyNames)for(c in b.prototype){if("undefined"==typeof a.prototype[c]||a.prototype[c]==Object.prototype[c])a.prototype[c]=b.prototype[c]}else for(var d=Object.getOwnPropertyNames(b.prototype),
e=0;e<d.length;e++)"undefined"==typeof Object.getOwnPropertyDescriptor(a.prototype,d[e])&&Object.defineProperty(a.prototype,d[e],Object.getOwnPropertyDescriptor(b.prototype,d[e]));for(c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);a.$baseCtor=b};k.Path=function(){return[]};k.Paths=function(){return[]};k.DoublePoint=function(){var a=arguments;this.Y=this.X=0;1==a.length?(this.X=a[0].X,this.Y=a[0].Y):2==a.length&&(this.X=a[0],this.Y=a[1])};k.DoublePoint0=function(){this.Y=this.X=0};k.DoublePoint1=function(a){this.X=
a.X;this.Y=a.Y};k.DoublePoint2=function(a,b){this.X=a;this.Y=b};k.PolyNode=function(){this.m_Parent=null;this.m_polygon=new k.Path;this.m_endtype=this.m_jointype=this.m_Index=0;this.m_Childs=[];this.IsOpen=!1};k.PolyNode.prototype.IsHoleNode=function(){for(var a=!0,b=this.m_Parent;null!==b;)a=!a,b=b.m_Parent;return a};k.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length};k.PolyNode.prototype.Contour=function(){return this.m_polygon};k.PolyNode.prototype.AddChild=function(a){var b=
this.m_Childs.length;this.m_Childs.push(a);a.m_Parent=this;a.m_Index=b};k.PolyNode.prototype.GetNext=function(){return 0<this.m_Childs.length?this.m_Childs[0]:this.GetNextSiblingUp()};k.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]};k.PolyNode.prototype.Childs=function(){return this.m_Childs};k.PolyNode.prototype.Parent=function(){return this.m_Parent};
k.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()};k.PolyTree=function(){this.m_AllPolys=[];k.PolyNode.call(this)};k.PolyTree.prototype.Clear=function(){for(var a=0,b=this.m_AllPolys.length;a<b;a++)this.m_AllPolys[a]=null;this.m_AllPolys.length=0;this.m_Childs.length=0};k.PolyTree.prototype.GetFirst=function(){return 0<this.m_Childs.length?this.m_Childs[0]:null};k.PolyTree.prototype.Total=function(){return this.m_AllPolys.length};U(k.PolyTree,k.PolyNode);k.Math_Abs_Int64=k.Math_Abs_Int32=
k.Math_Abs_Double=function(a){return Math.abs(a)};k.Math_Max_Int32_Int32=function(a,b){return Math.max(a,b)};k.Cast_Int32=H||J||G?function(a){return a|0}:function(a){return~~a};k.Cast_Int64=s?function(a){return-2147483648>a||2147483647<a?0>a?Math.ceil(a):Math.floor(a):~~a}:Q&&"function"==typeof Number.toInteger?function(a){return Number.toInteger(a)}:C||B?function(a){return parseInt(a,10)}:H?function(a){return-2147483648>a||2147483647<a?0>a?Math.ceil(a):Math.floor(a):a|0}:function(a){return 0>a?Math.ceil(a):
Math.floor(a)};k.Clear=function(a){a.length=0};k.PI=3.141592653589793;k.PI2=6.283185307179586;k.IntPoint=function(){var a;a=arguments;var b=a.length;this.Y=this.X=0;2==b?(this.X=a[0],this.Y=a[1]):1==b?a[0]instanceof k.DoublePoint?(a=a[0],this.X=k.Clipper.Round(a.X),this.Y=k.Clipper.Round(a.Y)):(a=a[0],this.X=a.X,this.Y=a.Y):this.Y=this.X=0};k.IntPoint.op_Equality=function(a,b){return a.X==b.X&&a.Y==b.Y};k.IntPoint.op_Inequality=function(a,b){return a.X!=b.X||a.Y!=b.Y};k.IntPoint0=function(){this.Y=
this.X=0};k.IntPoint1=function(a){this.X=a.X;this.Y=a.Y};k.IntPoint1dp=function(a){this.X=k.Clipper.Round(a.X);this.Y=k.Clipper.Round(a.Y)};k.IntPoint2=function(a,b){this.X=a;this.Y=b};k.IntRect=function(a){var b=arguments,c=b.length;4==c?(this.left=b[0],this.top=b[1],this.right=b[2],this.bottom=b[3]):1==c?(this.left=a.left,this.top=a.top,this.right=a.right,this.bottom=a.bottom):this.bottom=this.right=this.top=this.left=0};k.IntRect0=function(){this.bottom=this.right=this.top=this.left=0};k.IntRect1=
function(a){this.left=a.left;this.top=a.top;this.right=a.right;this.bottom=a.bottom};k.IntRect4=function(a,b,c,d){this.left=a;this.top=b;this.right=c;this.bottom=d};k.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3};k.PolyType={ptSubject:0,ptClip:1};k.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3};k.JoinType={jtSquare:0,jtRound:1,jtMiter:2};k.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4};k.EdgeSide={esLeft:0,esRight:1};k.Direction=
{dRightToLeft:0,dLeftToRight:1};k.TEdge=function(){this.Bot=new k.IntPoint;this.Curr=new k.IntPoint;this.Top=new k.IntPoint;this.Delta=new k.IntPoint;this.Dx=0;this.PolyTyp=k.PolyType.ptSubject;this.Side=k.EdgeSide.esLeft;this.OutIdx=this.WindCnt2=this.WindCnt=this.WindDelta=0;this.PrevInSEL=this.NextInSEL=this.PrevInAEL=this.NextInAEL=this.NextInLML=this.Prev=this.Next=null};k.IntersectNode=function(){this.Edge2=this.Edge1=null;this.Pt=new k.IntPoint};k.MyIntersectNodeSort=function(){};k.MyIntersectNodeSort.Compare=
function(a,b){return b.Pt.Y-a.Pt.Y};k.LocalMinima=function(){this.Y=0;this.Next=this.RightBound=this.LeftBound=null};k.Scanbeam=function(){this.Y=0;this.Next=null};k.OutRec=function(){this.Idx=0;this.IsOpen=this.IsHole=!1;this.PolyNode=this.BottomPt=this.Pts=this.FirstLeft=null};k.OutPt=function(){this.Idx=0;this.Pt=new k.IntPoint;this.Prev=this.Next=null};k.Join=function(){this.OutPt2=this.OutPt1=null;this.OffPt=new k.IntPoint};k.ClipperBase=function(){this.m_CurrentLM=this.m_MinimaList=null;this.m_edges=
[];this.PreserveCollinear=this.m_HasOpenPaths=this.m_UseFullRange=!1;this.m_CurrentLM=this.m_MinimaList=null;this.m_HasOpenPaths=this.m_UseFullRange=!1};k.ClipperBase.horizontal=-9007199254740992;k.ClipperBase.Skip=-2;k.ClipperBase.Unassigned=-1;k.ClipperBase.tolerance=1E-20;k.ClipperBase.loRange=47453132;k.ClipperBase.hiRange=0xfffffffffffff;k.ClipperBase.near_zero=function(a){return a>-k.ClipperBase.tolerance&&a<k.ClipperBase.tolerance};k.ClipperBase.IsHorizontal=function(a){return 0===a.Delta.Y};
k.ClipperBase.prototype.PointIsVertex=function(a,b){var c=b;do{if(k.IntPoint.op_Equality(c.Pt,a))return!0;c=c.Next}while(c!=b);return!1};k.ClipperBase.prototype.PointOnLineSegment=function(b,c,d,e){return e?b.X==c.X&&b.Y==c.Y||b.X==d.X&&b.Y==d.Y||b.X>c.X==b.X<d.X&&b.Y>c.Y==b.Y<d.Y&&a.op_Equality(a.Int128Mul(b.X-c.X,d.Y-c.Y),a.Int128Mul(d.X-c.X,b.Y-c.Y)):b.X==c.X&&b.Y==c.Y||b.X==d.X&&b.Y==d.Y||b.X>c.X==b.X<d.X&&b.Y>c.Y==b.Y<d.Y&&(b.X-c.X)*(d.Y-c.Y)==(d.X-c.X)*(b.Y-c.Y)};k.ClipperBase.prototype.PointOnPolygon=
function(a,b,c){for(var d=b;;){if(this.PointOnLineSegment(a,d.Pt,d.Next.Pt,c))return!0;d=d.Next;if(d==b)break}return!1};k.ClipperBase.prototype.SlopesEqual=k.ClipperBase.SlopesEqual=function(){var b=arguments,c=b.length,d,e,f;if(3==c)return c=b[0],d=b[1],(b=b[2])?a.op_Equality(a.Int128Mul(c.Delta.Y,d.Delta.X),a.Int128Mul(c.Delta.X,d.Delta.Y)):k.Cast_Int64(c.Delta.Y*d.Delta.X)==k.Cast_Int64(c.Delta.X*d.Delta.Y);if(4==c)return c=b[0],d=b[1],e=b[2],(b=b[3])?a.op_Equality(a.Int128Mul(c.Y-d.Y,d.X-e.X),
a.Int128Mul(c.X-d.X,d.Y-e.Y)):0===k.Cast_Int64((c.Y-d.Y)*(d.X-e.X))-k.Cast_Int64((c.X-d.X)*(d.Y-e.Y));c=b[0];d=b[1];e=b[2];f=b[3];return(b=b[4])?a.op_Equality(a.Int128Mul(c.Y-d.Y,e.X-f.X),a.Int128Mul(c.X-d.X,e.Y-f.Y)):0===k.Cast_Int64((c.Y-d.Y)*(e.X-f.X))-k.Cast_Int64((c.X-d.X)*(e.Y-f.Y))};k.ClipperBase.SlopesEqual3=function(b,c,d){return d?a.op_Equality(a.Int128Mul(b.Delta.Y,c.Delta.X),a.Int128Mul(b.Delta.X,c.Delta.Y)):k.Cast_Int64(b.Delta.Y*c.Delta.X)==k.Cast_Int64(b.Delta.X*c.Delta.Y)};k.ClipperBase.SlopesEqual4=
function(b,c,d,e){return e?a.op_Equality(a.Int128Mul(b.Y-c.Y,c.X-d.X),a.Int128Mul(b.X-c.X,c.Y-d.Y)):0===k.Cast_Int64((b.Y-c.Y)*(c.X-d.X))-k.Cast_Int64((b.X-c.X)*(c.Y-d.Y))};k.ClipperBase.SlopesEqual5=function(b,c,d,e,f){return f?a.op_Equality(a.Int128Mul(b.Y-c.Y,d.X-e.X),a.Int128Mul(b.X-c.X,d.Y-e.Y)):0===k.Cast_Int64((b.Y-c.Y)*(d.X-e.X))-k.Cast_Int64((b.X-c.X)*(d.Y-e.Y))};k.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var a=0,b=this.m_edges.length;a<b;++a){for(var c=0,
d=this.m_edges[a].length;c<d;++c)this.m_edges[a][c]=null;k.Clear(this.m_edges[a])}k.Clear(this.m_edges);this.m_HasOpenPaths=this.m_UseFullRange=!1};k.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var a=this.m_MinimaList.Next;this.m_MinimaList=null;this.m_MinimaList=a}this.m_CurrentLM=null};k.ClipperBase.prototype.RangeTest=function(a,b){if(b.Value)(a.X>k.ClipperBase.hiRange||a.Y>k.ClipperBase.hiRange||-a.X>k.ClipperBase.hiRange||-a.Y>k.ClipperBase.hiRange)&&
k.Error("Coordinate outside allowed range in RangeTest().");else if(a.X>k.ClipperBase.loRange||a.Y>k.ClipperBase.loRange||-a.X>k.ClipperBase.loRange||-a.Y>k.ClipperBase.loRange)b.Value=!0,this.RangeTest(a,b)};k.ClipperBase.prototype.InitEdge=function(a,b,c,d){a.Next=b;a.Prev=c;a.Curr.X=d.X;a.Curr.Y=d.Y;a.OutIdx=-1};k.ClipperBase.prototype.InitEdge2=function(a,b){a.Curr.Y>=a.Next.Curr.Y?(a.Bot.X=a.Curr.X,a.Bot.Y=a.Curr.Y,a.Top.X=a.Next.Curr.X,a.Top.Y=a.Next.Curr.Y):(a.Top.X=a.Curr.X,a.Top.Y=a.Curr.Y,
a.Bot.X=a.Next.Curr.X,a.Bot.Y=a.Next.Curr.Y);this.SetDx(a);a.PolyTyp=b};k.ClipperBase.prototype.FindNextLocMin=function(a){for(var b;;){for(;k.IntPoint.op_Inequality(a.Bot,a.Prev.Bot)||k.IntPoint.op_Equality(a.Curr,a.Top);)a=a.Next;if(a.Dx!=k.ClipperBase.horizontal&&a.Prev.Dx!=k.ClipperBase.horizontal)break;for(;a.Prev.Dx==k.ClipperBase.horizontal;)a=a.Prev;for(b=a;a.Dx==k.ClipperBase.horizontal;)a=a.Next;if(a.Top.Y!=a.Prev.Bot.Y){b.Prev.Bot.X<a.Bot.X&&(a=b);break}}return a};k.ClipperBase.prototype.ProcessBound=
function(a,b){var c=a,d=a,e;a.Dx==k.ClipperBase.horizontal&&(e=b?a.Prev.Bot.X:a.Next.Bot.X,a.Bot.X!=e&&this.ReverseHorizontal(a));if(d.OutIdx!=k.ClipperBase.Skip)if(b){for(;d.Top.Y==d.Next.Bot.Y&&d.Next.OutIdx!=k.ClipperBase.Skip;)d=d.Next;if(d.Dx==k.ClipperBase.horizontal&&d.Next.OutIdx!=k.ClipperBase.Skip){for(e=d;e.Prev.Dx==k.ClipperBase.horizontal;)e=e.Prev;e.Prev.Top.X==d.Next.Top.X?b||(d=e.Prev):e.Prev.Top.X>d.Next.Top.X&&(d=e.Prev)}for(;a!=d;)a.NextInLML=a.Next,a.Dx==k.ClipperBase.horizontal&&
a!=c&&a.Bot.X!=a.Prev.Top.X&&this.ReverseHorizontal(a),a=a.Next;a.Dx==k.ClipperBase.horizontal&&a!=c&&a.Bot.X!=a.Prev.Top.X&&this.ReverseHorizontal(a);d=d.Next}else{for(;d.Top.Y==d.Prev.Bot.Y&&d.Prev.OutIdx!=k.ClipperBase.Skip;)d=d.Prev;if(d.Dx==k.ClipperBase.horizontal&&d.Prev.OutIdx!=k.ClipperBase.Skip){for(e=d;e.Next.Dx==k.ClipperBase.horizontal;)e=e.Next;e.Next.Top.X==d.Prev.Top.X?b||(d=e.Next):e.Next.Top.X>d.Prev.Top.X&&(d=e.Next)}for(;a!=d;)a.NextInLML=a.Prev,a.Dx==k.ClipperBase.horizontal&&
a!=c&&a.Bot.X!=a.Next.Top.X&&this.ReverseHorizontal(a),a=a.Prev;a.Dx==k.ClipperBase.horizontal&&a!=c&&a.Bot.X!=a.Next.Top.X&&this.ReverseHorizontal(a);d=d.Prev}if(d.OutIdx==k.ClipperBase.Skip){a=d;if(b){for(;a.Top.Y==a.Next.Bot.Y;)a=a.Next;for(;a!=d&&a.Dx==k.ClipperBase.horizontal;)a=a.Prev}else{for(;a.Top.Y==a.Prev.Bot.Y;)a=a.Prev;for(;a!=d&&a.Dx==k.ClipperBase.horizontal;)a=a.Next}a==d?d=b?a.Next:a.Prev:(a=b?d.Next:d.Prev,c=new k.LocalMinima,c.Next=null,c.Y=a.Bot.Y,c.LeftBound=null,c.RightBound=
a,c.RightBound.WindDelta=0,d=this.ProcessBound(c.RightBound,b),this.InsertLocalMinima(c))}return d};k.ClipperBase.prototype.AddPath=function(a,b,c){c||b!=k.PolyType.ptClip||k.Error("AddPath: Open paths must be subject.");var d=a.length-1;if(c)for(;0<d&&k.IntPoint.op_Equality(a[d],a[0]);)--d;for(;0<d&&k.IntPoint.op_Equality(a[d],a[d-1]);)--d;if(c&&2>d||!c&&1>d)return!1;for(var e=[],f=0;f<=d;f++)e.push(new k.TEdge);var g=!0;e[1].Curr.X=a[1].X;e[1].Curr.Y=a[1].Y;var h={Value:this.m_UseFullRange};this.RangeTest(a[0],
h);this.m_UseFullRange=h.Value;h.Value=this.m_UseFullRange;this.RangeTest(a[d],h);this.m_UseFullRange=h.Value;this.InitEdge(e[0],e[1],e[d],a[0]);this.InitEdge(e[d],e[0],e[d-1],a[d]);for(f=d-1;1<=f;--f)h.Value=this.m_UseFullRange,this.RangeTest(a[f],h),this.m_UseFullRange=h.Value,this.InitEdge(e[f],e[f+1],e[f-1],a[f]);for(f=a=d=e[0];;)if(k.IntPoint.op_Equality(a.Curr,a.Next.Curr)){if(a==a.Next)break;a==d&&(d=a.Next);f=a=this.RemoveEdge(a)}else{if(a.Prev==a.Next)break;else if(c&&k.ClipperBase.SlopesEqual(a.Prev.Curr,
a.Curr,a.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(a.Prev.Curr,a.Curr,a.Next.Curr))){a==d&&(d=a.Next);a=this.RemoveEdge(a);f=a=a.Prev;continue}a=a.Next;if(a==f)break}if(!c&&a==a.Next||c&&a.Prev==a.Next)return!1;c||(this.m_HasOpenPaths=!0,d.Prev.OutIdx=k.ClipperBase.Skip);a=d;do this.InitEdge2(a,b),a=a.Next,g&&a.Curr.Y!=d.Curr.Y&&(g=!1);while(a!=d);if(g){if(c)return!1;a.Prev.OutIdx=k.ClipperBase.Skip;a.Prev.Bot.X<a.Prev.Top.X&&this.ReverseHorizontal(a.Prev);
b=new k.LocalMinima;b.Next=null;b.Y=a.Bot.Y;b.LeftBound=null;b.RightBound=a;b.RightBound.Side=k.EdgeSide.esRight;for(b.RightBound.WindDelta=0;a.Next.OutIdx!=k.ClipperBase.Skip;)a.NextInLML=a.Next,a.Bot.X!=a.Prev.Top.X&&this.ReverseHorizontal(a),a=a.Next;this.InsertLocalMinima(b);this.m_edges.push(e);return!0}this.m_edges.push(e);for(g=null;;){a=this.FindNextLocMin(a);if(a==g)break;else null==g&&(g=a);b=new k.LocalMinima;b.Next=null;b.Y=a.Bot.Y;a.Dx<a.Prev.Dx?(b.LeftBound=a.Prev,b.RightBound=a,e=!1):
(b.LeftBound=a,b.RightBound=a.Prev,e=!0);b.LeftBound.Side=k.EdgeSide.esLeft;b.RightBound.Side=k.EdgeSide.esRight;b.LeftBound.WindDelta=c?b.LeftBound.Next==b.RightBound?-1:1:0;b.RightBound.WindDelta=-b.LeftBound.WindDelta;a=this.ProcessBound(b.LeftBound,e);d=this.ProcessBound(b.RightBound,!e);b.LeftBound.OutIdx==k.ClipperBase.Skip?b.LeftBound=null:b.RightBound.OutIdx==k.ClipperBase.Skip&&(b.RightBound=null);this.InsertLocalMinima(b);e||(a=d)}return!0};k.ClipperBase.prototype.AddPaths=function(a,b,
c){for(var d=!1,e=0,f=a.length;e<f;++e)this.AddPath(a[e],b,c)&&(d=!0);return d};k.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(a,b,c){return k.IntPoint.op_Equality(a,c)||k.IntPoint.op_Equality(a,b)||k.IntPoint.op_Equality(c,b)?!1:a.X!=c.X?b.X>a.X==b.X<c.X:b.Y>a.Y==b.Y<c.Y};k.ClipperBase.prototype.RemoveEdge=function(a){a.Prev.Next=a.Next;a.Next.Prev=a.Prev;var b=a.Next;a.Prev=null;return b};k.ClipperBase.prototype.SetDx=function(a){a.Delta.X=a.Top.X-a.Bot.X;a.Delta.Y=a.Top.Y-a.Bot.Y;a.Dx=
0===a.Delta.Y?k.ClipperBase.horizontal:a.Delta.X/a.Delta.Y};k.ClipperBase.prototype.InsertLocalMinima=function(a){if(null===this.m_MinimaList)this.m_MinimaList=a;else if(a.Y>=this.m_MinimaList.Y)a.Next=this.m_MinimaList,this.m_MinimaList=a;else{for(var b=this.m_MinimaList;null!==b.Next&&a.Y<b.Next.Y;)b=b.Next;a.Next=b.Next;b.Next=a}};k.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)};k.ClipperBase.prototype.ReverseHorizontal=function(a){var b=
a.Top.X;a.Top.X=a.Bot.X;a.Bot.X=b};k.ClipperBase.prototype.Reset=function(){this.m_CurrentLM=this.m_MinimaList;if(null!=this.m_CurrentLM)for(var a=this.m_MinimaList;null!=a;){var b=a.LeftBound;null!=b&&(b.Curr.X=b.Bot.X,b.Curr.Y=b.Bot.Y,b.Side=k.EdgeSide.esLeft,b.OutIdx=k.ClipperBase.Unassigned);b=a.RightBound;null!=b&&(b.Curr.X=b.Bot.X,b.Curr.Y=b.Bot.Y,b.Side=k.EdgeSide.esRight,b.OutIdx=k.ClipperBase.Unassigned);a=a.Next}};k.Clipper=function(a){"undefined"==typeof a&&(a=0);this.m_PolyOuts=null;this.m_ClipType=
k.ClipType.ctIntersection;this.m_IntersectNodeComparer=this.m_IntersectList=this.m_SortedEdges=this.m_ActiveEdges=this.m_Scanbeam=null;this.m_ExecuteLocked=!1;this.m_SubjFillType=this.m_ClipFillType=k.PolyFillType.pftEvenOdd;this.m_GhostJoins=this.m_Joins=null;this.StrictlySimple=this.ReverseSolution=this.m_UsingPolyTree=!1;k.ClipperBase.call(this);this.m_SortedEdges=this.m_ActiveEdges=this.m_Scanbeam=null;this.m_IntersectList=[];this.m_IntersectNodeComparer=k.MyIntersectNodeSort.Compare;this.m_UsingPolyTree=
this.m_ExecuteLocked=!1;this.m_PolyOuts=[];this.m_Joins=[];this.m_GhostJoins=[];this.ReverseSolution=0!==(1&a);this.StrictlySimple=0!==(2&a);this.PreserveCollinear=0!==(4&a)};k.Clipper.ioReverseSolution=1;k.Clipper.ioStrictlySimple=2;k.Clipper.ioPreserveCollinear=4;k.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),k.ClipperBase.prototype.Clear.call(this))};k.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var a=this.m_Scanbeam.Next;
this.m_Scanbeam=null;this.m_Scanbeam=a}};k.Clipper.prototype.Reset=function(){k.ClipperBase.prototype.Reset.call(this);this.m_SortedEdges=this.m_ActiveEdges=this.m_Scanbeam=null;for(var a=this.m_MinimaList;null!==a;)this.InsertScanbeam(a.Y),a=a.Next};k.Clipper.prototype.InsertScanbeam=function(a){if(null===this.m_Scanbeam)this.m_Scanbeam=new k.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=a;else if(a>this.m_Scanbeam.Y){var b=new k.Scanbeam;b.Y=a;b.Next=this.m_Scanbeam;this.m_Scanbeam=b}else{for(var c=
this.m_Scanbeam;null!==c.Next&&a<=c.Next.Y;)c=c.Next;a!=c.Y&&(b=new k.Scanbeam,b.Y=a,b.Next=c.Next,c.Next=b)}};k.Clipper.prototype.Execute=function(){var a=arguments,b=a.length,c=a[1]instanceof k.PolyTree;if(4!=b||c){if(4==b&&c){var b=a[0],d=a[1],c=a[2],a=a[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0;this.m_SubjFillType=c;this.m_ClipFillType=a;this.m_ClipType=b;this.m_UsingPolyTree=!0;try{(e=this.ExecuteInternal())&&this.BuildResult2(d)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=
!1}return e}if(2==b&&!c||2==b&&c)return b=a[0],d=a[1],this.Execute(b,d,k.PolyFillType.pftEvenOdd,k.PolyFillType.pftEvenOdd)}else{b=a[0];d=a[1];c=a[2];a=a[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&k.Error("Error: PolyTree struct is need for open path clipping.");this.m_ExecuteLocked=!0;k.Clear(d);this.m_SubjFillType=c;this.m_ClipFillType=a;this.m_ClipType=b;this.m_UsingPolyTree=!1;try{var e=this.ExecuteInternal();e&&this.BuildResult(d)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=
!1}return e}};k.Clipper.prototype.FixHoleLinkage=function(a){if(null!==a.FirstLeft&&(a.IsHole==a.FirstLeft.IsHole||null===a.FirstLeft.Pts)){for(var b=a.FirstLeft;null!==b&&(b.IsHole==a.IsHole||null===b.Pts);)b=b.FirstLeft;a.FirstLeft=b}};k.Clipper.prototype.ExecuteInternal=function(){try{this.Reset();if(null===this.m_CurrentLM)return!1;var a=this.PopScanbeam();do{this.InsertLocalMinimaIntoAEL(a);k.Clear(this.m_GhostJoins);this.ProcessHorizontals(!1);if(null===this.m_Scanbeam)break;var b=this.PopScanbeam();
if(!this.ProcessIntersections(a,b))return!1;this.ProcessEdgesAtTopOfScanbeam(b);a=b}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var a=0,c=this.m_PolyOuts.length;a<c;a++){var d=this.m_PolyOuts[a];null===d.Pts||d.IsOpen||(d.IsHole^this.ReverseSolution)==0<this.Area(d)&&this.ReversePolyPtLinks(d.Pts)}this.JoinCommonEdges();a=0;for(c=this.m_PolyOuts.length;a<c;a++)d=this.m_PolyOuts[a],null===d.Pts||d.IsOpen||this.FixupOutPolygon(d);this.StrictlySimple&&this.DoSimplePolygons();return!0}finally{k.Clear(this.m_Joins),
k.Clear(this.m_GhostJoins)}};k.Clipper.prototype.PopScanbeam=function(){var a=this.m_Scanbeam.Y;this.m_Scanbeam=this.m_Scanbeam.Next;return a};k.Clipper.prototype.DisposeAllPolyPts=function(){for(var a=0,b=this.m_PolyOuts.length;a<b;++a)this.DisposeOutRec(a);k.Clear(this.m_PolyOuts)};k.Clipper.prototype.DisposeOutRec=function(a){var b=this.m_PolyOuts[a];null!==b.Pts&&this.DisposeOutPts(b.Pts);this.m_PolyOuts[a]=null};k.Clipper.prototype.DisposeOutPts=function(a){if(null!==a)for(a.Prev.Next=null;null!==
a;)a=a.Next};k.Clipper.prototype.AddJoin=function(a,b,c){var d=new k.Join;d.OutPt1=a;d.OutPt2=b;d.OffPt.X=c.X;d.OffPt.Y=c.Y;this.m_Joins.push(d)};k.Clipper.prototype.AddGhostJoin=function(a,b){var c=new k.Join;c.OutPt1=a;c.OffPt.X=b.X;c.OffPt.Y=b.Y;this.m_GhostJoins.push(c)};k.Clipper.prototype.InsertLocalMinimaIntoAEL=function(a){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==a;){var b=this.m_CurrentLM.LeftBound,c=this.m_CurrentLM.RightBound;this.PopLocalMinima();var d=null;null===b?(this.InsertEdgeIntoAEL(c,
null),this.SetWindingCount(c),this.IsContributing(c)&&(d=this.AddOutPt(c,c.Bot))):(null==c?(this.InsertEdgeIntoAEL(b,null),this.SetWindingCount(b),this.IsContributing(b)&&(d=this.AddOutPt(b,b.Bot))):(this.InsertEdgeIntoAEL(b,null),this.InsertEdgeIntoAEL(c,b),this.SetWindingCount(b),c.WindCnt=b.WindCnt,c.WindCnt2=b.WindCnt2,this.IsContributing(b)&&(d=this.AddLocalMinPoly(b,c,b.Bot))),this.InsertScanbeam(b.Top.Y));null!=c&&(k.ClipperBase.IsHorizontal(c)?this.AddEdgeToSEL(c):this.InsertScanbeam(c.Top.Y));
if(null!=b&&null!=c){if(null!==d&&k.ClipperBase.IsHorizontal(c)&&0<this.m_GhostJoins.length&&0!==c.WindDelta)for(var e=0,f=this.m_GhostJoins.length;e<f;e++){var g=this.m_GhostJoins[e];this.HorzSegmentsOverlap(g.OutPt1.Pt,g.OffPt,c.Bot,c.Top)&&this.AddJoin(g.OutPt1,d,g.OffPt)}0<=b.OutIdx&&null!==b.PrevInAEL&&b.PrevInAEL.Curr.X==b.Bot.X&&0<=b.PrevInAEL.OutIdx&&k.ClipperBase.SlopesEqual(b.PrevInAEL,b,this.m_UseFullRange)&&0!==b.WindDelta&&0!==b.PrevInAEL.WindDelta&&(e=this.AddOutPt(b.PrevInAEL,b.Bot),
this.AddJoin(d,e,b.Top));if(b.NextInAEL!=c&&(0<=c.OutIdx&&0<=c.PrevInAEL.OutIdx&&k.ClipperBase.SlopesEqual(c.PrevInAEL,c,this.m_UseFullRange)&&0!==c.WindDelta&&0!==c.PrevInAEL.WindDelta&&(e=this.AddOutPt(c.PrevInAEL,c.Bot),this.AddJoin(d,e,c.Top)),d=b.NextInAEL,null!==d))for(;d!=c;)this.IntersectEdges(c,d,b.Curr,!1),d=d.NextInAEL}}};k.Clipper.prototype.InsertEdgeIntoAEL=function(a,b){if(null===this.m_ActiveEdges)a.PrevInAEL=null,a.NextInAEL=null,this.m_ActiveEdges=a;else if(null===b&&this.E2InsertsBeforeE1(this.m_ActiveEdges,
a))a.PrevInAEL=null,a.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges=this.m_ActiveEdges.PrevInAEL=a;else{null===b&&(b=this.m_ActiveEdges);for(;null!==b.NextInAEL&&!this.E2InsertsBeforeE1(b.NextInAEL,a);)b=b.NextInAEL;a.NextInAEL=b.NextInAEL;null!==b.NextInAEL&&(b.NextInAEL.PrevInAEL=a);a.PrevInAEL=b;b.NextInAEL=a}};k.Clipper.prototype.E2InsertsBeforeE1=function(a,b){return b.Curr.X==a.Curr.X?b.Top.Y>a.Top.Y?b.Top.X<k.Clipper.TopX(a,b.Top.Y):a.Top.X>k.Clipper.TopX(b,a.Top.Y):b.Curr.X<a.Curr.X};k.Clipper.prototype.IsEvenOddFillType=
function(a){return a.PolyTyp==k.PolyType.ptSubject?this.m_SubjFillType==k.PolyFillType.pftEvenOdd:this.m_ClipFillType==k.PolyFillType.pftEvenOdd};k.Clipper.prototype.IsEvenOddAltFillType=function(a){return a.PolyTyp==k.PolyType.ptSubject?this.m_ClipFillType==k.PolyFillType.pftEvenOdd:this.m_SubjFillType==k.PolyFillType.pftEvenOdd};k.Clipper.prototype.IsContributing=function(a){var b,c;a.PolyTyp==k.PolyType.ptSubject?(b=this.m_SubjFillType,c=this.m_ClipFillType):(b=this.m_ClipFillType,c=this.m_SubjFillType);
switch(b){case k.PolyFillType.pftEvenOdd:if(0===a.WindDelta&&1!=a.WindCnt)return!1;break;case k.PolyFillType.pftNonZero:if(1!=Math.abs(a.WindCnt))return!1;break;case k.PolyFillType.pftPositive:if(1!=a.WindCnt)return!1;break;default:if(-1!=a.WindCnt)return!1}switch(this.m_ClipType){case k.ClipType.ctIntersection:switch(c){case k.PolyFillType.pftEvenOdd:case k.PolyFillType.pftNonZero:return 0!==a.WindCnt2;case k.PolyFillType.pftPositive:return 0<a.WindCnt2;default:return 0>a.WindCnt2}case k.ClipType.ctUnion:switch(c){case k.PolyFillType.pftEvenOdd:case k.PolyFillType.pftNonZero:return 0===
a.WindCnt2;case k.PolyFillType.pftPositive:return 0>=a.WindCnt2;default:return 0<=a.WindCnt2}case k.ClipType.ctDifference:if(a.PolyTyp==k.PolyType.ptSubject)switch(c){case k.PolyFillType.pftEvenOdd:case k.PolyFillType.pftNonZero:return 0===a.WindCnt2;case k.PolyFillType.pftPositive:return 0>=a.WindCnt2;default:return 0<=a.WindCnt2}else switch(c){case k.PolyFillType.pftEvenOdd:case k.PolyFillType.pftNonZero:return 0!==a.WindCnt2;case k.PolyFillType.pftPositive:return 0<a.WindCnt2;default:return 0>
a.WindCnt2}case k.ClipType.ctXor:if(0===a.WindDelta)switch(c){case k.PolyFillType.pftEvenOdd:case k.PolyFillType.pftNonZero:return 0===a.WindCnt2;case k.PolyFillType.pftPositive:return 0>=a.WindCnt2;default:return 0<=a.WindCnt2}}return!0};k.Clipper.prototype.SetWindingCount=function(a){for(var b=a.PrevInAEL;null!==b&&(b.PolyTyp!=a.PolyTyp||0===b.WindDelta);)b=b.PrevInAEL;if(null===b)a.WindCnt=0===a.WindDelta?1:a.WindDelta,a.WindCnt2=0,b=this.m_ActiveEdges;else{if(0===a.WindDelta&&this.m_ClipType!=
k.ClipType.ctUnion)a.WindCnt=1;else if(this.IsEvenOddFillType(a))if(0===a.WindDelta){for(var c=!0,d=b.PrevInAEL;null!==d;)d.PolyTyp==b.PolyTyp&&0!==d.WindDelta&&(c=!c),d=d.PrevInAEL;a.WindCnt=c?0:1}else a.WindCnt=a.WindDelta;else 0>b.WindCnt*b.WindDelta?1<Math.abs(b.WindCnt)?a.WindCnt=0>b.WindDelta*a.WindDelta?b.WindCnt:b.WindCnt+a.WindDelta:a.WindCnt=0===a.WindDelta?1:a.WindDelta:a.WindCnt=0===a.WindDelta?0>b.WindCnt?b.WindCnt-1:b.WindCnt+1:0>b.WindDelta*a.WindDelta?b.WindCnt:b.WindCnt+a.WindDelta;
a.WindCnt2=b.WindCnt2;b=b.NextInAEL}if(this.IsEvenOddAltFillType(a))for(;b!=a;)0!==b.WindDelta&&(a.WindCnt2=0===a.WindCnt2?1:0),b=b.NextInAEL;else for(;b!=a;)a.WindCnt2+=b.WindDelta,b=b.NextInAEL};k.Clipper.prototype.AddEdgeToSEL=function(a){null===this.m_SortedEdges?(this.m_SortedEdges=a,a.PrevInSEL=null,a.NextInSEL=null):(a.NextInSEL=this.m_SortedEdges,a.PrevInSEL=null,this.m_SortedEdges=this.m_SortedEdges.PrevInSEL=a)};k.Clipper.prototype.CopyAELToSEL=function(){var a=this.m_ActiveEdges;for(this.m_SortedEdges=
a;null!==a;)a.PrevInSEL=a.PrevInAEL,a=a.NextInSEL=a.NextInAEL};k.Clipper.prototype.SwapPositionsInAEL=function(a,b){if(a.NextInAEL!=a.PrevInAEL&&b.NextInAEL!=b.PrevInAEL){if(a.NextInAEL==b){var c=b.NextInAEL;null!==c&&(c.PrevInAEL=a);var d=a.PrevInAEL;null!==d&&(d.NextInAEL=b);b.PrevInAEL=d;b.NextInAEL=a;a.PrevInAEL=b;a.NextInAEL=c}else b.NextInAEL==a?(c=a.NextInAEL,null!==c&&(c.PrevInAEL=b),d=b.PrevInAEL,null!==d&&(d.NextInAEL=a),a.PrevInAEL=d,a.NextInAEL=b,b.PrevInAEL=a,b.NextInAEL=c):(c=a.NextInAEL,
d=a.PrevInAEL,a.NextInAEL=b.NextInAEL,null!==a.NextInAEL&&(a.NextInAEL.PrevInAEL=a),a.PrevInAEL=b.PrevInAEL,null!==a.PrevInAEL&&(a.PrevInAEL.NextInAEL=a),b.NextInAEL=c,null!==b.NextInAEL&&(b.NextInAEL.PrevInAEL=b),b.PrevInAEL=d,null!==b.PrevInAEL&&(b.PrevInAEL.NextInAEL=b));null===a.PrevInAEL?this.m_ActiveEdges=a:null===b.PrevInAEL&&(this.m_ActiveEdges=b)}};k.Clipper.prototype.SwapPositionsInSEL=function(a,b){if(null!==a.NextInSEL||null!==a.PrevInSEL)if(null!==b.NextInSEL||null!==b.PrevInSEL){if(a.NextInSEL==
b){var c=b.NextInSEL;null!==c&&(c.PrevInSEL=a);var d=a.PrevInSEL;null!==d&&(d.NextInSEL=b);b.PrevInSEL=d;b.NextInSEL=a;a.PrevInSEL=b;a.NextInSEL=c}else b.NextInSEL==a?(c=a.NextInSEL,null!==c&&(c.PrevInSEL=b),d=b.PrevInSEL,null!==d&&(d.NextInSEL=a),a.PrevInSEL=d,a.NextInSEL=b,b.PrevInSEL=a,b.NextInSEL=c):(c=a.NextInSEL,d=a.PrevInSEL,a.NextInSEL=b.NextInSEL,null!==a.NextInSEL&&(a.NextInSEL.PrevInSEL=a),a.PrevInSEL=b.PrevInSEL,null!==a.PrevInSEL&&(a.PrevInSEL.NextInSEL=a),b.NextInSEL=c,null!==b.NextInSEL&&
(b.NextInSEL.PrevInSEL=b),b.PrevInSEL=d,null!==b.PrevInSEL&&(b.PrevInSEL.NextInSEL=b));null===a.PrevInSEL?this.m_SortedEdges=a:null===b.PrevInSEL&&(this.m_SortedEdges=b)}};k.Clipper.prototype.AddLocalMaxPoly=function(a,b,c){this.AddOutPt(a,c);0==b.WindDelta&&this.AddOutPt(b,c);a.OutIdx==b.OutIdx?(a.OutIdx=-1,b.OutIdx=-1):a.OutIdx<b.OutIdx?this.AppendPolygon(a,b):this.AppendPolygon(b,a)};k.Clipper.prototype.AddLocalMinPoly=function(a,b,c){var d,e;k.ClipperBase.IsHorizontal(b)||a.Dx>b.Dx?(d=this.AddOutPt(a,
c),b.OutIdx=a.OutIdx,a.Side=k.EdgeSide.esLeft,b.Side=k.EdgeSide.esRight,e=a,a=e.PrevInAEL==b?b.PrevInAEL:e.PrevInAEL):(d=this.AddOutPt(b,c),a.OutIdx=b.OutIdx,a.Side=k.EdgeSide.esRight,b.Side=k.EdgeSide.esLeft,e=b,a=e.PrevInAEL==a?a.PrevInAEL:e.PrevInAEL);null!==a&&0<=a.OutIdx&&k.Clipper.TopX(a,c.Y)==k.Clipper.TopX(e,c.Y)&&k.ClipperBase.SlopesEqual(e,a,this.m_UseFullRange)&&0!==e.WindDelta&&0!==a.WindDelta&&(c=this.AddOutPt(a,c),this.AddJoin(d,c,e.Top));return d};k.Clipper.prototype.CreateOutRec=function(){var a=
new k.OutRec;a.Idx=-1;a.IsHole=!1;a.IsOpen=!1;a.FirstLeft=null;a.Pts=null;a.BottomPt=null;a.PolyNode=null;this.m_PolyOuts.push(a);a.Idx=this.m_PolyOuts.length-1;return a};k.Clipper.prototype.AddOutPt=function(a,b){var c=a.Side==k.EdgeSide.esLeft;if(0>a.OutIdx){var d=this.CreateOutRec();d.IsOpen=0===a.WindDelta;var e=new k.OutPt;d.Pts=e;e.Idx=d.Idx;e.Pt.X=b.X;e.Pt.Y=b.Y;e.Next=e;e.Prev=e;d.IsOpen||this.SetHoleState(a,d);a.OutIdx=d.Idx}else{var d=this.m_PolyOuts[a.OutIdx],f=d.Pts;if(c&&k.IntPoint.op_Equality(b,
f.Pt))return f;if(!c&&k.IntPoint.op_Equality(b,f.Prev.Pt))return f.Prev;e=new k.OutPt;e.Idx=d.Idx;e.Pt.X=b.X;e.Pt.Y=b.Y;e.Next=f;e.Prev=f.Prev;e.Prev.Next=e;f.Prev=e;c&&(d.Pts=e)}return e};k.Clipper.prototype.SwapPoints=function(a,b){var c=new k.IntPoint(a.Value);a.Value.X=b.Value.X;a.Value.Y=b.Value.Y;b.Value.X=c.X;b.Value.Y=c.Y};k.Clipper.prototype.HorzSegmentsOverlap=function(a,b,c,d){return a.X>c.X==a.X<d.X?!0:b.X>c.X==b.X<d.X?!0:c.X>a.X==c.X<b.X?!0:d.X>a.X==d.X<b.X?!0:a.X==c.X&&b.X==d.X?!0:a.X==
d.X&&b.X==c.X?!0:!1};k.Clipper.prototype.InsertPolyPtBetween=function(a,b,c){var d=new k.OutPt;d.Pt.X=c.X;d.Pt.Y=c.Y;b==a.Next?(a.Next=d,b.Prev=d,d.Next=b,d.Prev=a):(b.Next=d,a.Prev=d,d.Next=a,d.Prev=b);return d};k.Clipper.prototype.SetHoleState=function(a,b){for(var c=!1,d=a.PrevInAEL;null!==d;)0<=d.OutIdx&&0!=d.WindDelta&&(c=!c,null===b.FirstLeft&&(b.FirstLeft=this.m_PolyOuts[d.OutIdx])),d=d.PrevInAEL;c&&(b.IsHole=!0)};k.Clipper.prototype.GetDx=function(a,b){return a.Y==b.Y?k.ClipperBase.horizontal:
(b.X-a.X)/(b.Y-a.Y)};k.Clipper.prototype.FirstIsBottomPt=function(a,b){for(var c=a.Prev;k.IntPoint.op_Equality(c.Pt,a.Pt)&&c!=a;)c=c.Prev;for(var d=Math.abs(this.GetDx(a.Pt,c.Pt)),c=a.Next;k.IntPoint.op_Equality(c.Pt,a.Pt)&&c!=a;)c=c.Next;for(var e=Math.abs(this.GetDx(a.Pt,c.Pt)),c=b.Prev;k.IntPoint.op_Equality(c.Pt,b.Pt)&&c!=b;)c=c.Prev;for(var f=Math.abs(this.GetDx(b.Pt,c.Pt)),c=b.Next;k.IntPoint.op_Equality(c.Pt,b.Pt)&&c!=b;)c=c.Next;c=Math.abs(this.GetDx(b.Pt,c.Pt));return d>=f&&d>=c||e>=f&&e>=
c};k.Clipper.prototype.GetBottomPt=function(a){for(var b=null,c=a.Next;c!=a;)c.Pt.Y>a.Pt.Y?(a=c,b=null):c.Pt.Y==a.Pt.Y&&c.Pt.X<=a.Pt.X&&(c.Pt.X<a.Pt.X?(b=null,a=c):c.Next!=a&&c.Prev!=a&&(b=c)),c=c.Next;if(null!==b)for(;b!=c;)for(this.FirstIsBottomPt(c,b)||(a=b),b=b.Next;k.IntPoint.op_Inequality(b.Pt,a.Pt);)b=b.Next;return a};k.Clipper.prototype.GetLowermostRec=function(a,b){null===a.BottomPt&&(a.BottomPt=this.GetBottomPt(a.Pts));null===b.BottomPt&&(b.BottomPt=this.GetBottomPt(b.Pts));var c=a.BottomPt,
d=b.BottomPt;return c.Pt.Y>d.Pt.Y?a:c.Pt.Y<d.Pt.Y?b:c.Pt.X<d.Pt.X?a:c.Pt.X>d.Pt.X?b:c.Next==c?b:d.Next==d?a:this.FirstIsBottomPt(c,d)?a:b};k.Clipper.prototype.Param1RightOfParam2=function(a,b){do if(a=a.FirstLeft,a==b)return!0;while(null!==a);return!1};k.Clipper.prototype.GetOutRec=function(a){for(a=this.m_PolyOuts[a];a!=this.m_PolyOuts[a.Idx];)a=this.m_PolyOuts[a.Idx];return a};k.Clipper.prototype.AppendPolygon=function(a,b){var c=this.m_PolyOuts[a.OutIdx],d=this.m_PolyOuts[b.OutIdx],e;e=this.Param1RightOfParam2(c,
d)?d:this.Param1RightOfParam2(d,c)?c:this.GetLowermostRec(c,d);var f=c.Pts,g=f.Prev,h=d.Pts,l=h.Prev;a.Side==k.EdgeSide.esLeft?(b.Side==k.EdgeSide.esLeft?(this.ReversePolyPtLinks(h),h.Next=f,f.Prev=h,g.Next=l,l.Prev=g,c.Pts=l):(l.Next=f,f.Prev=l,h.Prev=g,g.Next=h,c.Pts=h),f=k.EdgeSide.esLeft):(b.Side==k.EdgeSide.esRight?(this.ReversePolyPtLinks(h),g.Next=l,l.Prev=g,h.Next=f,f.Prev=h):(g.Next=h,h.Prev=g,f.Prev=l,l.Next=f),f=k.EdgeSide.esRight);c.BottomPt=null;e==d&&(d.FirstLeft!=c&&(c.FirstLeft=d.FirstLeft),
c.IsHole=d.IsHole);d.Pts=null;d.BottomPt=null;d.FirstLeft=c;e=a.OutIdx;g=b.OutIdx;a.OutIdx=-1;b.OutIdx=-1;for(h=this.m_ActiveEdges;null!==h;){if(h.OutIdx==g){h.OutIdx=e;h.Side=f;break}h=h.NextInAEL}d.Idx=c.Idx};k.Clipper.prototype.ReversePolyPtLinks=function(a){if(null!==a){var b,c;b=a;do c=b.Next,b.Next=b.Prev,b=b.Prev=c;while(b!=a)}};k.Clipper.SwapSides=function(a,b){var c=a.Side;a.Side=b.Side;b.Side=c};k.Clipper.SwapPolyIndexes=function(a,b){var c=a.OutIdx;a.OutIdx=b.OutIdx;b.OutIdx=c};k.Clipper.prototype.IntersectEdges=
function(a,b,c,d){var e=!d&&null===a.NextInLML&&a.Top.X==c.X&&a.Top.Y==c.Y;d=!d&&null===b.NextInLML&&b.Top.X==c.X&&b.Top.Y==c.Y;var f=0<=a.OutIdx,g=0<=b.OutIdx;if(0===a.WindDelta||0===b.WindDelta)0===a.WindDelta&&0===b.WindDelta?(e||d)&&f&&g&&this.AddLocalMaxPoly(a,b,c):a.PolyTyp==b.PolyTyp&&a.WindDelta!=b.WindDelta&&this.m_ClipType==k.ClipType.ctUnion?0===a.WindDelta?g&&(this.AddOutPt(a,c),f&&(a.OutIdx=-1)):f&&(this.AddOutPt(b,c),g&&(b.OutIdx=-1)):a.PolyTyp!=b.PolyTyp&&(0!==a.WindDelta||1!=Math.abs(b.WindCnt)||
this.m_ClipType==k.ClipType.ctUnion&&0!==b.WindCnt2?0!==b.WindDelta||1!=Math.abs(a.WindCnt)||this.m_ClipType==k.ClipType.ctUnion&&0!==a.WindCnt2||(this.AddOutPt(b,c),g&&(b.OutIdx=-1)):(this.AddOutPt(a,c),f&&(a.OutIdx=-1))),e&&(0>a.OutIdx?this.DeleteFromAEL(a):k.Error("Error intersecting polylines")),d&&(0>b.OutIdx?this.DeleteFromAEL(b):k.Error("Error intersecting polylines"));else{if(a.PolyTyp==b.PolyTyp)if(this.IsEvenOddFillType(a)){var h=a.WindCnt;a.WindCnt=b.WindCnt;b.WindCnt=h}else a.WindCnt=
0===a.WindCnt+b.WindDelta?-a.WindCnt:a.WindCnt+b.WindDelta,b.WindCnt=0===b.WindCnt-a.WindDelta?-b.WindCnt:b.WindCnt-a.WindDelta;else this.IsEvenOddFillType(b)?a.WindCnt2=0===a.WindCnt2?1:0:a.WindCnt2+=b.WindDelta,this.IsEvenOddFillType(a)?b.WindCnt2=0===b.WindCnt2?1:0:b.WindCnt2-=a.WindDelta;var l,n,q;a.PolyTyp==k.PolyType.ptSubject?(l=this.m_SubjFillType,q=this.m_ClipFillType):(l=this.m_ClipFillType,q=this.m_SubjFillType);b.PolyTyp==k.PolyType.ptSubject?(n=this.m_SubjFillType,h=this.m_ClipFillType):
(n=this.m_ClipFillType,h=this.m_SubjFillType);switch(l){case k.PolyFillType.pftPositive:l=a.WindCnt;break;case k.PolyFillType.pftNegative:l=-a.WindCnt;break;default:l=Math.abs(a.WindCnt)}switch(n){case k.PolyFillType.pftPositive:n=b.WindCnt;break;case k.PolyFillType.pftNegative:n=-b.WindCnt;break;default:n=Math.abs(b.WindCnt)}if(f&&g)e||d||0!==l&&1!=l||0!==n&&1!=n||a.PolyTyp!=b.PolyTyp&&this.m_ClipType!=k.ClipType.ctXor?this.AddLocalMaxPoly(a,b,c):(this.AddOutPt(a,c),this.AddOutPt(b,c),k.Clipper.SwapSides(a,
b),k.Clipper.SwapPolyIndexes(a,b));else if(f){if(0===n||1==n)this.AddOutPt(a,c),k.Clipper.SwapSides(a,b),k.Clipper.SwapPolyIndexes(a,b)}else if(g){if(0===l||1==l)this.AddOutPt(b,c),k.Clipper.SwapSides(a,b),k.Clipper.SwapPolyIndexes(a,b)}else if(!(0!==l&&1!=l||0!==n&&1!=n||e||d)){switch(q){case k.PolyFillType.pftPositive:f=a.WindCnt2;break;case k.PolyFillType.pftNegative:f=-a.WindCnt2;break;default:f=Math.abs(a.WindCnt2)}switch(h){case k.PolyFillType.pftPositive:g=b.WindCnt2;break;case k.PolyFillType.pftNegative:g=
-b.WindCnt2;break;default:g=Math.abs(b.WindCnt2)}if(a.PolyTyp!=b.PolyTyp)this.AddLocalMinPoly(a,b,c);else if(1==l&&1==n)switch(this.m_ClipType){case k.ClipType.ctIntersection:0<f&&0<g&&this.AddLocalMinPoly(a,b,c);break;case k.ClipType.ctUnion:0>=f&&0>=g&&this.AddLocalMinPoly(a,b,c);break;case k.ClipType.ctDifference:(a.PolyTyp==k.PolyType.ptClip&&0<f&&0<g||a.PolyTyp==k.PolyType.ptSubject&&0>=f&&0>=g)&&this.AddLocalMinPoly(a,b,c);break;case k.ClipType.ctXor:this.AddLocalMinPoly(a,b,c)}else k.Clipper.SwapSides(a,
b)}e!=d&&(e&&0<=a.OutIdx||d&&0<=b.OutIdx)&&(k.Clipper.SwapSides(a,b),k.Clipper.SwapPolyIndexes(a,b));e&&this.DeleteFromAEL(a);d&&this.DeleteFromAEL(b)}};k.Clipper.prototype.DeleteFromAEL=function(a){var b=a.PrevInAEL,c=a.NextInAEL;if(null!==b||null!==c||a==this.m_ActiveEdges)null!==b?b.NextInAEL=c:this.m_ActiveEdges=c,null!==c&&(c.PrevInAEL=b),a.NextInAEL=null,a.PrevInAEL=null};k.Clipper.prototype.DeleteFromSEL=function(a){var b=a.PrevInSEL,c=a.NextInSEL;if(null!==b||null!==c||a==this.m_SortedEdges)null!==
b?b.NextInSEL=c:this.m_SortedEdges=c,null!==c&&(c.PrevInSEL=b),a.NextInSEL=null,a.PrevInSEL=null};k.Clipper.prototype.UpdateEdgeIntoAEL=function(a){null===a.NextInLML&&k.Error("UpdateEdgeIntoAEL: invalid call");var b=a.PrevInAEL,c=a.NextInAEL;a.NextInLML.OutIdx=a.OutIdx;null!==b?b.NextInAEL=a.NextInLML:this.m_ActiveEdges=a.NextInLML;null!==c&&(c.PrevInAEL=a.NextInLML);a.NextInLML.Side=a.Side;a.NextInLML.WindDelta=a.WindDelta;a.NextInLML.WindCnt=a.WindCnt;a.NextInLML.WindCnt2=a.WindCnt2;a=a.NextInLML;
a.Curr.X=a.Bot.X;a.Curr.Y=a.Bot.Y;a.PrevInAEL=b;a.NextInAEL=c;k.ClipperBase.IsHorizontal(a)||this.InsertScanbeam(a.Top.Y);return a};k.Clipper.prototype.ProcessHorizontals=function(a){for(var b=this.m_SortedEdges;null!==b;)this.DeleteFromSEL(b),this.ProcessHorizontal(b,a),b=this.m_SortedEdges};k.Clipper.prototype.GetHorzDirection=function(a,b){a.Bot.X<a.Top.X?(b.Left=a.Bot.X,b.Right=a.Top.X,b.Dir=k.Direction.dLeftToRight):(b.Left=a.Top.X,b.Right=a.Bot.X,b.Dir=k.Direction.dRightToLeft)};k.Clipper.prototype.PrepareHorzJoins=
function(a,b){var c=this.m_PolyOuts[a.OutIdx].Pts;a.Side!=k.EdgeSide.esLeft&&(c=c.Prev);b&&(k.IntPoint.op_Equality(c.Pt,a.Top)?this.AddGhostJoin(c,a.Bot):this.AddGhostJoin(c,a.Top))};k.Clipper.prototype.ProcessHorizontal=function(a,b){var c={Dir:null,Left:null,Right:null};this.GetHorzDirection(a,c);for(var d=c.Dir,e=c.Left,f=c.Right,g=a,h=null;null!==g.NextInLML&&k.ClipperBase.IsHorizontal(g.NextInLML);)g=g.NextInLML;for(null===g.NextInLML&&(h=this.GetMaximaPair(g));;){for(var l=a==g,n=this.GetNextInAEL(a,
d);null!==n&&!(n.Curr.X==a.Top.X&&null!==a.NextInLML&&n.Dx<a.NextInLML.Dx);){c=this.GetNextInAEL(n,d);if(d==k.Direction.dLeftToRight&&n.Curr.X<=f||d==k.Direction.dRightToLeft&&n.Curr.X>=e){0<=a.OutIdx&&0!=a.WindDelta&&this.PrepareHorzJoins(a,b);if(n==h&&l){d==k.Direction.dLeftToRight?this.IntersectEdges(a,n,n.Top,!1):this.IntersectEdges(n,a,n.Top,!1);0<=h.OutIdx&&k.Error("ProcessHorizontal error");return}if(d==k.Direction.dLeftToRight){var q=new k.IntPoint(n.Curr.X,a.Curr.Y);this.IntersectEdges(a,
n,q,!0)}else q=new k.IntPoint(n.Curr.X,a.Curr.Y),this.IntersectEdges(n,a,q,!0);this.SwapPositionsInAEL(a,n)}else if(d==k.Direction.dLeftToRight&&n.Curr.X>=f||d==k.Direction.dRightToLeft&&n.Curr.X<=e)break;n=c}0<=a.OutIdx&&0!==a.WindDelta&&this.PrepareHorzJoins(a,b);if(null!==a.NextInLML&&k.ClipperBase.IsHorizontal(a.NextInLML))a=this.UpdateEdgeIntoAEL(a),0<=a.OutIdx&&this.AddOutPt(a,a.Bot),c={Dir:d,Left:e,Right:f},this.GetHorzDirection(a,c),d=c.Dir,e=c.Left,f=c.Right;else break}null!==a.NextInLML?
0<=a.OutIdx?(d=this.AddOutPt(a,a.Top),a=this.UpdateEdgeIntoAEL(a),0!==a.WindDelta&&(e=a.PrevInAEL,c=a.NextInAEL,null!==e&&e.Curr.X==a.Bot.X&&e.Curr.Y==a.Bot.Y&&0!==e.WindDelta&&0<=e.OutIdx&&e.Curr.Y>e.Top.Y&&k.ClipperBase.SlopesEqual(a,e,this.m_UseFullRange)?(c=this.AddOutPt(e,a.Bot),this.AddJoin(d,c,a.Top)):null!==c&&c.Curr.X==a.Bot.X&&c.Curr.Y==a.Bot.Y&&0!==c.WindDelta&&0<=c.OutIdx&&c.Curr.Y>c.Top.Y&&k.ClipperBase.SlopesEqual(a,c,this.m_UseFullRange)&&(c=this.AddOutPt(c,a.Bot),this.AddJoin(d,c,
a.Top)))):this.UpdateEdgeIntoAEL(a):null!==h?0<=h.OutIdx?(d==k.Direction.dLeftToRight?this.IntersectEdges(a,h,a.Top,!1):this.IntersectEdges(h,a,a.Top,!1),0<=h.OutIdx&&k.Error("ProcessHorizontal error")):(this.DeleteFromAEL(a),this.DeleteFromAEL(h)):(0<=a.OutIdx&&this.AddOutPt(a,a.Top),this.DeleteFromAEL(a))};k.Clipper.prototype.GetNextInAEL=function(a,b){return b==k.Direction.dLeftToRight?a.NextInAEL:a.PrevInAEL};k.Clipper.prototype.IsMinima=function(a){return null!==a&&a.Prev.NextInLML!=a&&a.Next.NextInLML!=
a};k.Clipper.prototype.IsMaxima=function(a,b){return null!==a&&a.Top.Y==b&&null===a.NextInLML};k.Clipper.prototype.IsIntermediate=function(a,b){return a.Top.Y==b&&null!==a.NextInLML};k.Clipper.prototype.GetMaximaPair=function(a){var b=null;k.IntPoint.op_Equality(a.Next.Top,a.Top)&&null===a.Next.NextInLML?b=a.Next:k.IntPoint.op_Equality(a.Prev.Top,a.Top)&&null===a.Prev.NextInLML&&(b=a.Prev);return null===b||-2!=b.OutIdx&&(b.NextInAEL!=b.PrevInAEL||k.ClipperBase.IsHorizontal(b))?b:null};k.Clipper.prototype.ProcessIntersections=
function(a,b){if(null==this.m_ActiveEdges)return!0;try{this.BuildIntersectList(a,b);if(0==this.m_IntersectList.length)return!0;if(1==this.m_IntersectList.length||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch(c){this.m_SortedEdges=null,this.m_IntersectList.length=0,k.Error("ProcessIntersections error")}this.m_SortedEdges=null;return!0};k.Clipper.prototype.BuildIntersectList=function(a,b){if(null!==this.m_ActiveEdges){var c=this.m_ActiveEdges;for(this.m_SortedEdges=c;null!==
c;)c.PrevInSEL=c.PrevInAEL,c.NextInSEL=c.NextInAEL,c.Curr.X=k.Clipper.TopX(c,b),c=c.NextInAEL;for(var d=!0;d&&null!==this.m_SortedEdges;){d=!1;for(c=this.m_SortedEdges;null!==c.NextInSEL;){var e=c.NextInSEL,f=new k.IntPoint;c.Curr.X>e.Curr.X?(!this.IntersectPoint(c,e,f)&&c.Curr.X>e.Curr.X+1&&k.Error("Intersection error"),f.Y>a&&(f.Y=a,Math.abs(c.Dx)>Math.abs(e.Dx)?f.X=k.Clipper.TopX(e,a):f.X=k.Clipper.TopX(c,a)),d=new k.IntersectNode,d.Edge1=c,d.Edge2=e,d.Pt.X=f.X,d.Pt.Y=f.Y,this.m_IntersectList.push(d),
this.SwapPositionsInSEL(c,e),d=!0):c=e}if(null!==c.PrevInSEL)c.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}};k.Clipper.prototype.EdgesAdjacent=function(a){return a.Edge1.NextInSEL==a.Edge2||a.Edge1.PrevInSEL==a.Edge2};k.Clipper.IntersectNodeSort=function(a,b){return b.Pt.Y-a.Pt.Y};k.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer);this.CopyAELToSEL();for(var a=this.m_IntersectList.length,b=0;b<a;b++){if(!this.EdgesAdjacent(this.m_IntersectList[b])){for(var c=
b+1;c<a&&!this.EdgesAdjacent(this.m_IntersectList[c]);)c++;if(c==a)return!1;var d=this.m_IntersectList[b];this.m_IntersectList[b]=this.m_IntersectList[c];this.m_IntersectList[c]=d}this.SwapPositionsInSEL(this.m_IntersectList[b].Edge1,this.m_IntersectList[b].Edge2)}return!0};k.Clipper.prototype.ProcessIntersectList=function(){for(var a=0,b=this.m_IntersectList.length;a<b;a++){var c=this.m_IntersectList[a];this.IntersectEdges(c.Edge1,c.Edge2,c.Pt,!0);this.SwapPositionsInAEL(c.Edge1,c.Edge2)}this.m_IntersectList.length=
0};s=function(a){return 0>a?Math.ceil(a-.5):Math.round(a)};Q=function(a){return 0>a?Math.ceil(a-.5):Math.floor(a+.5)};J=function(a){return 0>a?-Math.round(Math.abs(a)):Math.round(a)};B=function(a){if(0>a)return a-=.5,-2147483648>a?Math.ceil(a):a|0;a+=.5;return 2147483647<a?Math.floor(a):a|0};k.Clipper.Round=H?s:N?J:G?B:Q;k.Clipper.TopX=function(a,b){return b==a.Top.Y?a.Top.X:a.Bot.X+k.Clipper.Round(a.Dx*(b-a.Bot.Y))};k.Clipper.prototype.IntersectPoint=function(a,b,c){c.X=0;c.Y=0;var d,e;if(k.ClipperBase.SlopesEqual(a,
b,this.m_UseFullRange)||a.Dx==b.Dx)return b.Bot.Y>a.Bot.Y?(c.X=b.Bot.X,c.Y=b.Bot.Y):(c.X=a.Bot.X,c.Y=a.Bot.Y),!1;if(0===a.Delta.X)c.X=a.Bot.X,k.ClipperBase.IsHorizontal(b)?c.Y=b.Bot.Y:(e=b.Bot.Y-b.Bot.X/b.Dx,c.Y=k.Clipper.Round(c.X/b.Dx+e));else if(0===b.Delta.X)c.X=b.Bot.X,k.ClipperBase.IsHorizontal(a)?c.Y=a.Bot.Y:(d=a.Bot.Y-a.Bot.X/a.Dx,c.Y=k.Clipper.Round(c.X/a.Dx+d));else{d=a.Bot.X-a.Bot.Y*a.Dx;e=b.Bot.X-b.Bot.Y*b.Dx;var f=(e-d)/(a.Dx-b.Dx);c.Y=k.Clipper.Round(f);Math.abs(a.Dx)<Math.abs(b.Dx)?
c.X=k.Clipper.Round(a.Dx*f+d):c.X=k.Clipper.Round(b.Dx*f+e)}if(c.Y<a.Top.Y||c.Y<b.Top.Y){if(a.Top.Y>b.Top.Y)return c.Y=a.Top.Y,c.X=k.Clipper.TopX(b,a.Top.Y),c.X<a.Top.X;c.Y=b.Top.Y;Math.abs(a.Dx)<Math.abs(b.Dx)?c.X=k.Clipper.TopX(a,c.Y):c.X=k.Clipper.TopX(b,c.Y)}return!0};k.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(a){for(var b=this.m_ActiveEdges;null!==b;){var c=this.IsMaxima(b,a);c&&(c=this.GetMaximaPair(b),c=null===c||!k.ClipperBase.IsHorizontal(c));if(c){var d=b.PrevInAEL;this.DoMaxima(b);
b=null===d?this.m_ActiveEdges:d.NextInAEL}else this.IsIntermediate(b,a)&&k.ClipperBase.IsHorizontal(b.NextInLML)?(b=this.UpdateEdgeIntoAEL(b),0<=b.OutIdx&&this.AddOutPt(b,b.Bot),this.AddEdgeToSEL(b)):(b.Curr.X=k.Clipper.TopX(b,a),b.Curr.Y=a),this.StrictlySimple&&(d=b.PrevInAEL,0<=b.OutIdx&&0!==b.WindDelta&&null!==d&&0<=d.OutIdx&&d.Curr.X==b.Curr.X&&0!==d.WindDelta&&(c=this.AddOutPt(d,b.Curr),d=this.AddOutPt(b,b.Curr),this.AddJoin(c,d,b.Curr))),b=b.NextInAEL}this.ProcessHorizontals(!0);for(b=this.m_ActiveEdges;null!==
b;){if(this.IsIntermediate(b,a)){c=null;0<=b.OutIdx&&(c=this.AddOutPt(b,b.Top));var b=this.UpdateEdgeIntoAEL(b),d=b.PrevInAEL,e=b.NextInAEL;null!==d&&d.Curr.X==b.Bot.X&&d.Curr.Y==b.Bot.Y&&null!==c&&0<=d.OutIdx&&d.Curr.Y>d.Top.Y&&k.ClipperBase.SlopesEqual(b,d,this.m_UseFullRange)&&0!==b.WindDelta&&0!==d.WindDelta?(d=this.AddOutPt(d,b.Bot),this.AddJoin(c,d,b.Top)):null!==e&&e.Curr.X==b.Bot.X&&e.Curr.Y==b.Bot.Y&&null!==c&&0<=e.OutIdx&&e.Curr.Y>e.Top.Y&&k.ClipperBase.SlopesEqual(b,e,this.m_UseFullRange)&&
0!==b.WindDelta&&0!==e.WindDelta&&(d=this.AddOutPt(e,b.Bot),this.AddJoin(c,d,b.Top))}b=b.NextInAEL}};k.Clipper.prototype.DoMaxima=function(a){var b=this.GetMaximaPair(a);if(null===b)0<=a.OutIdx&&this.AddOutPt(a,a.Top),this.DeleteFromAEL(a);else{for(var c=a.NextInAEL;null!==c&&c!=b;)this.IntersectEdges(a,c,a.Top,!0),this.SwapPositionsInAEL(a,c),c=a.NextInAEL;-1==a.OutIdx&&-1==b.OutIdx?(this.DeleteFromAEL(a),this.DeleteFromAEL(b)):0<=a.OutIdx&&0<=b.OutIdx?this.IntersectEdges(a,b,a.Top,!1):0===a.WindDelta?
(0<=a.OutIdx&&(this.AddOutPt(a,a.Top),a.OutIdx=-1),this.DeleteFromAEL(a),0<=b.OutIdx&&(this.AddOutPt(b,a.Top),b.OutIdx=-1),this.DeleteFromAEL(b)):k.Error("DoMaxima error")}};k.Clipper.ReversePaths=function(a){for(var b=0,c=a.length;b<c;b++)a[b].reverse()};k.Clipper.Orientation=function(a){return 0<=k.Clipper.Area(a)};k.Clipper.prototype.PointCount=function(a){if(null===a)return 0;var b=0,c=a;do b++,c=c.Next;while(c!=a);return b};k.Clipper.prototype.BuildResult=function(a){k.Clear(a);for(var b=0,c=
this.m_PolyOuts.length;b<c;b++){var d=this.m_PolyOuts[b];if(null!==d.Pts){var d=d.Pts.Prev,e=this.PointCount(d);if(!(2>e)){for(var f=Array(e),g=0;g<e;g++)f[g]=d.Pt,d=d.Prev;a.push(f)}}}};k.Clipper.prototype.BuildResult2=function(a){a.Clear();for(var b=0,c=this.m_PolyOuts.length;b<c;b++){var d=this.m_PolyOuts[b],e=this.PointCount(d.Pts);if(!(d.IsOpen&&2>e||!d.IsOpen&&3>e)){this.FixHoleLinkage(d);var f=new k.PolyNode;a.m_AllPolys.push(f);d.PolyNode=f;f.m_polygon.length=e;for(var d=d.Pts.Prev,g=0;g<
e;g++)f.m_polygon[g]=d.Pt,d=d.Prev}}b=0;for(c=this.m_PolyOuts.length;b<c;b++)d=this.m_PolyOuts[b],null!==d.PolyNode&&(d.IsOpen?(d.PolyNode.IsOpen=!0,a.AddChild(d.PolyNode)):null!==d.FirstLeft&&null!=d.FirstLeft.PolyNode?d.FirstLeft.PolyNode.AddChild(d.PolyNode):a.AddChild(d.PolyNode))};k.Clipper.prototype.FixupOutPolygon=function(a){var b=null;a.BottomPt=null;for(var c=a.Pts;;){if(c.Prev==c||c.Prev==c.Next){this.DisposeOutPts(c);a.Pts=null;return}if(k.IntPoint.op_Equality(c.Pt,c.Next.Pt)||k.IntPoint.op_Equality(c.Pt,
c.Prev.Pt)||k.ClipperBase.SlopesEqual(c.Prev.Pt,c.Pt,c.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(c.Prev.Pt,c.Pt,c.Next.Pt)))b=null,c.Prev.Next=c.Next,c=c.Next.Prev=c.Prev;else if(c==b)break;else null===b&&(b=c),c=c.Next}a.Pts=c};k.Clipper.prototype.DupOutPt=function(a,b){var c=new k.OutPt;c.Pt.X=a.Pt.X;c.Pt.Y=a.Pt.Y;c.Idx=a.Idx;b?(c.Next=a.Next,c.Prev=a,a.Next.Prev=c,a.Next=c):(c.Prev=a.Prev,c.Next=a,a.Prev.Next=c,a.Prev=c);return c};k.Clipper.prototype.GetOverlap=
function(a,b,c,d,e){a<b?c<d?(e.Left=Math.max(a,c),e.Right=Math.min(b,d)):(e.Left=Math.max(a,d),e.Right=Math.min(b,c)):c<d?(e.Left=Math.max(b,c),e.Right=Math.min(a,d)):(e.Left=Math.max(b,d),e.Right=Math.min(a,c));return e.Left<e.Right};k.Clipper.prototype.JoinHorz=function(a,b,c,d,e,f){var g=a.Pt.X>b.Pt.X?k.Direction.dRightToLeft:k.Direction.dLeftToRight;d=c.Pt.X>d.Pt.X?k.Direction.dRightToLeft:k.Direction.dLeftToRight;if(g==d)return!1;if(g==k.Direction.dLeftToRight){for(;a.Next.Pt.X<=e.X&&a.Next.Pt.X>=
a.Pt.X&&a.Next.Pt.Y==e.Y;)a=a.Next;f&&a.Pt.X!=e.X&&(a=a.Next);b=this.DupOutPt(a,!f);k.IntPoint.op_Inequality(b.Pt,e)&&(a=b,a.Pt.X=e.X,a.Pt.Y=e.Y,b=this.DupOutPt(a,!f))}else{for(;a.Next.Pt.X>=e.X&&a.Next.Pt.X<=a.Pt.X&&a.Next.Pt.Y==e.Y;)a=a.Next;f||a.Pt.X==e.X||(a=a.Next);b=this.DupOutPt(a,f);k.IntPoint.op_Inequality(b.Pt,e)&&(a=b,a.Pt.X=e.X,a.Pt.Y=e.Y,b=this.DupOutPt(a,f))}if(d==k.Direction.dLeftToRight){for(;c.Next.Pt.X<=e.X&&c.Next.Pt.X>=c.Pt.X&&c.Next.Pt.Y==e.Y;)c=c.Next;f&&c.Pt.X!=e.X&&(c=c.Next);
d=this.DupOutPt(c,!f);k.IntPoint.op_Inequality(d.Pt,e)&&(c=d,c.Pt.X=e.X,c.Pt.Y=e.Y,d=this.DupOutPt(c,!f))}else{for(;c.Next.Pt.X>=e.X&&c.Next.Pt.X<=c.Pt.X&&c.Next.Pt.Y==e.Y;)c=c.Next;f||c.Pt.X==e.X||(c=c.Next);d=this.DupOutPt(c,f);k.IntPoint.op_Inequality(d.Pt,e)&&(c=d,c.Pt.X=e.X,c.Pt.Y=e.Y,d=this.DupOutPt(c,f))}g==k.Direction.dLeftToRight==f?(a.Prev=c,c.Next=a,b.Next=d,d.Prev=b):(a.Next=c,c.Prev=a,b.Prev=d,d.Next=b);return!0};k.Clipper.prototype.JoinPoints=function(a,b,c){var d=a.OutPt1,e=new k.OutPt,
f=a.OutPt2,g=new k.OutPt;if((g=a.OutPt1.Pt.Y==a.OffPt.Y)&&k.IntPoint.op_Equality(a.OffPt,a.OutPt1.Pt)&&k.IntPoint.op_Equality(a.OffPt,a.OutPt2.Pt)){for(e=a.OutPt1.Next;e!=d&&k.IntPoint.op_Equality(e.Pt,a.OffPt);)e=e.Next;e=e.Pt.Y>a.OffPt.Y;for(g=a.OutPt2.Next;g!=f&&k.IntPoint.op_Equality(g.Pt,a.OffPt);)g=g.Next;if(e==g.Pt.Y>a.OffPt.Y)return!1;e?(e=this.DupOutPt(d,!1),g=this.DupOutPt(f,!0),d.Prev=f,f.Next=d,e.Next=g,g.Prev=e):(e=this.DupOutPt(d,!0),g=this.DupOutPt(f,!1),d.Next=f,f.Prev=d,e.Prev=g,
g.Next=e);a.OutPt1=d;a.OutPt2=e;return!0}if(g){for(e=d;d.Prev.Pt.Y==d.Pt.Y&&d.Prev!=e&&d.Prev!=f;)d=d.Prev;for(;e.Next.Pt.Y==e.Pt.Y&&e.Next!=d&&e.Next!=f;)e=e.Next;if(e.Next==d||e.Next==f)return!1;for(g=f;f.Prev.Pt.Y==f.Pt.Y&&f.Prev!=g&&f.Prev!=e;)f=f.Prev;for(;g.Next.Pt.Y==g.Pt.Y&&g.Next!=f&&g.Next!=d;)g=g.Next;if(g.Next==f||g.Next==d)return!1;c={Left:null,Right:null};if(!this.GetOverlap(d.Pt.X,e.Pt.X,f.Pt.X,g.Pt.X,c))return!1;b=c.Left;var h=c.Right;c=new k.IntPoint;d.Pt.X>=b&&d.Pt.X<=h?(c.X=d.Pt.X,
c.Y=d.Pt.Y,b=d.Pt.X>e.Pt.X):f.Pt.X>=b&&f.Pt.X<=h?(c.X=f.Pt.X,c.Y=f.Pt.Y,b=f.Pt.X>g.Pt.X):e.Pt.X>=b&&e.Pt.X<=h?(c.X=e.Pt.X,c.Y=e.Pt.Y,b=e.Pt.X>d.Pt.X):(c.X=g.Pt.X,c.Y=g.Pt.Y,b=g.Pt.X>f.Pt.X);a.OutPt1=d;a.OutPt2=f;return this.JoinHorz(d,e,f,g,c,b)}for(e=d.Next;k.IntPoint.op_Equality(e.Pt,d.Pt)&&e!=d;)e=e.Next;if(h=e.Pt.Y>d.Pt.Y||!k.ClipperBase.SlopesEqual(d.Pt,e.Pt,a.OffPt,this.m_UseFullRange)){for(e=d.Prev;k.IntPoint.op_Equality(e.Pt,d.Pt)&&e!=d;)e=e.Prev;if(e.Pt.Y>d.Pt.Y||!k.ClipperBase.SlopesEqual(d.Pt,
e.Pt,a.OffPt,this.m_UseFullRange))return!1}for(g=f.Next;k.IntPoint.op_Equality(g.Pt,f.Pt)&&g!=f;)g=g.Next;var l=g.Pt.Y>f.Pt.Y||!k.ClipperBase.SlopesEqual(f.Pt,g.Pt,a.OffPt,this.m_UseFullRange);if(l){for(g=f.Prev;k.IntPoint.op_Equality(g.Pt,f.Pt)&&g!=f;)g=g.Prev;if(g.Pt.Y>f.Pt.Y||!k.ClipperBase.SlopesEqual(f.Pt,g.Pt,a.OffPt,this.m_UseFullRange))return!1}if(e==d||g==f||e==g||b==c&&h==l)return!1;h?(e=this.DupOutPt(d,!1),g=this.DupOutPt(f,!0),d.Prev=f,f.Next=d,e.Next=g,g.Prev=e):(e=this.DupOutPt(d,!0),
g=this.DupOutPt(f,!1),d.Next=f,f.Prev=d,e.Prev=g,g.Next=e);a.OutPt1=d;a.OutPt2=e;return!0};k.Clipper.GetBounds=function(a){for(var b=0,c=a.length;b<c&&0==a[b].length;)b++;if(b==c)return new k.IntRect(0,0,0,0);var d=new k.IntRect;d.left=a[b][0].X;d.right=d.left;d.top=a[b][0].Y;for(d.bottom=d.top;b<c;b++)for(var e=0,f=a[b].length;e<f;e++)a[b][e].X<d.left?d.left=a[b][e].X:a[b][e].X>d.right&&(d.right=a[b][e].X),a[b][e].Y<d.top?d.top=a[b][e].Y:a[b][e].Y>d.bottom&&(d.bottom=a[b][e].Y);return d};k.Clipper.prototype.GetBounds2=
function(a){var b=a,c=new k.IntRect;c.left=a.Pt.X;c.right=a.Pt.X;c.top=a.Pt.Y;c.bottom=a.Pt.Y;for(a=a.Next;a!=b;)a.Pt.X<c.left&&(c.left=a.Pt.X),a.Pt.X>c.right&&(c.right=a.Pt.X),a.Pt.Y<c.top&&(c.top=a.Pt.Y),a.Pt.Y>c.bottom&&(c.bottom=a.Pt.Y),a=a.Next;return c};k.Clipper.PointInPolygon=function(a,b){var c=0,d=b.length;if(3>d)return 0;for(var e=b[0],f=1;f<=d;++f){var g=f==d?b[0]:b[f];if(g.Y==a.Y&&(g.X==a.X||e.Y==a.Y&&g.X>a.X==e.X<a.X))return-1;if(e.Y<a.Y!=g.Y<a.Y)if(e.X>=a.X)if(g.X>a.X)c=1-c;else{var h=
(e.X-a.X)*(g.Y-a.Y)-(g.X-a.X)*(e.Y-a.Y);if(0==h)return-1;0<h==g.Y>e.Y&&(c=1-c)}else if(g.X>a.X){h=(e.X-a.X)*(g.Y-a.Y)-(g.X-a.X)*(e.Y-a.Y);if(0==h)return-1;0<h==g.Y>e.Y&&(c=1-c)}e=g}return c};k.Clipper.prototype.PointInPolygon=function(a,b){for(var c=0,d=b;;){var e=b.Pt.X,f=b.Pt.Y,g=b.Next.Pt.X,h=b.Next.Pt.Y;if(h==a.Y&&(g==a.X||f==a.Y&&g>a.X==e<a.X))return-1;if(f<a.Y!=h<a.Y)if(e>=a.X)if(g>a.X)c=1-c;else{e=(e-a.X)*(h-a.Y)-(g-a.X)*(f-a.Y);if(0==e)return-1;0<e==h>f&&(c=1-c)}else if(g>a.X){e=(e-a.X)*(h-
a.Y)-(g-a.X)*(f-a.Y);if(0==e)return-1;0<e==h>f&&(c=1-c)}b=b.Next;if(d==b)break}return c};k.Clipper.prototype.Poly2ContainsPoly1=function(a,b){var c=a;do{var d=this.PointInPolygon(c.Pt,b);if(0<=d)return 0!=d;c=c.Next}while(c!=a);return!0};k.Clipper.prototype.FixupFirstLefts1=function(a,b){for(var c=0,d=this.m_PolyOuts.length;c<d;c++){var e=this.m_PolyOuts[c];null!==e.Pts&&e.FirstLeft==a&&this.Poly2ContainsPoly1(e.Pts,b.Pts)&&(e.FirstLeft=b)}};k.Clipper.prototype.FixupFirstLefts2=function(a,b){for(var c=
0,d=this.m_PolyOuts,e=d.length,f=d[c];c<e;c++,f=d[c])f.FirstLeft==a&&(f.FirstLeft=b)};k.Clipper.ParseFirstLeft=function(a){for(;null!=a&&null==a.Pts;)a=a.FirstLeft;return a};k.Clipper.prototype.JoinCommonEdges=function(){for(var a=0,b=this.m_Joins.length;a<b;a++){var c=this.m_Joins[a],d=this.GetOutRec(c.OutPt1.Idx),e=this.GetOutRec(c.OutPt2.Idx);if(null!=d.Pts&&null!=e.Pts){var f;f=d==e?d:this.Param1RightOfParam2(d,e)?e:this.Param1RightOfParam2(e,d)?d:this.GetLowermostRec(d,e);if(this.JoinPoints(c,
d,e))if(d==e){d.Pts=c.OutPt1;d.BottomPt=null;e=this.CreateOutRec();e.Pts=c.OutPt2;this.UpdateOutPtIdxs(e);if(this.m_UsingPolyTree){f=0;for(var g=this.m_PolyOuts.length;f<g-1;f++){var h=this.m_PolyOuts[f];null!=h.Pts&&k.Clipper.ParseFirstLeft(h.FirstLeft)==d&&h.IsHole!=d.IsHole&&this.Poly2ContainsPoly1(h.Pts,c.OutPt2)&&(h.FirstLeft=e)}}this.Poly2ContainsPoly1(e.Pts,d.Pts)?(e.IsHole=!d.IsHole,e.FirstLeft=d,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,d),(e.IsHole^this.ReverseSolution)==0<this.Area(e)&&
this.ReversePolyPtLinks(e.Pts)):this.Poly2ContainsPoly1(d.Pts,e.Pts)?(e.IsHole=d.IsHole,d.IsHole=!e.IsHole,e.FirstLeft=d.FirstLeft,d.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(d,e),(d.IsHole^this.ReverseSolution)==0<this.Area(d)&&this.ReversePolyPtLinks(d.Pts)):(e.IsHole=d.IsHole,e.FirstLeft=d.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(d,e))}else e.Pts=null,e.BottomPt=null,e.Idx=d.Idx,d.IsHole=f.IsHole,f==e&&(d.FirstLeft=e.FirstLeft),e.FirstLeft=d,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,
d)}}};k.Clipper.prototype.UpdateOutPtIdxs=function(a){var b=a.Pts;do b.Idx=a.Idx,b=b.Prev;while(b!=a.Pts)};k.Clipper.prototype.DoSimplePolygons=function(){for(var a=0;a<this.m_PolyOuts.length;){var b=this.m_PolyOuts[a++],c=b.Pts;if(null!==c){do{for(var d=c.Next;d!=b.Pts;){if(k.IntPoint.op_Equality(c.Pt,d.Pt)&&d.Next!=c&&d.Prev!=c){var e=c.Prev,f=d.Prev;c.Prev=f;f.Next=c;d.Prev=e;e.Next=d;b.Pts=c;e=this.CreateOutRec();e.Pts=d;this.UpdateOutPtIdxs(e);this.Poly2ContainsPoly1(e.Pts,b.Pts)?(e.IsHole=!b.IsHole,
e.FirstLeft=b):this.Poly2ContainsPoly1(b.Pts,e.Pts)?(e.IsHole=b.IsHole,b.IsHole=!e.IsHole,e.FirstLeft=b.FirstLeft,b.FirstLeft=e):(e.IsHole=b.IsHole,e.FirstLeft=b.FirstLeft);d=c}d=d.Next}c=c.Next}while(c!=b.Pts)}}};k.Clipper.Area=function(a){var b=a.length;if(3>b)return 0;for(var c=0,d=0,e=b-1;d<b;++d)c+=(a[e].X+a[d].X)*(a[e].Y-a[d].Y),e=d;return.5*-c};k.Clipper.prototype.Area=function(a){var b=a.Pts;if(null==b)return 0;var c=0;do c+=(b.Prev.Pt.X+b.Pt.X)*(b.Prev.Pt.Y-b.Pt.Y),b=b.Next;while(b!=a.Pts);
return.5*c};k.Clipper.SimplifyPolygon=function(a,b){var c=[],d=new k.Clipper(0);d.StrictlySimple=!0;d.AddPath(a,k.PolyType.ptSubject,!0);d.Execute(k.ClipType.ctUnion,c,b,b);return c};k.Clipper.SimplifyPolygons=function(a,b){"undefined"==typeof b&&(b=k.PolyFillType.pftEvenOdd);var c=[],d=new k.Clipper(0);d.StrictlySimple=!0;d.AddPaths(a,k.PolyType.ptSubject,!0);d.Execute(k.ClipType.ctUnion,c,b,b);return c};k.Clipper.DistanceSqrd=function(a,b){var c=a.X-b.X,d=a.Y-b.Y;return c*c+d*d};k.Clipper.DistanceFromLineSqrd=
function(a,b,c){var d=b.Y-c.Y;c=c.X-b.X;b=d*b.X+c*b.Y;b=d*a.X+c*a.Y-b;return b*b/(d*d+c*c)};k.Clipper.SlopesNearCollinear=function(a,b,c,d){return k.Clipper.DistanceFromLineSqrd(b,a,c)<d};k.Clipper.PointsAreClose=function(a,b,c){var d=a.X-b.X;a=a.Y-b.Y;return d*d+a*a<=c};k.Clipper.ExcludeOp=function(a){var b=a.Prev;b.Next=a.Next;a.Next.Prev=b;b.Idx=0;return b};k.Clipper.CleanPolygon=function(a,b){"undefined"==typeof b&&(b=1.415);var c=a.length;if(0==c)return[];for(var d=Array(c),e=0;e<c;++e)d[e]=
new k.OutPt;for(e=0;e<c;++e)d[e].Pt=a[e],d[e].Next=d[(e+1)%c],d[e].Next.Prev=d[e],d[e].Idx=0;e=b*b;for(d=d[0];0==d.Idx&&d.Next!=d.Prev;)k.Clipper.PointsAreClose(d.Pt,d.Prev.Pt,e)?(d=k.Clipper.ExcludeOp(d),c--):k.Clipper.PointsAreClose(d.Prev.Pt,d.Next.Pt,e)?(k.Clipper.ExcludeOp(d.Next),d=k.Clipper.ExcludeOp(d),c-=2):k.Clipper.SlopesNearCollinear(d.Prev.Pt,d.Pt,d.Next.Pt,e)?(d=k.Clipper.ExcludeOp(d),c--):(d.Idx=1,d=d.Next);3>c&&(c=0);for(var f=Array(c),e=0;e<c;++e)f[e]=new k.IntPoint(d.Pt),d=d.Next;
return f};k.Clipper.CleanPolygons=function(a,b){for(var c=Array(a.length),d=0,e=a.length;d<e;d++)c[d]=k.Clipper.CleanPolygon(a[d],b);return c};k.Clipper.Minkowski=function(a,b,c,d){var e=d?1:0,f=a.length,g=b.length;d=[];if(c)for(c=0;c<g;c++){for(var h=Array(f),l=0,n=a.length,q=a[l];l<n;l++,q=a[l])h[l]=new k.IntPoint(b[c].X+q.X,b[c].Y+q.Y);d.push(h)}else for(c=0;c<g;c++){h=Array(f);l=0;n=a.length;for(q=a[l];l<n;l++,q=a[l])h[l]=new k.IntPoint(b[c].X-q.X,b[c].Y-q.Y);d.push(h)}a=[];for(c=0;c<g-1+e;c++)for(l=
0;l<f;l++)b=[],b.push(d[c%g][l%f]),b.push(d[(c+1)%g][l%f]),b.push(d[(c+1)%g][(l+1)%f]),b.push(d[c%g][(l+1)%f]),k.Clipper.Orientation(b)||b.reverse(),a.push(b);e=new k.Clipper(0);e.AddPaths(a,k.PolyType.ptSubject,!0);e.Execute(k.ClipType.ctUnion,d,k.PolyFillType.pftNonZero,k.PolyFillType.pftNonZero);return d};k.Clipper.MinkowskiSum=function(){var a=arguments,b=a.length;if(3==b){var c=a[0],d=a[2];return k.Clipper.Minkowski(c,a[1],!0,d)}if(4==b){for(var c=a[0],e=a[1],b=a[2],d=a[3],a=new k.Clipper,f,
g=0,h=e.length;g<h;++g)f=k.Clipper.Minkowski(c,e[g],!0,d),a.AddPaths(f,k.PolyType.ptSubject,!0);d&&a.AddPaths(e,k.PolyType.ptClip,!0);c=new k.Paths;a.Execute(k.ClipType.ctUnion,c,b,b);return c}};k.Clipper.MinkowskiDiff=function(a,b,c){return k.Clipper.Minkowski(a,b,!1,c)};k.Clipper.PolyTreeToPaths=function(a){var b=[];k.Clipper.AddPolyNodeToPaths(a,k.Clipper.NodeType.ntAny,b);return b};k.Clipper.AddPolyNodeToPaths=function(a,b,c){var d=!0;switch(b){case k.Clipper.NodeType.ntOpen:return;case k.Clipper.NodeType.ntClosed:d=
!a.IsOpen}0<a.m_polygon.length&&d&&c.push(a.m_polygon);d=0;a=a.Childs();for(var e=a.length,f=a[d];d<e;d++,f=a[d])k.Clipper.AddPolyNodeToPaths(f,b,c)};k.Clipper.OpenPathsFromPolyTree=function(a){for(var b=new k.Paths,c=0,d=a.ChildCount();c<d;c++)a.Childs()[c].IsOpen&&b.push(a.Childs()[c].m_polygon);return b};k.Clipper.ClosedPathsFromPolyTree=function(a){var b=new k.Paths;k.Clipper.AddPolyNodeToPaths(a,k.Clipper.NodeType.ntClosed,b);return b};U(k.Clipper,k.ClipperBase);k.Clipper.NodeType={ntAny:0,ntOpen:1,
ntClosed:2};k.ClipperOffset=function(a,b){"undefined"==typeof a&&(a=2);"undefined"==typeof b&&(b=k.ClipperOffset.def_arc_tolerance);this.m_destPolys=new k.Paths;this.m_srcPoly=new k.Path;this.m_destPoly=new k.Path;this.m_normals=[];this.m_StepsPerRad=this.m_miterLim=this.m_cos=this.m_sin=this.m_sinA=this.m_delta=0;this.m_lowest=new k.IntPoint;this.m_polyNodes=new k.PolyNode;this.MiterLimit=a;this.ArcTolerance=b;this.m_lowest.X=-1};k.ClipperOffset.two_pi=6.28318530717959;k.ClipperOffset.def_arc_tolerance=
.25;k.ClipperOffset.prototype.Clear=function(){k.Clear(this.m_polyNodes.Childs());this.m_lowest.X=-1};k.ClipperOffset.Round=k.Clipper.Round;k.ClipperOffset.prototype.AddPath=function(a,b,c){var d=a.length-1;if(!(0>d)){var e=new k.PolyNode;e.m_jointype=b;e.m_endtype=c;if(c==k.EndType.etClosedLine||c==k.EndType.etClosedPolygon)for(;0<d&&k.IntPoint.op_Equality(a[0],a[d]);)d--;e.m_polygon.push(a[0]);var f=0;b=0;for(var g=1;g<=d;g++)k.IntPoint.op_Inequality(e.m_polygon[f],a[g])&&(f++,e.m_polygon.push(a[g]),
a[g].Y>e.m_polygon[b].Y||a[g].Y==e.m_polygon[b].Y&&a[g].X<e.m_polygon[b].X)&&(b=f);if(!(c==k.EndType.etClosedPolygon&&2>f||c!=k.EndType.etClosedPolygon&&0>f)&&(this.m_polyNodes.AddChild(e),c==k.EndType.etClosedPolygon))if(0>this.m_lowest.X)this.m_lowest=new k.IntPoint(0,b);else if(a=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y],e.m_polygon[b].Y>a.Y||e.m_polygon[b].Y==a.Y&&e.m_polygon[b].X<a.X)this.m_lowest=new k.IntPoint(this.m_polyNodes.ChildCount()-1,b)}};k.ClipperOffset.prototype.AddPaths=
function(a,b,c){for(var d=0,e=a.length;d<e;d++)this.AddPath(a[d],b,c)};k.ClipperOffset.prototype.FixOrientations=function(){if(0<=this.m_lowest.X&&!k.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var a=0;a<this.m_polyNodes.ChildCount();a++){var b=this.m_polyNodes.Childs()[a];(b.m_endtype==k.EndType.etClosedPolygon||b.m_endtype==k.EndType.etClosedLine&&k.Clipper.Orientation(b.m_polygon))&&b.m_polygon.reverse()}else for(a=0;a<this.m_polyNodes.ChildCount();a++)b=this.m_polyNodes.Childs()[a],
b.m_endtype!=k.EndType.etClosedLine||k.Clipper.Orientation(b.m_polygon)||b.m_polygon.reverse()};k.ClipperOffset.GetUnitNormal=function(a,b){var c=b.X-a.X,d=b.Y-a.Y;if(0==c&&0==d)return new k.DoublePoint(0,0);var e=1/Math.sqrt(c*c+d*d);return new k.DoublePoint(d*e,-(c*e))};k.ClipperOffset.prototype.DoOffset=function(a){this.m_destPolys=[];this.m_delta=a;if(k.ClipperBase.near_zero(a))for(var b=0;b<this.m_polyNodes.ChildCount();b++){var c=this.m_polyNodes.Childs()[b];c.m_endtype==k.EndType.etClosedPolygon&&
this.m_destPolys.push(c.m_polygon)}else{this.m_miterLim=2<this.MiterLimit?2/(this.MiterLimit*this.MiterLimit):.5;var b=0>=this.ArcTolerance?k.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(a)*k.ClipperOffset.def_arc_tolerance?Math.abs(a)*k.ClipperOffset.def_arc_tolerance:this.ArcTolerance,d=3.14159265358979/Math.acos(1-b/Math.abs(a));this.m_sin=Math.sin(k.ClipperOffset.two_pi/d);this.m_cos=Math.cos(k.ClipperOffset.two_pi/d);this.m_StepsPerRad=d/k.ClipperOffset.two_pi;0>a&&(this.m_sin=
-this.m_sin);for(b=0;b<this.m_polyNodes.ChildCount();b++){c=this.m_polyNodes.Childs()[b];this.m_srcPoly=c.m_polygon;var e=this.m_srcPoly.length;if(!(0==e||0>=a&&(3>e||c.m_endtype!=k.EndType.etClosedPolygon))){this.m_destPoly=[];if(1==e)if(c.m_jointype==k.JoinType.jtRound)for(var c=1,e=0,f=1;f<=d;f++){this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[0].X+c*a),k.ClipperOffset.Round(this.m_srcPoly[0].Y+e*a)));var g=c,c=c*this.m_cos-this.m_sin*e,e=g*this.m_sin+e*this.m_cos}else for(e=
c=-1,f=0;4>f;++f)this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[0].X+c*a),k.ClipperOffset.Round(this.m_srcPoly[0].Y+e*a))),0>c?c=1:0>e?e=1:c=-1;else{for(f=this.m_normals.length=0;f<e-1;f++)this.m_normals.push(k.ClipperOffset.GetUnitNormal(this.m_srcPoly[f],this.m_srcPoly[f+1]));c.m_endtype==k.EndType.etClosedLine||c.m_endtype==k.EndType.etClosedPolygon?this.m_normals.push(k.ClipperOffset.GetUnitNormal(this.m_srcPoly[e-1],this.m_srcPoly[0])):this.m_normals.push(new k.DoublePoint(this.m_normals[e-
2]));if(c.m_endtype==k.EndType.etClosedPolygon)for(g=e-1,f=0;f<e;f++)g=this.OffsetPoint(f,g,c.m_jointype);else if(c.m_endtype==k.EndType.etClosedLine){g=e-1;for(f=0;f<e;f++)g=this.OffsetPoint(f,g,c.m_jointype);this.m_destPolys.push(this.m_destPoly);this.m_destPoly=[];g=this.m_normals[e-1];for(f=e-1;0<f;f--)this.m_normals[f]=new k.DoublePoint(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);this.m_normals[0]=new k.DoublePoint(-g.X,-g.Y);g=0;for(f=e-1;0<=f;f--)g=this.OffsetPoint(f,g,c.m_jointype)}else{g=
0;for(f=1;f<e-1;++f)g=this.OffsetPoint(f,g,c.m_jointype);c.m_endtype==k.EndType.etOpenButt?(f=e-1,g=new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[f].X+this.m_normals[f].X*a),k.ClipperOffset.Round(this.m_srcPoly[f].Y+this.m_normals[f].Y*a)),this.m_destPoly.push(g),g=new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[f].X-this.m_normals[f].X*a),k.ClipperOffset.Round(this.m_srcPoly[f].Y-this.m_normals[f].Y*a)),this.m_destPoly.push(g)):(f=e-1,g=e-2,this.m_sinA=0,this.m_normals[f]=new k.DoublePoint(-this.m_normals[f].X,
-this.m_normals[f].Y),c.m_endtype==k.EndType.etOpenSquare?this.DoSquare(f,g):this.DoRound(f,g));for(f=e-1;0<f;f--)this.m_normals[f]=new k.DoublePoint(-this.m_normals[f-1].X,-this.m_normals[f-1].Y);this.m_normals[0]=new k.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y);g=e-1;for(f=g-1;0<f;--f)g=this.OffsetPoint(f,g,c.m_jointype);c.m_endtype==k.EndType.etOpenButt?(g=new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*a),k.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*
a)),this.m_destPoly.push(g),g=new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*a),k.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*a)),this.m_destPoly.push(g)):(this.m_sinA=0,c.m_endtype==k.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1))}}this.m_destPolys.push(this.m_destPoly)}}}};k.ClipperOffset.prototype.Execute=function(){var a=arguments;if(a[0]instanceof k.PolyTree)if(b=a[0],c=a[1],b.Clear(),this.FixOrientations(),this.DoOffset(c),a=new k.Clipper(0),
a.AddPaths(this.m_destPolys,k.PolyType.ptSubject,!0),0<c)a.Execute(k.ClipType.ctUnion,b,k.PolyFillType.pftPositive,k.PolyFillType.pftPositive);else if(c=k.Clipper.GetBounds(this.m_destPolys),d=new k.Path,d.push(new k.IntPoint(c.left-10,c.bottom+10)),d.push(new k.IntPoint(c.right+10,c.bottom+10)),d.push(new k.IntPoint(c.right+10,c.top-10)),d.push(new k.IntPoint(c.left-10,c.top-10)),a.AddPath(d,k.PolyType.ptSubject,!0),a.ReverseSolution=!0,a.Execute(k.ClipType.ctUnion,b,k.PolyFillType.pftNegative,k.PolyFillType.pftNegative),
1==b.ChildCount()&&0<b.Childs()[0].ChildCount())for(a=b.Childs()[0],b.Childs()[0]=a.Childs()[0],c=1;c<a.ChildCount();c++)b.AddChild(a.Childs()[c]);else b.Clear();else{var b=a[0],c=a[1];k.Clear(b);this.FixOrientations();this.DoOffset(c);a=new k.Clipper(0);a.AddPaths(this.m_destPolys,k.PolyType.ptSubject,!0);if(0<c)a.Execute(k.ClipType.ctUnion,b,k.PolyFillType.pftPositive,k.PolyFillType.pftPositive);else{var c=k.Clipper.GetBounds(this.m_destPolys),d=new k.Path;d.push(new k.IntPoint(c.left-10,c.bottom+
10));d.push(new k.IntPoint(c.right+10,c.bottom+10));d.push(new k.IntPoint(c.right+10,c.top-10));d.push(new k.IntPoint(c.left-10,c.top-10));a.AddPath(d,k.PolyType.ptSubject,!0);a.ReverseSolution=!0;a.Execute(k.ClipType.ctUnion,b,k.PolyFillType.pftNegative,k.PolyFillType.pftNegative);0<b.length&&b.splice(0,1)}}};k.ClipperOffset.prototype.OffsetPoint=function(a,b,c){this.m_sinA=this.m_normals[b].X*this.m_normals[a].Y-this.m_normals[a].X*this.m_normals[b].Y;if(5E-5>this.m_sinA&&-5E-5<this.m_sinA)return b;
1<this.m_sinA?this.m_sinA=1:-1>this.m_sinA&&(this.m_sinA=-1);if(0>this.m_sinA*this.m_delta)this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[b].X*this.m_delta),k.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[b].Y*this.m_delta))),this.m_destPoly.push(new k.IntPoint(this.m_srcPoly[a])),this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*this.m_delta),k.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*
this.m_delta)));else switch(c){case k.JoinType.jtMiter:c=1+(this.m_normals[a].X*this.m_normals[b].X+this.m_normals[a].Y*this.m_normals[b].Y);c>=this.m_miterLim?this.DoMiter(a,b,c):this.DoSquare(a,b);break;case k.JoinType.jtSquare:this.DoSquare(a,b);break;case k.JoinType.jtRound:this.DoRound(a,b)}return a};k.ClipperOffset.prototype.DoSquare=function(a,b){var c=Math.tan(Math.atan2(this.m_sinA,this.m_normals[b].X*this.m_normals[a].X+this.m_normals[b].Y*this.m_normals[a].Y)/4);this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[a].X+
this.m_delta*(this.m_normals[b].X-this.m_normals[b].Y*c)),k.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_delta*(this.m_normals[b].Y+this.m_normals[b].X*c))));this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_delta*(this.m_normals[a].X+this.m_normals[a].Y*c)),k.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_delta*(this.m_normals[a].Y-this.m_normals[a].X*c))))};k.ClipperOffset.prototype.DoMiter=function(a,b,c){c=this.m_delta/c;this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[a].X+
(this.m_normals[b].X+this.m_normals[a].X)*c),k.ClipperOffset.Round(this.m_srcPoly[a].Y+(this.m_normals[b].Y+this.m_normals[a].Y)*c)))};k.ClipperOffset.prototype.DoRound=function(a,b){for(var c=Math.atan2(this.m_sinA,this.m_normals[b].X*this.m_normals[a].X+this.m_normals[b].Y*this.m_normals[a].Y),c=k.Cast_Int32(k.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(c))),d=this.m_normals[b].X,e=this.m_normals[b].Y,f,g=0;g<c;++g)this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[a].X+
d*this.m_delta),k.ClipperOffset.Round(this.m_srcPoly[a].Y+e*this.m_delta))),f=d,d=d*this.m_cos-this.m_sin*e,e=f*this.m_sin+e*this.m_cos;this.m_destPoly.push(new k.IntPoint(k.ClipperOffset.Round(this.m_srcPoly[a].X+this.m_normals[a].X*this.m_delta),k.ClipperOffset.Round(this.m_srcPoly[a].Y+this.m_normals[a].Y*this.m_delta)))};k.Error=function(a){try{throw Error(a);}catch(b){alert(b.message)}};k.JS={};k.JS.AreaOfPolygon=function(a,b){b||(b=1);return k.Clipper.Area(a)/(b*b)};k.JS.AreaOfPolygons=function(a,
b){b||(b=1);for(var c=0,d=0;d<a.length;d++)c+=k.Clipper.Area(a[d]);return c/(b*b)};k.JS.BoundsOfPath=function(a,b){return k.JS.BoundsOfPaths([a],b)};k.JS.BoundsOfPaths=function(a,b){b||(b=1);var c=k.Clipper.GetBounds(a);c.left/=b;c.bottom/=b;c.right/=b;c.top/=b;return c};k.JS.Clean=function(a,b){if(!(a instanceof Array))return[];var c=a[0]instanceof Array;a=k.JS.Clone(a);if("number"!=typeof b||null===b)return k.Error("Delta is not a number in Clean()."),a;if(0===a.length||1==a.length&&0===a[0].length||
0>b)return a;c||(a=[a]);for(var d=a.length,e,f,g,h,l,n,q,t=[],s=0;s<d;s++)if(f=a[s],e=f.length,0!==e)if(3>e)g=f,t.push(g);else{g=f;h=b*b;l=f[0];for(q=n=1;q<e;q++)(f[q].X-l.X)*(f[q].X-l.X)+(f[q].Y-l.Y)*(f[q].Y-l.Y)<=h||(g[n]=f[q],l=f[q],n++);l=f[n-1];(f[0].X-l.X)*(f[0].X-l.X)+(f[0].Y-l.Y)*(f[0].Y-l.Y)<=h&&n--;n<e&&g.splice(n,e-n);g.length&&t.push(g)}!c&&t.length?t=t[0]:c||0!==t.length?c&&0===t.length&&(t=[[]]):t=[];return t};k.JS.Clone=function(a){if(!(a instanceof Array)||0===a.length)return[];if(1==
a.length&&0===a[0].length)return[[]];var b=a[0]instanceof Array;b||(a=[a]);var c=a.length,d,e,f,g,h=Array(c);for(e=0;e<c;e++){d=a[e].length;g=Array(d);for(f=0;f<d;f++)g[f]={X:a[e][f].X,Y:a[e][f].Y};h[e]=g}b||(h=h[0]);return h};k.JS.Lighten=function(a,b){if(!(a instanceof Array))return[];if("number"!=typeof b||null===b)return k.Error("Tolerance is not a number in Lighten()."),k.JS.Clone(a);if(0===a.length||1==a.length&&0===a[0].length||0>b)return k.JS.Clone(a);a[0]instanceof Array||(a=[a]);var c,d,
e,f,g,h,l,n,q,t,s,u,w,y,z,F=a.length,H=b*b,B=[];for(c=0;c<F;c++)if(e=a[c],h=e.length,0!=h){for(f=0;1E6>f;f++){g=[];h=e.length;e[h-1].X!=e[0].X||e[h-1].Y!=e[0].Y?(s=1,e.push({X:e[0].X,Y:e[0].Y}),h=e.length):s=0;t=[];for(d=0;d<h-2;d++){l=e[d];q=e[d+1];n=e[d+2];y=l.X;z=l.Y;l=n.X-y;u=n.Y-z;if(0!==l||0!==u)w=((q.X-y)*l+(q.Y-z)*u)/(l*l+u*u),1<w?(y=n.X,z=n.Y):0<w&&(y+=l*w,z+=u*w);l=q.X-y;u=q.Y-z;n=l*l+u*u;n<=H&&(t[d+1]=1,d++)}g.push({X:e[0].X,Y:e[0].Y});for(d=1;d<h-1;d++)t[d]||g.push({X:e[d].X,Y:e[d].Y});
g.push({X:e[h-1].X,Y:e[h-1].Y});s&&e.pop();if(t.length)e=g;else break}h=g.length;g[h-1].X==g[0].X&&g[h-1].Y==g[0].Y&&g.pop();2<g.length&&B.push(g)}!a[0]instanceof Array&&(B=B[0]);"undefined"==typeof B&&(B=[[]]);return B};k.JS.PerimeterOfPath=function(a,b,c){if("undefined"==typeof a)return 0;var d=Math.sqrt,e=0,f,g,h=0,l=f=0;g=0;var k=a.length;if(2>k)return 0;b&&(a[k]=a[0],k++);for(;--k;)f=a[k],h=f.X,f=f.Y,g=a[k-1],l=g.X,g=g.Y,e+=d((h-l)*(h-l)+(f-g)*(f-g));b&&a.pop();return e/c};k.JS.PerimeterOfPaths=
function(a,b,c){c||(c=1);for(var d=0,e=0;e<a.length;e++)d+=k.JS.PerimeterOfPath(a[e],b,c);return d};k.JS.ScaleDownPath=function(a,b){var c,d;b||(b=1);for(c=a.length;c--;)d=a[c],d.X/=b,d.Y/=b};k.JS.ScaleDownPaths=function(a,b){var c,d,e;b||(b=1);for(c=a.length;c--;)for(d=a[c].length;d--;)e=a[c][d],e.X/=b,e.Y/=b};k.JS.ScaleUpPath=function(a,b){var c,d,e=Math.round;b||(b=1);for(c=a.length;c--;)d=a[c],d.X=e(d.X*b),d.Y=e(d.Y*b)};k.JS.ScaleUpPaths=function(a,b){var c,d,e,f=Math.round;b||(b=1);for(c=a.length;c--;)for(d=
a[c].length;d--;)e=a[c][d],e.X=f(e.X*b),e.Y=f(e.Y*b)};k.ExPolygons=function(){return[]};k.ExPolygon=function(){this.holes=this.outer=null};k.JS.AddOuterPolyNodeToExPolygons=function(a,b){var c=new k.ExPolygon;c.outer=a.Contour();var d=a.Childs(),e=d.length;c.holes=Array(e);var f,g,h,l,n;for(g=0;g<e;g++)for(f=d[g],c.holes[g]=f.Contour(),h=0,l=f.Childs(),n=l.length;h<n;h++)f=l[h],k.JS.AddOuterPolyNodeToExPolygons(f,b);b.push(c)};k.JS.ExPolygonsToPaths=function(a){var b,c,d,e,f=new k.Paths;b=0;for(d=
a.length;b<d;b++)for(f.push(a[b].outer),c=0,e=a[b].holes.length;c<e;c++)f.push(a[b].holes[c]);return f};k.JS.PolyTreeToExPolygons=function(a){var b=new k.ExPolygons,c,d,e;c=0;d=a.Childs();for(e=d.length;c<e;c++)a=d[c],k.JS.AddOuterPolyNodeToExPolygons(a,b);return b}})();(function(a,b,c,d){b.freeDraw=function(a){return new b.FreeDraw(a)};b.FreeDraw=b.FeatureGroup.extend({map:null,state:[],defaultPreferences:{},svg:{},element:{},creating:!1,lineFunction:function(){},latLngs:[],options:{},lastNotification:"",markerLayer:b.layerGroup(),hull:{},memory:{},polygons:[],edges:[],mode:1,polygonCount:0,fromPoint:{x:0,y:0},movingEdge:null,boundaryUpdateRequired:!1,silenced:!1,RECOUNT_TIMEOUT:1,initialize:function(a){"undefined"===typeof c&&b.FreeDraw.Throw("D3 is a required library",
"http://d3js.org/");"undefined"===typeof d&&b.FreeDraw.Throw("JSClipper is a required library","http://sourceforge.net/p/jsclipper/wiki/Home%206/");this.fromPoint={x:0,y:0};this.polygons=[];this.edges=[];this.hull={};this._latLngs=[];a=a||{};this.memory=new b.FreeDraw.Memory;this.options=new b.FreeDraw.Options;this.hull=new b.FreeDraw.Hull;this.element=a.element||null;this.setMode(a.mode||this.mode);this.options.setPathClipperPadding(100);b.FreeDraw.Polygon=b.Polygon.extend({options:{className:"leaflet-freedraw-polygon"}})},
recreateEdges:function(a){this.edges=this.edges.filter(function(b){if(b._freedraw.polygon!==a)return!0;this.map.removeLayer(b)}.bind(this));return this.createEdges(a)},resurrectOrphans:function(){var a=function(a){setTimeout(function(){this.silently(function(){this.recreateEdges(a)}.bind(this))}.bind(this))};this.getPolygons(!0).forEach(function(b){b&&b._parts[0]&&a.call(this,b)}.bind(this));setTimeout(function(){this.notifyBoundaries()}.bind(this))},onAdd:function(d){d.on("zoomend",function(){setTimeout(this.resurrectOrphans.bind(this))}.bind(this));
this.map=d;this.mode=this.mode||b.FreeDraw.MODES.VIEW;this.defaultPreferences={dragging:d.dragging._enabled,touchZoom:d.touchZoom._enabled,doubleClickZoom:d.doubleClickZoom._enabled,scrollWheelZoom:d.scrollWheelZoom._enabled};this.element||(this.element=d._container);this.lineFunction=c.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear");this.createD3();this.map.on(this.options.events[0]||"mousedown touchstart",this.bindEvents().mouseDown);this.map.on(this.options.events[1]||
"mousemove touchmove",this.bindEvents().mouseMove);this.map.on(this.options.events[2]||"mouseup   touchend",this.bindEvents().mouseUpLeave);a.document.getElementsByTagName("body")[0].addEventListener("mouseleave",this.bindEvents().mouseUpLeave);this.setMode(this.mode)},onRemove:function(){this._clearPolygons();this.map.off(this.options.events[0]||"mousedown touchstart",this.bindEvents().mouseDown);this.map.off(this.options.events[1]||"mousemove touchmove",this.bindEvents().mouseMove);this.map.off(this.options.events[2]||
"mousedown touchstart",this.bindEvents().mouseUpLeave);a.document.getElementsByTagName("body")[0].removeEventListener("mouseleave",this.bindEvents().mouseUpLeave)},silently:function(a){var b=this.silenced;this.silenced=!0;a.apply(this);b||(this.silenced=!1)},cancelAction:function(){this.creating=!1;this.movingEdge=null;this.destroyD3().createD3()},setMapPermissions:function(a){this.map.dragging[a]();this.map.touchZoom[a]();this.map.doubleClickZoom[a]();this.map.scrollWheelZoom[a]();"enable"===a&&
(this.defaultPreferences.dragging||this.map.dragging.disable(),this.defaultPreferences.touchZoom||this.map.touchZoom.disable(),this.defaultPreferences.doubleClickZoom||this.map.doubleClickZoom.disable(),this.defaultPreferences.scrollWheelZoom||this.map.scrollWheelZoom.disable())},setMode:function(a){this.mode=a=0===a?b.FreeDraw.MODES.VIEW:a;this.fire("mode",{mode:a});if(this.map){this.map.dragging[a&b.FreeDraw.MODES.CREATE?"disable":"enable"]();!this.boundaryUpdateRequired||this.mode&b.FreeDraw.MODES.EDIT||
(this.notifyBoundaries(),this.boundaryUpdateRequired=!1,this.options.memoriseEachEdge||this.memory.save(this.getPolygons(!0)));var c=b.FreeDraw.MODES,d=this.map._container,h=b.DomUtil.addClass,l=b.DomUtil.removeClass;l(d,"mode-create");l(d,"mode-edit");l(d,"mode-delete");l(d,"mode-view");l(d,"mode-append");a&c.CREATE&&h(d,"mode-create");a&c.EDIT&&h(d,"mode-edit");a&c.DELETE&&h(d,"mode-delete");a&c.VIEW&&h(d,"mode-view");a&c.APPEND&&h(d,"mode-append")}},unsetMode:function(a){this.setMode(this.mode^
a)},createD3:function(){this.svg=c.select(this.options.element||this.element).append("svg").attr("class",this.options.svgClassName).attr("width",200).attr("height",200)},destroyD3:function(){this.svg.remove();this.svg={};return this},latLngsToClipperPoints:function(a){return a.map(function(a){a=this.map.latLngToLayerPoint(a);return{X:a.x,Y:a.y}}.bind(this))},clipperPolygonsToLatLngs:function(a){var c=[];a.forEach(function(a){a.forEach(function(a){a=b.point(a.X,a.Y);a=this.map.layerPointToLatLng(a);
c.push(a)}.bind(this))}.bind(this));return c},uniqueLatLngs:function(a){var b=[],c=[];a.forEach(function(a){var d=JSON.stringify(a);-1===b.indexOf(d)&&(b.push(d),c.push(a))});return c},handlePolygonClick:function(a,c){var d=[],h=this.map.mouseEventToContainerPoint(c.originalEvent),l=Infinity,n=new b.Point,q=new b.Point,t=[];a._latlngs.forEach(function(a){t.push(this.map.latLngToContainerPoint(a))}.bind(this));t.forEach(function(a,c){var d=t[c+1]||t[0],e=b.LineUtil.pointToSegmentDistance(h,a,d);e<
l&&(l=e,n=a,q=d)}.bind(this));t.forEach(function(a,b){var c=t[b+1]||t[0];a===n&&c===q?(d.push(this.map.containerPointToLatLng(a)),d.push(this.map.containerPointToLatLng(h))):d.push(this.map.containerPointToLatLng(a))}.bind(this));var u=this.options.elbowDistance,w=function(){this.mode&b.FreeDraw.MODES.APPEND&&(a.setLatLngs(d),this.destroyEdges(a),this.createEdges(a))}.bind(this);this.mode&b.FreeDraw.MODES.APPEND&&!(this.mode&b.FreeDraw.MODES.DELETE)?this.options.onlyInDistance&&l>u||w():this.mode&
b.FreeDraw.MODES.DELETE&&!(this.mode&b.FreeDraw.MODES.APPEND)?this.destroyPolygon(a):l>u&&this.mode&b.FreeDraw.MODES.DELETE?this.destroyPolygon(a):w()},createPolygon:function(a,c){if(!this.options.multiplePolygons&&1<=this.getPolygons(!0).length)if(this.options.destroyPrevious)this.silently(this.clearPolygons);else return this.destroyD3().createD3(),!1;this.destroyD3().createD3();this.options.simplifyPolygon&&(a=function(){var b=d.Clipper.CleanPolygon(this.latLngsToClipperPoints(a),1.1),b=d.Clipper.SimplifyPolygon(b,
d.PolyFillType.pftNonZero);return this.clipperPolygonsToLatLngs(b)}.apply(this));if(a.length<=this.options.invalidLength&&!c)return!1;var g=this.options.polygonClassName,h=new b.FreeDraw.Polygon(a,{smoothFactor:this.options.smoothFactor,className:Array.isArray(g)?g[this.polygons.length]:g});h.on("click",function(a){this.handlePolygonClick(h,a)}.bind(this));h.addTo(this.map);this.polygons.push(h);this.createEdges(h);(function(){!this.silenced&&h._parts[0]&&(h._latlngs=[],h._parts[0].forEach(function(a){h._latlngs.push(this.map.layerPointToLatLng(a))}.bind(this)))}).call(this);
this.options.attemptMerge&&!this.silenced&&this.mergePolygons();this.silenced||(this.notifyBoundaries(),this.memory.save(this.getPolygons(!0)));return h},predefinedPolygon:function(a){return this.createPolygon(a,!0)},undo:function(){this._modifyState("undo")},redo:function(){this._modifyState("redo")},_modifyState:function(a){this.silently(this._clearPolygons.bind(this));this.memory[a]().forEach(function(a){this.silently(function(){this.createPolygon(a)}.bind(this))}.bind(this));this.notifyBoundaries()},
getPolygons:function(a){var c=[];if(a){if(!this.map)return[];for(var d in this.map._layers)this.map._layers.hasOwnProperty(d)&&(a=this.map._layers[d],a._container&&"G"===a._container.tagName.toUpperCase()&&a instanceof b.FreeDraw.Polygon&&c.push(a))}else this.edges.forEach(function(a){-1===c.indexOf(a._freedraw.polygon)&&a._freedraw.polygon instanceof b.FreeDraw.Polygon&&c.push(a._freedraw.polygon)}.bind(this));return c},mergePolygons:function(){var a=function(){var a=[];this.getPolygons().forEach(function(b){a.push(this.latLngsToClipperPoints(b._latlngs))}.bind(this));
var c=d.Clipper.SimplifyPolygons(a,d.PolyFillType.pftNonZero);this.silently(function(){this._clearPolygons();c.forEach(function(a){var c=[];a.forEach(function(a){a=b.point(a.X,a.Y);c.push(this.map.layerPointToLatLng(a))}.bind(this));this.createPolygon(c,!0)}.bind(this))})}.bind(this);a();a();this.getPolygons(!0).forEach(this.trimPolygonEdges.bind(this))},destroyPolygon:function(a){this.map.removeLayer(a);var c=this.polygons.indexOf(a);this.polygons.splice(c,1);this.destroyEdges(a);this.silenced||
(this.notifyBoundaries(),this.memory.save(this.getPolygons(!0)));this.options.deleteExitMode&&!this.silenced&&this.setMode(this.mode^b.FreeDraw.MODES.DELETE)},destroyEdges:function(a){this.edges=this.edges.filter(function(b){if(b._freedraw.polygon!==a)return!0;this.map.removeLayer(b)}.bind(this))},clearPolygons:function(){this.silently(this._clearPolygons);this.silenced||(this.notifyBoundaries(),this.memory.save(this.getPolygons(!0)))},_clearPolygons:function(){this.getPolygons().forEach(function(a){this.destroyPolygon(a)}.bind(this));
this.silenced||this.notifyBoundaries()},notifyBoundaries:function(){var a=[];this.getPolygons(!0).forEach(function(b){a.push(b._latlngs)}.bind(this));(function(){a.forEach(function(a){var b=a.length-1;if(b&&a[0]&&a[b]){var c=a[0].lng!==a[b].lng;(a[0].lat!==a[b].lat||c)&&a.push(a[0])}})}).call(this);this.polygonCount=a.length;var b=JSON.stringify(a);this.lastNotification!==b&&(this.lastNotification=b,this.fire("markers",{latLngs:a}),setTimeout(this.emitPolygonCount.bind(this),this.RECOUNT_TIMEOUT))},
emitPolygonCount:function(){var a=this.getPolygons(!0);a.every(function(a){return"M0 0"===a._container.lastChild.getAttribute("d").trim()})&&(this.silently(function(){this._clearPolygons();this.fire("markers",{latLngs:[]});this.fire("count",{count:this.polygonCount})}.bind(this)),this.polygonCount=0,a.length=0);a.length!==this.polygonCount&&(this.polygonCount=a.length,this.fire("count",{count:this.polygonCount}))},createEdges:function(a){var c=function(a){return a._parts[0]?a._latlngs.map(function(a){return this.map.latLngToLayerPoint(a)}.bind(this)):
[]}.bind(this),c=this.uniqueLatLngs(c(a)),d=this.polygons.indexOf(a),h=0;if(!c)return!1;c.forEach(function(c){var f=new b.DivIcon({className:Array.isArray(this.options.iconClassName)?this.options.iconClassName[d]:this.options.iconClassName});c=this.map.layerPointToLatLng(c);f=b.marker(c,{icon:f}).addTo(this.map);f._freedraw={polygon:a,polygonId:a._leaflet_id,latLng:f._latlng};this.edges.push(f);h++;f.on("mousedown touchstart",function(a){a.originalEvent.preventDefault();a.originalEvent.stopPropagation();
this.movingEdge=a.target}.bind(this))}.bind(this));return h},updatePolygonEdge:function(a,c,d){c=this.map.containerPointToLatLng(new b.Point(c,d));a.setLatLng(c);a._freedraw.latLng=c;var h=[];c=this.edges.filter(function(b){h.push(b);return b._freedraw.polygon===a._freedraw.polygon});this.edges=h;var l=[];c.forEach(function(a){l.push(a.getLatLng())});a._freedraw.polygon.setLatLngs(l);a._freedraw.polygon.redraw()},bindEvents:function(){return this.events?this.events:this.events={mouseDown:function(a){if(!this.creating&&
2!==a.originalEvent.button){var c=a.originalEvent;this.options.disablePropagation||c.stopPropagation();c.preventDefault();this.latLngs=[];this.fromPoint=this.map.latLngToContainerPoint(a.latlng);this.mode&b.FreeDraw.MODES.CREATE&&(this.creating=!0,this.setMapPermissions("disable"))}}.bind(this),mouseMove:function(a){var b=a.originalEvent;this.movingEdge?this._editMouseMove(a):this.creating&&this._createMouseMove(b)}.bind(this),mouseUpLeave:function(){this.movingEdge?(this.options.boundariesAfterEdit?
this.boundaryUpdateRequired=!0:this.notifyBoundaries(),this.trimPolygonEdges(this.movingEdge._freedraw.polygon),this.mergePolygons(),this.movingEdge=null,this.options.memoriseEachEdge&&this.memory.save(this.getPolygons(!0)),setTimeout(this.emitPolygonCount.bind(this),this.RECOUNT_TIMEOUT)):this._createMouseUp()}.bind(this)}},_editMouseMove:function(a){a=this.map.latLngToContainerPoint(a.latlng);this.movingEdge._icon.style[b.DomUtil.TRANSFORM]=a;this.updatePolygonEdge(this.movingEdge,a.x,a.y)},trimPolygonEdges:function(a){var b=
[];a&&0!==a._parts.length&&a._parts[0]&&(a._parts[0].forEach(function(a){b.push(this.map.layerPointToLatLng(a))}.bind(this)),a.setLatLngs(b),a.redraw(),this.destroyEdges(a),this.createEdges(a))},_createMouseMove:function(a){a=this.map.mouseEventToContainerPoint(a);var c=this.map.containerPointToLatLng(a),d=[this.fromPoint,new b.Point(a.x,a.y)];this.svg.append("path").classed("drawing-line",!0).attr("d",this.lineFunction(d)).attr("stroke","#D7217E").attr("stroke-width",2).attr("fill","none");this.fromPoint.x=
a.x;this.fromPoint.y=a.y;this.latLngs.push(c)},_createMouseUp:function(){if(this.creating&&(this.creating=!1,!(2>=this.latLngs.length))){if(this.options.hullAlgorithm){this.hull.setMap(this.map);var a=this.hull[this.options.hullAlgorithm](this.latLngs)}this.latLngs.push(this.latLngs[0]);this.createPolygon(a||this.latLngs)&&(this.latLngs=[],this.options.createExitMode&&this.setMode(this.mode^b.FreeDraw.MODES.CREATE));this.setMapPermissions("enable")}}});b.FreeDraw.MODES={NONE:0,VIEW:1,CREATE:2,EDIT:4,
DELETE:8,APPEND:16,EDIT_APPEND:20,ALL:31};b.FreeDraw.Throw=function(b,c){c&&("http://"===c.substr(0,7)||"https://"===c.substr(0,8)?a.console.error(c):a.console.error("See: https://github.com/Wildhoney/Leaflet.FreeDraw/blob/master/EXCEPTIONS.md#"+c));throw"Leaflet.FreeDraw: "+b+".";}})(window,window.L,window.d3,window.ClipperLib);
(function(){L.FreeDraw.Hull=function(){};L.FreeDraw.Hull.prototype={map:null,setMap:function(a){this.map=a},brian3kbGrahamScan:function(a){var b=new ConvexHullGrahamScan,c=[],d=[],e=[];a.forEach(function(a){d.push(this.map.latLngToLayerPoint(a))}.bind(this));d.forEach(function(a){b.addPoint(a.x,a.y)}.bind(this));b.getHull().forEach(function(a){c.push(L.point(a.x,a.y))}.bind(this));c.push(c[0]);c.forEach(function(a){e.push(this.map.layerPointToLatLng(a))}.bind(this));return e},wildhoneyConcaveHull:function(a){a.push(a[0]);
return(new ConcaveHull(a)).getLatLngs()}}})();
(function(){L.FreeDraw.Memory=function(){};L.FreeDraw.Memory.prototype={states:[[]],current:0,save:function(a){this.current++;this.states[this.current]&&this.clearFrom(this.current);this.states[this.current]||(this.states[this.current]=[]);a.forEach(function(a){this.states[this.current].push(a._latlngs)}.bind(this))},undo:function(){this.current--;this.states[this.current]||this.current++;return this.states[this.current]},canUndo:function(){return!!this.states[this.current-1]},redo:function(){this.current++;
this.states[this.current]||this.current--;return this.states[this.current]},canRedo:function(){return!!this.states[this.current+1]},clearFrom:function(a){this.states.splice(a)}}})();
(function(a,b){b.FreeDraw.Options=function(){};b.FreeDraw.Options.prototype={multiplePolygons:!0,events:[],simplifyPolygon:!0,invalidLength:3,hullAlgorithm:"wildhoneyConcaveHull",boundariesAfterEdit:!1,createExitMode:!0,attemptMerge:!0,smoothFactor:5,iconClassName:"polygon-elbow",svgClassName:"tracer",polygonClassName:"tracer",deleteExitMode:!1,memoriseEachEdge:!0,destroyPrevious:!1,disablePropagation:!1,elbowDistance:10,onlyInDistance:!1,hullAlgorithms:{"brian3kb/graham_scan_js":{method:"brian3kbGrahamScan",
name:"Graham Scan JS",global:"ConvexHullGrahamScan",link:"https://github.com/brian3kb/graham_scan_js"},"Wildhoney/ConcaveHull":{method:"wildhoneyConcaveHull",name:"Concave Hull",global:"ConcaveHull",link:"https://github.com/Wildhoney/ConcaveHull"}},setEvents:function(a){this.events=a},setMemoriseEachEdge:function(a){this.memoriseEachEdge=!!a},addElbowOnlyWithinDistance:function(a){this.onlyInDistance=!!a},setPathClipperPadding:function(a){b.Path.CLIP_PADDING=a},disableStopPropagation:function(){this.disablePropagation=
!0},setMaximumDistanceForElbow:function(a){this.elbowDistance=+a},exitModeAfterCreate:function(a){this.createExitMode=!!a},exitModeAfterDelete:function(a){this.deleteExitMode=!!a},destroyPreviousPolygon:function(a){this.destroyPrevious=!!a},allowMultiplePolygons:function(a){this.multiplePolygons=!!a},setSVGClassName:function(a){this.svgClassName=a},setBoundariesAfterEdit:function(a){this.boundariesAfterEdit=!!a},setSmoothFactor:function(a){this.smoothFactor=+a},setIconClassName:function(a){this.iconClassName=
a},setPolygonClassName:function(a){this.polygonClassName=a},setHullAlgorithm:function(c){if(!c||this.hullAlgorithms.hasOwnProperty(c))c?(c=this.hullAlgorithms[c],"undefined"===typeof a[c.global]&&b.FreeDraw.Throw(c.name+" is a required library for concave/convex hulls",c.link),this.hullAlgorithm=c.method):this.hullAlgorithm=!1}}})(window,window.L);
(function(){L.FreeDraw.Utilities={getMySQLMultiPolygon:function(a){var b=[];a.forEach(function(a){var d=[];a.forEach(function(a){d.push(a.lng+" "+a.lat)});b.push("(("+d.join(",")+"))")});return"MULTIPOLYGON("+b.join(",")+")"},getMySQLPolygons:function(a){var b=[];a.forEach(function(a){var d=[];a.forEach(function(a){d.push(a.lng+" "+a.lat)});b.push("POLYGON(("+d.join(",")+"))")});return b},getJsonPolygons:function(a){var b=[];a.forEach(function(a){var d=[];a.forEach(function(a){d.push("["+a.lng+", "+
a.lat+"]")});b.push('{ "latLngs": ['+d.join(", ")+"] }")});return b},getElasticSearchPolygons:function(a,b){b=b||"location";var c=[];a.forEach(function(a){a.forEach(function(a){c.push({lat:a.lat,lng:a.lng})})});var d={geo_polygon:{}};d.geo_polygon[b]={points:c};return JSON.stringify(d)}}})();